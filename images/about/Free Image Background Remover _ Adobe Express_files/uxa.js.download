var CS_CONF={"projectId":4451,"status":1,"hostnames":["adobe.com","photoshop.com","marketo.com","qualtrics.com","adobelr.com","dc.stage.acrobat.com","stage.acrobat.adobe.com","video.tv.adobe.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":20,"validationRate":10,"lastTrackingDraw":1717775740,"trackerDomain":"c.clicktale.net","recordingDomain":"r.clicktale.net","useMalkaPipeline":1,"ed":"l.clicktale.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"tt_blade_[a-z0-9]+Marquee","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":".*www(.stage)?.adobe.com\\/apps.*","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"DUAL_COLLECTION","experimental":null,"iframesTracking":1,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[".modal-payment"]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"apiErrors":{"validCustomHeaders":[],"plainCustomHeaders":[],"validUrls":[],"configurableApiErrorRules":[],"collectStandardHeaders":0,"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"collectionRules":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.clicktale.net","malkaRecordingDomain":"k-aus1.clicktale.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"dualCollectionTagDomain":"clicktale.net","ptcDomain":"cdnssl.clicktale.net","ptcPartition":"www20","ptcGuid":"df7e164d-c711-4376-a4c8-8b364d648be0","implementations":[{"template":{"name":"PiiMasking","args":{"cssSelectors":[".profile-container,.recent-assets-container-app,.welcome-message,.recent-grid-item,.your-work-container,.comment-timeline"],"attributes":[]}},"triggers":[{"name":"PageState","args":{"state":"Any"}}]}],"ptcSha512":"MabF536wfSNWjwv7did5A65enEi8URV6mb+ISLSMR1nG7vPDS/FBnERg29dgy0WSpIMz5yNV2SP2CBIGaD++tQ==","ptcSnapshotPath":"ss/4451/df7e164d-c711-4376-a4c8-8b364d648be0/18"};
var CS_INTEGRATIONS_CONF = {"qualtrics":{},"adobe-target":{}};
/* integration-qualtrics 2.19.1 */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-qualtrics-cap","version":"2.19.1","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function i(e,t){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",t,e.message])}}function a(e){return"object"==typeof e&&null!==e}function o(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.r(t);var r,s=n(0),c=s.name,u=s.version,d=function(e){var t,n,a,o;if(i((function(){var i=e.name;a=e.version;var r=i.replace("@contentsquare/integration-","");t=r+"-"+a;var s="-contentsquare";o=new RegExp(s+"$").test(r),n=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(s="-cap",o=new RegExp(s+"$").test(r),n=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:n,snippetVersion:a}}(s);d&&(r=d.parameterName,c=d.snippetBuildName,u=d.snippetVersion),i((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Qualtrics - v"+u);var e=!1;window.self!=window.top&&(e=CS_CONF.iframesTracking);var t=function(e,t){if(a(window.CS_INTEGRATIONS_CONF)&&a(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}(r,"settings"),n=!1,s=1;t&&(t.indexOf("sendArtificialPageviews")>-1&&(n=!0),t.indexOf("setReplayLinkToFirstPV")>-1&&(s=0));var d=!1;function l(e,t,i,a){e="FB_QT_"+e,_uxa.push(["trackDynamicVariable",{key:e,value:t}]),d&&"etr"===i&&_uxa.push(["trackEventTriggerRecording","@ETS@"+e]),a&&n&&_uxa.push(["trackPageview",window.location.pathname+"?"+a])}function p(){for(var e=0,t=document.domain,n=t.split("."),i="_cs_tld"+(new Date).getTime();e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}function f(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""}function _(){var e={contentsquare_integration:f("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):self!=top&&window.top.postMessage(e,"*")}function S(e){return e.toString().replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!e){var g="";if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?g=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(g=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{var m=document.location.search;m.indexOf("CSID=")>-1?g=o("CSID"):CS_CONF.ptcDomain&&m.indexOf("CT_UID=")>-1?g=o("CT_UID"):window._cs_integration_qualtrics_csid&&(g=decodeURIComponent(_cs_integration_qualtrics_csid))}if(g&&"null"!=g){var v=g.split("~"),y=v[0],b=v[1],I=v[2],C=v[3],D=p();y&&b&&I&&(C?document.cookie="_cs_optout="+C+";domain="+D+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+D+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+y+";domain="+D+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+b+";domain="+D+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+I+";domain="+D+";path=/;SameSite=None;Secure")}}var w="";function h(t){if(!e){var n=f("_cs_s");if(n&&n.indexOf(".T.")>-1)var i=setInterval((function(){(n=f("_cs_s"))&&-1===n.indexOf(".T.")&&(clearInterval(i),_())}),500);else _()}setTimeout((function(){if(d=_uxa.push(["isRecording"])){var e=function(e,t,n){e||(e="missingFromDynamicSnippet");var i=t;if(isNaN(i)&&(t=0),n){var a=n.sessionKey.split("."),o=n.projectId,r=a[0],s=a[1],c=n.pageNumber,u=c-t;return t>=c&&(u=c),0===i&&(u=1),"https://app.contentsquare.com/quick-playback/index.html?pid="+o+"&uu="+r+"&sn="+s+"&pvid="+u+"&recordingType=cs&vd="+e}}("qt",s,t);if(e&&Qualtrics.SurveyEngine){var n=Qualtrics.SurveyEngine,i="";CS_CONF.ptcDomain&&(i="ClicktaleSpecificRecording",!0===w&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,e):!1===w&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,e)),i="ContentsquareReplayLink",!0===w&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,e):!1===w&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,e)}}}),500)}if(window.Page?w=!1:window.q&&(w=!0),_uxa.push(["afterPageView",function(e){i((function(){h(e)}),c)}]),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",(function(e){i((function(){if(e&&"object"==typeof e.detail&&"string"==typeof e.detail.key&&"string"==typeof e.detail.value){var t=e.detail.key,n=e.detail.value;"FB_QT_"===t.slice(0,6)&&(t=t.slice(6)),l(t,n)}}),c)})),!1===w&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){var T=Page.runtime.ED.SurveyID,k=Page.getSessionId().replace("FS_","R_");l("Feedback Displayed","Survey ID : "+T);var O=!1,x=!1,N=!1,E=[];function P(){for(var e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e),n=0;n<t.length;n++){var i=Qualtrics.SurveyEngine.QuestionInfo[t[n]].Selector;if(i&&"TB"!=i){x=!0;break}}}function F(){i((function(){P(),O||(O=!0,l("Feedback Accepted","Survey ID : "+T,0,"cs_qualtrics=feedback_accepted_"+T)),setTimeout((function(){x&&!N&&!1===Page.runtime.FailedValidation&&(N=!0,l("Feedback Submitted","Survey ID : "+T,"etr","cs_qualtrics=feedback_submitted_"+T),l("Feedback Response ID",k))}),2e3);for(var e=Page._questionRenderers,t=Object.keys(e),n=0;n<t.length;n++){var i=e[t[n]].runtime;if(i&&i.Selector&&i.QuestionText&&i.Displayed){var a=i.QuestionText;if("NPS"===i.Selector&&i.Selected){var o=parseInt(i.Selected);E.includes(t[n]+"~~~"+o)||(E.push(t[n]+"~~~"+o),l("NPS Rating - "+t[n]+" - "+T+" - "+a,o))}if("STAR"===i.Selector)for(var r=i.Choices,s=Object.keys(r),c=0;c<s.length;c++){var u=r[s[c]].Display;if(r[s[c]].Value){var d=parseInt(r[s[c]].Value);E.includes(t[n]+" ("+(c+1)+")~~~"+d)||(E.push(t[n]+" ("+(c+1)+")~~~"+d),l("Star Rating - "+t[n]+" ("+(c+1)+") - "+T+" - "+u,d))}}if("SAVR"===i.Selector||"SAHR"===i.Selector)if((g=i.Selected)&&i.Choices)(m=i.Choices[g].ID)&&(E.includes(t[n]+"~~~AID"+m)||(E.push(t[n]+"~~~AID"+m),l(t[n]+" - "+T,"AID"+m)));if("MAVR"===i.Selector&&i.Choices){var p=i.Choices,f=Object.keys(p);for(c=0;c<f.length;c++){if(p[f[c]].Selected)(m=p[f[c]].ID)&&(E.includes(t[n]+"~~~AID"+m)||(E.push(t[n]+"~~~AID"+m),l(t[n]+" - "+T,"AID"+m)))}}if("Likert"===i.Selector&&i.Choices){var _=i.Choices,S=Object.keys(_);for(c=0;c<S.length;c++){var g,m;if(g=_[S[c]].Selected)if(!E.includes(t[n]+"~~~"+g))(m=_[S[c]].ID)&&(E.push(t[n]+"~~~"+g),l(t[n]+" - "+T+" - AID"+m,g))}}}}setTimeout((function(){document.getElementById("NextButton")||l("Feedback Completed","Survey ID : "+T,0,"cs_qualtrics=feedback_completed_"+T)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(F)}),c)}P(),Qualtrics.SurveyEngine.addOnPageSubmit(F)}else if(!0===w&&q.appData&&q.appData.setup&&q.appData.setup.survey&&q.appData.setup.survey.id&&q.appData.session&&q.appData.session.id){T=q.appData.setup.survey.id,k=q.appData.session.id.replace("FS_","R_");l("Feedback Displayed","Survey ID : "+T);N=!1;function F(){N||(N=!0,l("Feedback Submitted","Survey ID : "+T,"etr","cs_qualtrics=feedback_submitted_"+T),l("Feedback Response ID",k)),setTimeout((function(){document.getElementById("next-button")||l("Feedback Completed","Survey ID : "+T,0,"cs_qualtrics=feedback_completed_"+T)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(F)}Qualtrics.SurveyEngine.addOnPageSubmit(F)}}else if(!e){function R(){var e=f("_cs_id"),t=f("_cs_c"),n=f("_cs_optout");return e+"~"+Q+"~"+t+"~"+n}var Q;function A(e){function t(){var e=R();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if((Q=f("_cs_s"))&&Q.indexOf(".T.")>-1)var n=setInterval((function(){(Q=f("_cs_s"))&&-1===Q.indexOf(".T.")&&(clearInterval(n),t())}),500);else t()}function h(e){A()}window.addEventListener("message",(function(e){var t=e.data;t&&(t.contentsquare_integration&&"qualtrics"===t.vendor&&i((function(){const e=t.contentsquare_integration,n=e.split("."),i=Number(n[n.length-1]),a=new Date(i).toUTCString();if(window.CS_CONF&&CS_CONF.allowSubdomains){const t=p();document.cookie="_cs_s="+S(e)+";expires="+a+";domain="+t+";path=/"}else document.cookie="_cs_s="+S(e)+";expires="+a+";path=/";A()}),c),t.message&&"Contentsquare_QT_Integration_Ready"===t.message&&i((function(){var t={message:"Contentsquare_QT_Integration_Launch",user_values:R()};e.source.postMessage(t,"*")}),c))})),_uxa.push(["afterPageView",function(e){i((function(){h()}),c)}])}}),c)}]);/* integration-adobe-target 3.6.5 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-adobe-target-cap","version":"3.6.5","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],_uxa.push(["logSnippetError",n,e.message])}}function i(e){return"object"==typeof e&&null!==e}function a(e,n,t){if((t=t||window)&&n&&e){var r=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,r||(r=!0,n())}})}}t.r(n);var o,u=t(0),c=u.name,p=u.version,s=function(e){var n,t,i,a;if(r((function(){var r=e.name;i=e.version;var o=r.replace("@contentsquare/integration-","");n=o+"-"+i;var u="-contentsquare";a=new RegExp(u+"$").test(o),t=o.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=new RegExp(u+"$").test(o),t=o.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:t,snippetVersion:i}}(u);s&&(o=s.parameterName,c=s.snippetBuildName,p=s.snippetVersion),r((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("Adobe Target - v"+p);var e=function(e,n){if(i(window.CS_INTEGRATIONS_CONF)&&i(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}(o,"customObjectName");e&&(e=e.trim());var n=[];function t(e){for(var t=0;t<e.length;t++){var r=e[t],i="",a="";r.CampaignName&&r.RecipeName?(i=r.CampaignName,a=r.RecipeName):r.campaign&&r.experience?(i=r.campaign,a=r.experience):r["activity.name"]&&r["experience.name"]&&(i=r["activity.name"],a=r["experience.name"]),n.length&&n.indexOf(i+"~~~~"+a)>-1&&(i="",a=""),i&&a&&(n.push(i+"~~~~"+a),u=a,o="AB_AT_"+(o=i),_uxa.push(["trackDynamicVariable",{key:o,value:u}]))}var o,u}function u(n){e||(e="ttMETA"),function(e,n,t){t=t||window;var r=e.split(".");if(1==r.length)a(e,n,t);else{var i=t,o=0;const e=function(){i=o>0?i[r[o-1]]:window,++o>=r.length?a(r[o-1],n,i):a(r[o-1],e,i)};e()}}(e,(function(){setTimeout((function(){r((function(){t(window[e])}),c)}),500)}))}document.addEventListener("at-request-succeeded",(function(e){e&&e.detail&&e.detail.responseTokens&&t(e.detail.responseTokens)})),_uxa.push(["afterPageView",function(e){r((function(){u()}),c)}])}),c)}]);!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};function i(t,n){var i;return window.Zone&&"function"==typeof window.Zone.__symbol__&&(i=t[window.Zone.__symbol__(n)]),i||(i=t[n]),i}t.r(n),t.d(n,{getRequestParameters:function(){return kc}});var r="cs-native-frame",e={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function s(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(e.constructors).forEach((function(n){window[e.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),o("csNode",e.nodeProperties,t.Node.prototype,"get"),o("csElement",e.elementProperties,t.Element.prototype,"get"),o("csElement",e.elementPropertiesValues,t.Element.prototype,"value",!1),o("csHTMLImageElement",e.imageProperties,t.HTMLImageElement.prototype,"set"),o("csEvent",e.eventProperties,t.Event.prototype,"get"),o("csNavigator",e.navigatorProperties,t.navigator,"value")}function o(t,n,i,r,e){void 0===e&&(e=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(e||o in i)&&(window["".concat(t+o)]=s(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))}))}function c(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(window.csSetTimeout=i(window,"setTimeout"),window.csQueueMicrotask=i(window,"queueMicrotask"),window.csClearTimeout=i(window,"clearTimeout"),function(){var t,n=0;function i(t){return"$$"+t+ ++n}i.for=i,window.csSymbol=null!==(t=window.Symbol)&&void 0!==t?t:i}(),!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return c("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(yo){c("Critical","failed to copy references from window: ".concat(yo.message))}function h(t){return a(csString.prototype.toLowerCase.call(t.localName))}function a(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function f(t){return 1===t.nodeType}function l(t){return 3===t.nodeType}function v(t){return f(t)&&"link"===t.localName}function d(t){return f(t)&&"a"===t.localName}function w(t){return v(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function p(t){return f(t)&&"style"===t.localName}function y(t){return f(t)&&"input"===t.localName}function m(t){return f(t)&&"textarea"===t.localName}function g(t){return f(t)&&"script"===t.localName}function S(t){return f(t)&&"ownerSVGElement"in t}function b(t){return f(t)&&"select"===t.localName}function A(t){switch(t.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function E(t){return 9===t.nodeType}function R(t){return function(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}(t)&&"host"in t&&"mode"in t}function T(t){return f(t)&&!!csElementshadowRoot.apply(t)&&R(csElementshadowRoot.apply(t))}var O=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var N="detached";function k(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return C(n)&&csArray.prototype.push.call(i,N),{ancestors:i,selectionRoot:n}}function C(t){return B.isValidElement(t)}var I=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,_=9;function P(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return I.call(t,n)}))}var x=[/\d{4}/,/^ember\d+$/],M="@",D="data-cs-override-id",L="data-cs-dynamic-id";function U(t,n,i,r){var e=r.dynamicIdRegex||null,s=r.dynamicElementNameRegex,u=h(t);s&&(s.test(t.localName)&&(u=csString.prototype.replace.call(u,s,"$1".concat(M))));if(function(t,n){var i=j(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&q(D,i,n)}(t,i)){var o=j(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(D,'="').concat(o,'"]')}}var c=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,e=i.uniqueAttributes;r<e.length;r++){var s=e[r],u=t.getAttribute(s);if(null!==u)if(q(s,u,n))return{attributeName:s,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(c.attributeName,'="').concat(c.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,e=i.uniqueCssSelectors;r<e.length;r++){var s=e[r];if(I.call(t,s)&&H(s,n))return s}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var l=function(t){var n=t.getAttribute("id");return n?a(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==j(t)}(t)&&!function(t,n,i){return t.hasAttribute(L)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(x,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&q("id",t,n)}(n,i)}(t,l,i,e))return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#").concat(l)};var v=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var e=r[i];if(I.call(t,e))return e}return}(t,r);if(v){var d=function(t,n,i){if(t===N||t.nodeType===_)return 0;for(var r=0,e=n.previousElementSibling;e;)I.call(e,i)&&(r+=1),e=e.previousElementSibling;return r}(n,t,v);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(v,"](").concat(d,")")}}var w=function(t,n,i){if(t===N||t.nodeType===_)return 0;for(var r=i.dynamicElementNameRegex,e=!!(null==r?void 0:r.test(n.localName)),s=h(n),u=0,o=n.previousElementSibling;o;)(h(o)===s||e&&(null==r?void 0:r.test(o.localName)))&&!P(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function j(t){return t.getAttribute(D)}function q(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function H(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var B,V=11;function F(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return G(r,i);var e=U(r,t[0],n,i),s=e.elementSelector,u=e.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(G(o,i)).concat(s)}var c=F(t,n,i);return"".concat(c?"".concat(c,">"):"").concat(s)}function G(t,n){if(t===N)return"|detached|";if(t.host){var i=k(t.host),r=i.ancestors,e=i.selectionRoot;return"".concat(F(r,e,n),"|shadow-root|")}return t.nodeType===V?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return"";if(!n(s))return t.INVALID_ELEMENT;var u=k(s);return F(u.ancestors,u.selectionRoot,e)},t.getElementPathAndFirstAnchorParent=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return{path:"",firstAnchorParent:null};if(!n(s))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&d(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return C(n)&&csArray.prototype.push.call(i,N),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(s),o=u.firstAnchorParent;return{path:F(u.ancestors,u.selectionRoot,e),firstAnchorParent:o}}}(B||(B={})),window.CSPathComputation=window.CSPathComputation||B;var z=function(t,n){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},z(t,n)};function J(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}z(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var $=function(){return $=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},$.apply(this,arguments)};function W(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(t,r[e])&&(i[r[e]]=t[r[e]])}return i}function X(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function Y(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}c((r=r.apply(t,n||[])).next())}))}function K(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(u=0)),u;)try{if(i=1,r&&(e=2&o[0]?r.return:o[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,o[1])).done)return e;switch(r=0,e&&(o=[2&o[0],e.value]),o[0]){case 0:case 1:e=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!e||o[1]>e[0]&&o[1]<e[3])){u.label=o[1];break}if(6===o[0]&&u.label<e[1]){u.label=e[1],e=o;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(o);break}e[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{i=e=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}Object.create;function Z(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Q=Number.MAX_SAFE_INTEGER||9007199254740991;function tt(){}function nt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function it(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var rt=34164e6,et={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=Q),Math.floor(Math.random()*t)}},st=csSymbol("cachedJson");var ut,ot,ct=void 0!==window.Symbol?function(t){if(t[st])return t[st];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+ct(t[0]),i=1;i<t.length;i++)n+=","+ct(t[i]);return n+"]"}return t[st]=csJSON.stringify(t)}:csJSON.stringify,ht=function(){function t(t){var n,i,r,e;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||rt,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=$({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrors=$({enabled:null!==(i=t.customErrorsEnabled)&&void 0!==i?i:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.i(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.i(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.i(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&""===t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=$($({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc=$($({},t.voc),{enabled:!!t.voc.enabled})),t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=null!==(r=t.anonymizeDigits)&&void 0!==r?r:null,this.anonymizeEmails=null!==(e=t.anonymizeEmails)&&void 0!==e?e:null}return t.prototype.getTrackerUri=function(){return"".concat(this.u(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.u(),"://").concat(this.malkaRecordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.u(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.u(),"://").concat(this.loggerDomain)},t.prototype.getStaticResourceManagerUri=function(){return"".concat(this.u(),"://").concat(this.staticResourceManagerDomain)},t.prototype.u=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var e=r[0],s=r[1];n.h(e,s)}}))},t.prototype.h=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"staticResourceManagerDomain"===t&&(this.staticResourceManagerDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.i=function(t){return t?this.S(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.S=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t.prototype.isHeaderCollectionActive=function(){var t,n;return this.apiErrors.collectStandardHeaders||!!(null===(t=this.apiErrors.validCustomHeaders)||void 0===t?void 0:t.length)||!!(null===(n=this.apiErrors.plainCustomHeaders)||void 0===n?void 0:n.length)},t}(),at=function(){function t(t,n){this.A=t,this.R=n}return t.prototype.init=function(){this.T=this.A!==this.A.top,this.O=this.R.isWebView&&this.A===this.A.top,this.R.iframesTracking&&this.T||this.O?this.N=!1:this.N=!0},t.prototype.isInIframeContext=function(){return this.T},t.prototype.isTopWindowTracker=function(){return this.N},t.prototype.isInWebViewContext=function(){return this.O},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(ut||(ut={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(ot||(ot={}));var ft,lt=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return $($({},t),n)})):{}},t}(),vt=function(t){function n(n,i){return t.call(this,n,i)||this}return J(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.C(t);var n=ot.toQuery(t);this.I(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.I=function(t){var n=new window.Image(1,1);n.onload=tt,n.onerror=tt,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.C=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(lt),dt=function(){function t(t,n){this.P=t,this.M=n}return t.prototype.init=function(){this.D=new vt(this.P.getLoggerUri()),this.D.setRequestParametersProviders(this,this.M)},t.prototype.send=function(t){this.L=t,this.D.send()},t.prototype.getRequestParameters=function(){return{a:this.L.app,l:this.L.level,m:this.L.message,s:this.L.stacktrace}},t}(),wt=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,pt=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,yt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",mt=new RegExp("(ey".concat(yt,"\\.ey").concat(yt,"\\.").concat(yt,")"),"g"),gt=/[0-9]{4}/,St=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,bt="CS_ANONYMIZED_PII",At=/\d+/g,Et=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Rt=/(?:\d{1,3}\.){3}\d{1,3}/,Tt=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/;!function(t){t.replaceEmail=function(t){return csString.prototype.replace.call(t,wt,"CS_ANONYMIZED_EMAIL")},t.replaceJWT=function(t){return csString.prototype.replace.call(t,mt,"CS_ANONYMIZED_JWT")},t.replaceCreditCardNumber=function(t,n){return csString.prototype.replace.call(t,St,n)},t.replaceDigits=function(t){return csString.prototype.replace.call(t,At,bt)},t.replaceNumberSequence=function(t){return csString.prototype.replace.call(t,Et,bt)},t.mayHaveIPAddress=function(t){return Rt.test(t)||Tt.test(t)},t.mayHaveNumberSequence=function(t){return Et.test(t)},t.mayHaveCreditCardNumber=function(t){return gt.test(t)},t.mayHaveEmail=function(t){return pt.test(t)}}(ft||(ft={}));var Ot=function(){function t(){}return t.prototype.checkAndAnonymizePII=function(t,n,i){var r=this.anonymizeCreditCard(t);return!0===n?r=this.anonymizeAllDigits(r):!1===n&&(r=this.anonymizeNumberSequence(r)),!0!==i&&null!==i||(r=this.anonymizeEmail(r)),r},t.prototype.anonymizePII=function(t){return"string"==typeof t&&(t=this.anonymizeEmail(t)),t},t.prototype.anonymizeEmail=function(t){return ft.mayHaveEmail(t)?ft.replaceEmail(t):t},t.prototype.anonymizeAllDigits=function(t){return ft.replaceDigits(t)},t.prototype.anonymizeNumberSequence=function(t){return ft.replaceNumberSequence(t)},t.prototype.anonymizeCreditCard=function(t){var n=this;return ft.mayHaveCreditCardNumber(t)?ft.replaceCreditCardNumber(t,(function(t,i,r,e,s){if(-1===csString.prototype.indexOf.call(r,"*")){var u=e.length?csArray.prototype.join.call(csString.prototype.split.call(r,e),""):r;if(!n.U(u))return t}return"".concat(i).concat(bt).concat(s)})):t},t.prototype.U=function(t){for(var n=parseInt(t[t.length-1]),i=0,r=t.length-2;r>=0;r--){var e=parseInt(t[r]);r%2==0&&(e*=2),i+=Math.floor(e/10)+e%10}return 10-i%10===n},t.prototype.anonymizeJwt=function(t){return ft.replaceJWT(t)},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),Nt="15.12.0";function kt(){return{v:Nt}}var Ct=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function It(){return Math.floor(Ct()/1e3)}function _t(){return"function"==typeof window.Promise}function Pt(){return"navigation"in window}function xt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Mt(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var Dt=function(){function t(t,n){this.j=t,this.q=n}return t.prototype.getRequestParameters=function(){return $($({d:"".concat(Ct()),p:this.q.anonymizePII(window.location.href)},this.j.getRequestParameters()),kt())},t}();function Lt(t){return Ht(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function Ut(t){return t===parseInt(t,10)}function jt(t){return Ht(t)&&("string"==typeof t||t instanceof csString)}function qt(t){return"object"==typeof t}function Ht(t){return void 0!==t}function Bt(t){return Ht(t)&&null!==t}function Vt(t){return"function"==typeof t}function Ft(t){return t instanceof Element}function Gt(t){return t instanceof Error}var zt,Jt,$t="snippet-",Wt="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(zt||(zt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Jt||(Jt={}));var Xt=function(){function t(t,n,i){var r;this.H=n,this.q=new Ot,this.B=Jt[ut.warn],this.B=Jt[t.minLogLevel||ut.warn],this.D=i||new dt(t,new Dt(t,this.q)),this.V=((r={})[ut.debug]=[],r[ut.warn]=[],r[ut.error]=[],r[ut.critical]=[],r),this.F={implementation:{},dynamic:{}},this.D.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=ut.warn),this.G(i,n)){csArray.prototype.push.call(this.V[i],n||"");var r={message:this.J(t,n),stacktrace:this.W(t),app:"uxa",level:i};this.D.send(r)}},t.prototype.J=function(t,n){var i=Gt(t)?this.q.anonymizePII(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.W=function(t){return Gt(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.X()):this.X()},t.prototype.X=function(){var t=this.H.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.H.getSessionService(),r=i&&i.getSession(),e={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(e)},t.prototype.G=function(t,n){if(Jt[t]<this.B)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Wt,0)))return this.Y(n,zt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,$t,0)))return this.Y(n,zt.DYNAMIC);var i=this.V[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.Y=function(t,n){return t in this.F[n]?!(this.F[n][t]>=5)&&(this.F[n][t]+=1,!0):(this.F[n][t]=1,!0)},t}(),Yt="undefined"==typeof window,Kt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:process;var Zt=!Yt&&document.createElement("a"),Qt=/(:443|:80)$/;function tn(t){return Zt?(Zt.href=t,Zt.href):""}function nn(t,n){return new csURL(t,n).href}function rn(t){var n=un(t);return null===n?"":decodeURIComponent(n.hostname)}function en(t,n){return csArray.prototype.some.call(n,(function(n){return Mt(t,".".concat(n))||t===n||""===n}))}function sn(t){return csString.prototype.replace.call(t,Qt,"")}function un(t){return Zt&&(xt(t,"http://")||xt(t,"https://"))?(Zt.href=t,{hash:Zt.hash,host:sn(Zt.host),hostname:Zt.hostname,href:Zt.href,origin:Zt.origin?Zt.origin:sn("".concat(Zt.protocol,"//").concat(Zt.host)),pathname:(n=Zt.pathname,"/"===n[0]?n:"/".concat(n)),port:Zt.port,protocol:Zt.protocol,search:Zt.search}):null;var n}var on,cn,hn,an,fn="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(on||(on={})),function(t){t.Parent="parent",t.Child="child"}(cn||(cn={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback",t.StaticResource="staticResource",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage",t.CustomError="customError"}(hn||(hn={})),function(t){t.buildBaseMessage=function(t,n,i,r){var e={type:t,from:n,pid:i,signature:fn};return void 0!==r&&r>=0&&(e.id=r),e},t.isMessageValid=function(t,n,i,r){var e=rn(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===fn&&t.data.from===n&&t.data.pid===i&&en(e,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(an||(an={}));var ln=function(){function t(t){this.j=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=ut.warn);var r={message:t,errorCode:n,level:i},e=an.buildBaseMessage(hn.ChildLogMessage,cn.Child,this.j.projectId);e.content=r,an.sendPostMessage(window.parent,"*",e)},t}(),vn=function(){function t(){}return t.prototype.setContext=function(t,n){this.K=t,this.Z=n},t.prototype.getVisitorService=function(){return this.K},t.prototype.getSessionService=function(){return this.Z},t}(),dn=["t.contentsquare.net","clicktale"];window.addEventListener("error",(function(t){"string"!=typeof t.filename||!csArray.prototype.some.call(dn,(function(n){return csString.prototype.indexOf.call(t.filename,n)>-1}))||csString.prototype.indexOf.call(t.filename,"blob")>-1&&(null==t.message?void 0:csString.prototype.indexOf.call(t.message,"importScripts"))>-1||wn.critical("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))}));var wn=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(dn,t)},t.setStrategy=function(n){t.tt=n},t.computeIsActive=function(n){t.nt=et.boolean(n),t.nt?t.it=et.boolean(10):t.it=!1},t.isLoggingActive=function(){return t.nt},t.getStrategy=function(){return t.tt},t.debug=function(n,i){void 0===i&&(i=""),t.nt&&this.tt.send(n,i,ut.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.nt&&this.tt.send(n,i,ut.warn)},t.error=function(n,i){void 0===i&&(i=""),t.nt&&this.tt.send(n,i,ut.error)},t.critical=function(t,n){void 0===n&&(n=""),this.tt.send(t,n,ut.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{var s=n.apply(void 0,r);return Ht(window.Promise)&&s instanceof window.Promise?s.then((function(t){return t}),(function(n){return i.error(n,t)})):s}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.it},t.nt=!1,t.it=!1,t}(),pn={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},isPerfLoggingActive:function(){return!1}};var yn=function(t){return function(n,i,r){var e=(null==i?void 0:i.toString())||"",s=t||"".concat(n.constructor&&n.constructor.name,".").concat(e);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mn(s,u.bind(this)).apply(void 0,t)}}}};function mn(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var e=n.apply(void 0,i);return Ht(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return pn.error(n,t)})):e}catch(n){try{pn.error(n,t)}catch(t){}}}}var gn=!1;function Sn(){return function(t,n,i){var r=i.value;i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&gn||r.call(this,t,n)}}}var bn=function(){function t(){this.et=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.et},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.st},enumerable:!1,configurable:!0}),t.prototype.pushAll=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},t.prototype.push=function(t){this.et++,this.ut?this.ut=this.ut[1]=[t,void 0]:this.ut=this.st=[t,void 0]},t.prototype.pop=function(){if(!this.st)return null;this.et--;var t=this.st[0];return this.st=this.st[1],this.st||(this.ut=void 0),t},t.prototype.forEach=function(t){for(var n=this.st;null==n?void 0:n.length;)t(n[0]),n=n[1]},t.prototype.clear=function(){this.et=0,this.st=this.ut=void 0},t}(),An=50,En=.1;var Rn=!1,Tn=new bn;var On=[],Nn=[];var kn,Cn,In,_n,Pn=function(t){return function(n,i,r){var e=r.value;r.value=function(){if(!Rn)return r.value=e,e.apply(this,arguments);!function(t){csArray.prototype.push.call(On,t),performance.mark("".concat(t,"-start"))}(t);var n=e.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=En&&csArray.prototype.push.call(Nn,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(On),0===On.length&&(i>An&&Tn.push(Nn),Nn=[])}}(t),n}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,e,s,u,o){var c=encodeURIComponent("".concat(i)),h=e===t.CURRENT_DOMAIN?void 0:e,a=r(s),f=a?";expires=".concat(a.toUTCString()):"",l=Bt(h)?";domain=".concat(h):"",v="".concat(n,"=").concat(c).concat(f).concat(";path=/").concat(l);return Ht(u)&&u!==In.NotSet&&(v="".concat(v,";SameSite=").concat(u)),Ht(o)&&o===_n.Yes&&(v="".concat(v,";Secure")),document.cookie=v,!0}function r(t){return Lt(t)?new csDate(Ct()+t):t}function e(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),In.None,_n.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=e,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var s="_cs_root-domain",u=n(s);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,"."),c=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(s,c=csArray.prototype.join.call([csArray.prototype.pop.call(o),c],"."),c,void 0,t,r),u=n(s);return e(s,c),c}}(kn||(kn={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(Cn||(Cn={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(In||(In={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(_n||(_n={}));var xn=function(){function t(t,n,i){this.j=t,this.ot=n,this.ht=i,this.ft=!1,this.lt=In.NotSet,this.vt=_n.No}return t.prototype.getSameSiteFlag=function(){return this.lt},t.prototype.getSecureFlag=function(){return this.vt},t.prototype.getDomain=function(){return this.wt},t.prototype.getRootDomain=function(){return this.yt},t.prototype.init=function(){if(!this.j.cookielessTrackingEnabled){var t=this.gt(),n=this.St();this.ft=this.bt(t,n),this.ft?(this.lt=t,this.vt=n):this.j.secureCookiesEnabled&&"https:"===this.ot.getUrlProtocol()&&(this.vt=_n.Yes),this.yt=this.At(),this.wt=this.Et(this.yt)}},t.prototype.bt=function(n,i){return!Cn.browserIsSafariV12()&&(kn.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!kn.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(kn.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.gt=function(){return"http:"===this.ot.getUrlProtocol()?In.Lax:this.ht.isSameSiteNoneSecureNeeded()||this.j.crossDomainTracking?In.None:In.Lax},t.prototype.St=function(){return"http:"===this.ot.getUrlProtocol()?_n.No:this.j.secureCookiesEnabled||this.j.crossDomainTracking||this.ht.isSameSiteNoneSecureNeeded()?_n.Yes:_n.No},t.prototype.isSameSiteSupported=function(){return this.ft},t.prototype.set=function(t,n,i){var r=kn.toExpireDate(i);kn.set(t,n,this.wt,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.wt;kn.remove(t,i)},t.prototype.At=function(){var t=this.ht.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?In.None:void 0,i=t?_n.Yes:void 0;return kn.getRootDomain(n,i)},t.prototype.Et=function(t){return this.j.allowSubdomains?t:kn.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),Mn="_cs_t",Dn=function(){function t(t,n){this.Rt=t,this.j=n,this.Tt=!1,this.Ot=!1}return t.prototype.init=function(){if(!this.j.cookielessTrackingEnabled&&this.Rt.isTopWindowTracker()&&"cookie"in document){if(!this.Rt.isInIframeContext()&&kn.isCookiePresent())return this.Tt=!0,void(this.Ot=!1);if(kn.set(Mn,"1",kn.CURRENT_DOMAIN),null!==kn.get(Mn))return this.Tt=!0,this.Ot=!1,void kn.remove(Mn,kn.CURRENT_DOMAIN);kn.set(Mn,"1",kn.CURRENT_DOMAIN,void 0,In.None,_n.Yes),null!==kn.get(Mn)&&(this.Tt=!0,this.Ot=!0,kn.remove(Mn,kn.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.Tt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.Ot},t}();var Ln,Un=function(){function t(t,n){this.j=t,this.ht=n}return t.prototype.canTrack=function(){return this.j.isProjectActive()&&this.Nt()&&this.kt()&&this.Ct()},t.prototype.canTrackInChild=function(){return this.j.isProjectActive()&&this.It()&&(this.kt()||this._t())},t.prototype.Ct=function(){return this.j.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.ht.areCookiesEnabled()},t.prototype.kt=function(){return en(window.location.hostname,this.j.hostnames)},t.prototype.Nt=function(){return!this.Pt()&&this.xt()},t.prototype.It=function(){return!this.Pt()&&this.Mt()},t.prototype._t=function(){return nt(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Pt=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.xt=function(){return this.Dt()&&this.Lt()},t.prototype.Mt=function(){return this.Dt()},t.prototype.Lt=function(){try{return!!window.localStorage}catch(t){return!1}},t.prototype.Dt=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),jn=function(){function t(t){var n=this;this.Ut=!1,this.jt=new Map,this.qt=new Map,this.Ht=new Map,this.Bt="CS_WORKER_SIGNATURE";var i="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,a){function s(e){try{c(n.next(e))}catch(e){a(e)}}function i(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));var o,a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},s=function(){function r(e){var t,r=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var t=0,n=e;t<n.length;t++){var o=n[t],a=o.metadata,s=o.events;r.send(s,a)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),i=!("ct"in s),c="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&i?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var u=c?JSON.stringify(r):r,h=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),p="".concat(this.endpoint,"?").concat(h);!function(e,t){for(var r=e.length,n=0;n<r;n++)if(t(e[n],n))return!0;return!1}(this.mandatoryParameters,(function(e){return null==s[e]}))?this.compressionOpts&&i&&"string"==typeof u?this.compressionOpts.compressor(u,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(p,s,e)})):this.doSend(p,s,u):a("[".concat(this.worker?"WORKER":"MAIN","] All mandatory parameters are not present on ").concat(p))},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,a=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:a,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),i=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),c=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new i(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var u=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new i(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,a;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,a=e.events,this.byteSizeCounter.addString(t),"string"==typeof a?this.byteSizeCounter.addString(a):this.byteSizeCounter.addArrayBuffer(a),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(a,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,a,s=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return a=n.sent(),[4,Promise.all(t.map((function(e){return s.cache.delete(e)})))];case 4:return n.sent(),e(a),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),h=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new u(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new c(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,o=new h("csPersisted");function a(r){var n;if((n=r)&&n.WORKER_SIGNATURE===e)switch(r.type){case"CreatePostRequest":var a=r.endpoint,i=r.compressionOutputType,c=r.useRetry,u=r.mandatoryParameters,h={endpoint:a,mandatoryParameters:u,worker:!0};i&&(h.compressionOpts={compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c&&(h.recoveryStorage=o);var p=new s(h);t.set(a,p),p.onLoad((function(t){var r={type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),p.onError((function(t){var r={type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var f=r.endpoint,y=r.queryParams;(p=t.get(f))&&p.setQueryParams(y);break;case"RemoveQueryParams":f=r.endpoint,y=r.queryParams,(p=t.get(f))&&p.removeQueryParams(y);break;case"Send":f=r.endpoint;var d=r.payload;y=r.queryParams,(p=t.get(f))&&p.send(d,y);break;case"Abort":f=r.endpoint,(p=t.get(f))&&p.abort();break;case"SetHeader":f=r.endpoint;var l=r.headerName,v=r.headerValue;(p=t.get(f))&&p.setRequestHeader(l,v);break;case"SetTimeout":var m=r.endpoint,S=r.timeout;(p=t.get(m))&&p.onTimeout((function(){var t={type:"onTimeout",endpoint:m,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,a,s;return n(this,(function(n){switch(n.label){case 0:r=e.getReader(),n.label=1;case 1:return[4,r.read()];case 2:return o=n.sent(),a=o.done,s=o.value,a?[3,3]:(t(s),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');try{this.Vt=this.Ft(i),this.Ut=!0,this.Gt()&&(this.zt=new ReadableStream({start:function(t){n.Jt=t}}),this.Vt.postMessage(this.zt,[this.zt]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.Ut=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Bt,this.Vt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Bt,this.Jt.enqueue(t)},t.prototype.Ft=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,e=window.Worker,s=new r([t],{type:"application/javascript"}),u=i.createObjectURL(s);wn.whiteListFilename(u);var o=new e(u);return o.onmessage=function(t){var i=t.data,r=i.type,e=i.endpoint;if(i.WORKER_SIGNATURE===n.Bt)if("onLoad"===r){var s=t.data.response;(u=n.jt.get(e))&&u(s)}else if("onError"===r){s=t.data.response;(u=n.qt.get(e))&&u(s)}else if("onTimeout"===r){var u;(u=n.Ht.get(e))&&u()}},o},t.prototype.registerOnLoadCallback=function(t,n){this.jt.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this.qt.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this.Ht.set(t,n)},t.prototype.isSupported=function(){return this.Ut},t.prototype.Gt=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),qn=function(){function t(t){var n;this.$t={},this.Wt=t.endpoint,this.Xt=t.networkWorker,this.Yt=t.compressionOutputType,this.Kt=t.useRetry,this.Xt.postMessage({type:"CreatePostRequest",endpoint:this.Wt,compressionOutputType:this.Yt,useRetry:this.Kt,mandatoryParameters:null!==(n=t.mandatoryParameters)&&void 0!==n?n:[]})}return t.prototype.setQueryParams=function(t){var n=this;this.Xt.postMessage({type:"SetQueryParams",endpoint:this.Wt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.$t[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.$t},t.prototype.removeQueryParams=function(t){var n=this;this.Xt.postMessage({type:"RemoveQueryParams",endpoint:this.Wt,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.$t[t]}))},t.prototype.send=function(t,n){this.Xt.postMessage({type:"Send",endpoint:this.Wt,payload:t,queryParams:n})},t.prototype.abort=function(){this.Xt.postMessage({type:"Abort",endpoint:this.Wt})},t.prototype.onLoad=function(t){this.Xt.registerOnLoadCallback(this.Wt,t)},t.prototype.onError=function(t){this.Xt.registerOnErrorCallback(this.Wt,t)},t.prototype.setRequestHeader=function(t,n){this.Xt.postMessage({type:"SetHeader",endpoint:this.Wt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.Xt.registerOnTimeoutCallback(this.Wt,t),this.Xt.postMessage({type:"SetTimeout",endpoint:this.Wt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(Ln||(Ln={}));var Hn=function(t){this.onError=t};function Bn(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),e=0;e<i;e+=1)r[e]=t[e];return r}function Vn(t,n){for(var i=t.length,r=new csArray(i),e=0;e<i;e+=1)r[e]=n(t[e]);return r}function Fn(t,n){var i=[];return function(t,n,i){for(var r=0,e=0;e<t.length;e+=1)for(var s=n(t[e]),u=0;u<s.length;u++)i(s[u],r++)}(t,n,(function(t){return csArray.prototype.push.call(i,t)})),i}function Gn(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var e=0,s=t.next();!s.done;)n(s.value,e++),s=t.next()}function zn(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return t[r]}function Jn(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return!0;return!1}function $n(t,n){for(var i=t.length,r=[],e=0;e<i;e+=1){var s=t[e];n(s)&&csArray.prototype.push.call(r,s)}return r}function Wn(t,n){for(var i=0;i<t.length;i++)csArray.prototype.push.call(n,t[i])}function Xn(t){var n=t instanceof Map,i=[];return t.forEach((function(t,r){return csArray.prototype.push.call(i,n?[r,t]:t)})),i}var Yn,Kn,Zn,Qn=function(){function t(t){var n,i=this;this.$t={},this.Zt={},this.Qt=function(t){for(var n=0,r=t;n<r.length;n++){var e=r[n],s=e.metadata,u=e.events;i.send(u,s)}},this.Wt=t.endpoint,this.tn=t.compressionOpts,this.nn=t.recoveryStorage,this.mandatoryParameters=null!==(n=t.mandatoryParameters)&&void 0!==n?n:[],this.worker=!!t.worker,this.nn&&this.nn.recover(this.Qt)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.$t[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.$t[t]})):this.$t={}},t.prototype.send=function(t,n){var i=this,r=n||$({},this.$t),e=!("ct"in r),s="string"!=typeof t&&!this.rn(t);"ct"in r||(this.tn&&e?r.ct=this.tn.compressionType:r.ct=Ln.UNCOMPRESSED);var u=s?JSON.stringify(t):t,o=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),c="".concat(this.Wt,"?").concat(o);Jn(this.mandatoryParameters,(function(t){return null==r[t]}))?pn.warn("[".concat(this.worker?"WORKER":"MAIN","] All mandatory parameters are not present on ").concat(c)):this.tn&&e&&"string"==typeof u?this.tn.compressor(u,this.tn.compressionOutputType,(function(t){return i.en(c,r,t)})):this.en(c,r,u)},t.prototype.onLoad=function(t){this.un=t},t.prototype.onError=function(t){this.cn=t},t.prototype.onTimeout=function(t,n){this.hn=t,this.an=n},t.prototype.abort=function(){this.ln&&this.ln()},t.prototype.setRequestHeader=function(t,n){this.Zt[t]=n},t.prototype.getQueryParams=function(){return this.$t},t.prototype.rn=function(t){return t&&void 0!==t.byteLength},t.prototype.en=function(t,n,i){var r=this,e=new XMLHttpRequest,s=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");e.open("POST",t),e.onload=function(){if(r.nn&&r.nn.recover(r.Qt),r.un){var t={params:n,responseText:e.responseText,status:e.status};r.un(t)}},e.onerror=function(){r.nn&&r.nn.save({key:s,metadata:n,events:i}),r.cn&&r.cn({params:n})},this.an&&this.hn&&(e.timeout=this.an,e.ontimeout=function(){r.hn()}),this.ln=function(){return e.abort()},Object.keys(this.Zt).forEach((function(t){e.setRequestHeader(t,r.Zt[t])})),e.send(i)},t}(),ti=function(){function t(t){this.vn=t,this.Xt=new jn(this.vn)}return t.prototype.create=function(t,n,i,r,e){if(void 0===e&&(e=[]),this.Xt.isSupported()&&n)return new qn({networkWorker:this.Xt,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:e});var s=i?{compressor:this.vn.compress,compressionOutputType:i,compressionType:this.vn.algorithm}:void 0;return new Qn({endpoint:t,compressionOpts:s,recoveryStorage:r})},t}(),ni=function(){function t(t,n,i,r,e){this.K=t,this.Z=n,this.dn=i,this.wn=r,this.j=e}return t.prototype.get=function(){return{exclusion:this.dn.getAppliedTrackingDraw(),visitor:this.K.getVisitor(),session:this.Z.getSession(),cvars:this.wn.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.dn.exclude(this.j),this.K.removeVisitor(),this.Z.removeSession(),this.wn.removeCustomVariablesSession()},t.prototype.include=function(t){this.dn.removeExclusion(),this.K.setVisitor(t.visitor),t.session?this.Z.setSession(t.session):this.Z.removeSession(),t.cvars?this.wn.setCustomVariableSession(t.cvars):this.wn.removeCustomVariablesSession()},t}(),ii="_cs_id",ri=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?$/,ei=function(){function t(t,n,i){this.j=t,this.yn=n,this.mn=i}return t.prototype.onCookieToSet=function(t){this.gn=t},t.prototype.onCookieToRemove=function(t){this.Sn=t},t.prototype.get=function(){var n;return(n=this.j.cookielessTrackingEnabled?this.mn.getItem(ii):this.yn.get(ii))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.j.cookielessTrackingEnabled)this.mn.setItem(ii,r);else{var e=new csDate(n.expires);this.yn.set(ii,r,e),null===(i=this.gn)||void 0===i||i.call(this,ii,r,e)}},t.prototype.remove=function(){var t;this.j.cookielessTrackingEnabled?this.mn.removeItem(ii):(this.yn.delete(ii),null===(t=this.Sn)||void 0===t||t.call(this,ii))},t.prototype.handleSubdomainChange=function(){if(!this.j.cookielessTrackingEnabled){var t=this.get();t&&(t.allowSubdomains=this.j.allowSubdomains,this.j.allowSubdomains?this.yn.delete(ii,xn.CURRENT_DOMAIN):this.yn.delete(ii,this.yn.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4],o=n[5],c=n[6],h=n[7];return{id:i,creationTimestamp:Number(r),visitsCount:Number(e),hitTimestamp:Number(s),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:void 0===h?void 0:!!Number(h)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.allowSubdomains?1:0],".")},t.isValidVisitorString=function(t){return ri.test(t)},t}();!function(t){t.BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",t.BLOCKED_BY_CONSENT_WITHDRAWN="W",t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(Yn||(Yn={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(Kn||(Kn={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(Zn||(Zn={}));var si,ui="_cs_s",oi=18e5,ci=/^(\d+\.[013567TBW](\.[01])?)(\.\d+)?$/,hi=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(si||(si={}));var ai,fi=function(){function t(t,n,i){this.j=t,this.yn=n,this.mn=i,this.bn=null,this.An=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.En();return t.Rn(i)}var r=this.Tn(),e=r.sessionString,s=r.status,u=t.Rn(e);if(s!==si.EXPIRED)return u;if(this.j.cookielessTrackingEnabled)return null;var o=this.En();if(!o)return null;var c=csString.prototype.split.call(o,hi);if(!t.On(c))return o;var h=c[c.length-1],a=parseInt(h,10);return isNaN(a)||this.Nn(a),u},t.prototype.onCookieToSet=function(t){this.gn=t},t.prototype.onCookieToRemove=function(t){this.Sn=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=oi);var r=Ct()+n,e=this.toString(t);e+="".concat(hi).concat(r),this.kn(e,r),this.j.cookielessTrackingEnabled?this.mn.setItem(ui,e):(this.yn.set(ui,e,n),null===(i=this.gn)||void 0===i||i.call(this,ui,e,n))},t.prototype.remove=function(){var t;this.j.cookielessTrackingEnabled?this.mn.removeItem(ui):(this.yn.delete(ui),null===(t=this.Sn)||void 0===t||t.call(this,ui)),this.Cn()},t.prototype.handleSubdomainChange=function(){if(!this.j.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.j.allowSubdomains?this.yn.delete(ui,xn.CURRENT_DOMAIN):this.yn.delete(ui,this.yn.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],hi)},t.prototype.kn=function(t,n){this.bn={sessionString:t,expires:n}},t.prototype.Tn=function(){return this.bn?this.bn&&Ct()<=this.bn.expires?{sessionString:this.bn.sessionString,status:si.FOUND}:{sessionString:this.bn.sessionString,status:si.EXPIRED}:{sessionString:this.En(),status:si.NOT_FOUND}},t.prototype.Cn=function(){this.bn=null},t.prototype.Nn=function(t){this.bn&&(this.bn.expires=t,this.An=!0)},t.prototype.isCacheRefreshed=function(){return this.An},t.prototype.resetCacheRefreshed=function(){this.An=!1},t.prototype.En=function(){if(this.j.cookielessTrackingEnabled){var t=this.mn.getItem(ui);return!t||this.In(t)?null:t}var n=this.yn.get(ui);return!n||this.In(n)?null:n},t.prototype.In=function(n){var i=csString.prototype.split.call(n,hi);if(!t.On(i))return!1;var r=parseInt(i[i.length-1],10);return!isNaN(r)&&Ct()>r},t.On=function(t){return 13===t[t.length-1].length},t.Rn=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,ci))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.Rn(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n,i=csString.prototype.split.call(t,hi),r=i[0];return{recordingState:i[1],etrState:null!==(n=i[2])&&void 0!==n?n:Kn.ETR_OFF,pageNumber:parseInt(r,10)}},t.isValidSessionString=function(t){return ci.test(t)},t}();!function(t){t.fromRaw=function(t){return{exclusion:Number(t._cs_ex)||0,visitor:t._cs_id?ei.fromString(t._cs_id):null,session:t._cs_s?fi.fromRawString(t._cs_s):null,cvars:t._cs_cvars?window.csJSON.parse(t._cs_cvars):null}}}(ai||(ai={}));var li,vi="_cs_ex",di=2592e6,wi=/^[0-9]+$/,pi=function(){function t(t,n,i){this.j=t,this.yn=n,this.mn=i}return t.prototype.onCookieToSet=function(t){this.gn=t},t.prototype.onCookieToRemove=function(t){this.Sn=t},t.prototype.get=function(){return this.j.cookielessTrackingEnabled?Number(this.mn.getItem(vi)):Number(this.yn.get(vi))},t.prototype.set=function(t){var n;this.j.cookielessTrackingEnabled?this.mn.setItem(vi,t):(this.yn.set(vi,t,di),null===(n=this.gn)||void 0===n||n.call(this,vi,t,di))},t.prototype.remove=function(){var t;this.j.cookielessTrackingEnabled?this.mn.removeItem(vi):(this.yn.delete(vi),null===(t=this.Sn)||void 0===t||t.call(this,vi))},t.isValidExclusionString=function(t){return wi.test(t)},t}(),yi="_cs_cvars",mi=function(){function t(t,n,i){this.j=t,this.yn=n,this.mn=i}return t.prototype.onCookieToSet=function(t){this.gn=t},t.prototype.onCookieToRemove=function(t){this.Sn=t},t.prototype.get=function(){return this.j.cookielessTrackingEnabled?this.mn.getItem(yi):this.yn.get(yi)},t.prototype.set=function(t){var n;this.j.cookielessTrackingEnabled?this.mn.setItem(yi,t):(this.yn.set(yi,t),null===(n=this.gn)||void 0===n||n.call(this,yi,t))},t.prototype.remove=function(){var t;this.j.cookielessTrackingEnabled?this.mn.removeItem(yi):(this.yn.delete(yi),null===(t=this.Sn)||void 0===t||t.call(this,yi))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}();!function(t){function n(t){var n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(t),(function(t){return csArray.prototype.indexOf.call(n,t)>=0}))}t.isRawDomainState=n,t.isValid=function(t){return!!n(t)&&((!t._cs_id||ei.isValidVisitorString(t._cs_id))&&(!t._cs_s||fi.isValidSessionString(t._cs_s))&&(!t._cs_ex||pi.isValidExclusionString(t._cs_ex))&&(!t._cs_cvars||mi.isValidCustomVarString(t._cs_cvars)))}}(li||(li={}));var gi=function(){function t(t,n){this._n=t,this.Pn=n}return t.prototype.retrieve=function(n,i){var r=this;this.xn=i,this.retrievedStates=[],this.Mn=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return r.Dn(t)})),t.getXdframeOrigin),this._n.onMessage((function(t){r.Ln(t)})),this._n.onTimeout((function(){r.Un()})),this._n.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.Mn,t.getXdframeUrl),(function(t){return r._n.open(t)}))},t.prototype.Ln=function(t){if(this.jn(t)){var n=t.data;if(!li.isValid(n))throw this._n.stop(),"Invalid domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin);csArray.prototype.push.call(this.retrievedStates,n)}this.qn()&&(this._n.stop(),this.xn(csArray.prototype.map.call(this.retrievedStates,ai.fromRaw)))},t.prototype.Un=function(){wn.warn("xdframe: all messages not received")},t.prototype.jn=function(t){return csArray.prototype.indexOf.call(this.Mn,t.origin)>-1},t.prototype.qn=function(){return this.retrievedStates.length===this.Mn.length},t.prototype.Dn=function(t){return!it(this.Pn.hostname,t)},t.getXdframeOrigin=function(t){return"https://csxd.".concat(t)},t.getXdframeUrl=function(t){return"".concat(t,"/xdframe-").concat("1.0.0",".html")},t}(),Si=function(){function t(){var t=this;this.Hn=3e3,this.Bn=function(n){t.handleMessage(n)}}return t.prototype.onMessage=function(t){this.Vn=t},t.prototype.onTimeout=function(t){this.hn=t},t.prototype.start=function(){var t=this;window.addEventListener("message",this.Bn),this.Fn=window.csSetTimeout((function(){t.hn()}),this.Hn)},t.prototype.open=function(t){var n=document.createElement("iframe");return n.src=t,n.setAttribute("hidden",""),n.setAttribute("title","Intentionally blank"),document.body.appendChild(n),n},t.prototype.stop=function(){window.removeEventListener("message",this.Bn),window.csClearTimeout(this.Fn),this.Vn=tt,this.hn=tt},t.prototype.handleMessage=function(t){this.Vn(t)},X([yn("XdframeMessage")],t.prototype,"handleMessage",null),t}(),bi=function(t,n){return bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},bi(t,n)};function Ai(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}bi(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var Ei=function(){return Ei=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Ei.apply(this,arguments)};function Ri(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function Ti(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}c((r=r.apply(t,n||[])).next())}))}function Oi(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(u=0)),u;)try{if(i=1,r&&(e=2&o[0]?r.return:o[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,o[1])).done)return e;switch(r=0,e&&(o=[2&o[0],e.value]),o[0]){case 0:case 1:e=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!e||o[1]>e[0]&&o[1]<e[3])){u.label=o[1];break}if(6===o[0]&&u.label<e[1]){u.label=e[1],e=o;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(o);break}e[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{i=e=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}Object.create;function Ni(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var ki,Ci,Ii;function _i(t,n){void 0===n&&(n=Mi.SHOW_ALL);var i=n|Mi.SHOW_ELEMENT,r=[document.createTreeWalker(t,i,null,!1)],e=Pi(t);e&&csArray.prototype.push.call(r,document.createTreeWalker(e,i,null,!1));var s=null;return{root:t,nextNode:function(){if(e){var t=e;return e=null,t}for(;r.length>0;){if(s){t=s;return s=null,t}var u=r[r.length-1].nextNode();if(u){var o=Pi(u);if(n&Mi.SHOW_DOCUMENT_FRAGMENT&&o&&(s=o),o&&csArray.prototype.push.call(r,document.createTreeWalker(o,i,null,!1)),Di[u.nodeType]&n)return u}else csArray.prototype.pop.call(r)}return null},visitAll:function(i){Di[t.nodeType]&n&&i(t);for(var r=this.nextNode();r;)Di[r.nodeType]&n?(i(r),r=this.nextNode()):r=this.nextNode()},collectAll:function(t){var n=[];return this.visitAll((function(i){return csArray.prototype.push.call(n,t?t(i):i)})),n}}}function Pi(t){return t&&T(t)?t.shadowRoot:null}var xi=null!==(Ci=Kt.Node)&&void 0!==Ci?Ci:{},Mi=null!==(Ii=Kt.NodeFilter)&&void 0!==Ii?Ii:{},Di=((ki={})[2]=Mi.SHOW_ATTRIBUTE,ki[4]=Mi.SHOW_CDATA_SECTION,ki[8]=Mi.SHOW_COMMENT,ki[11]=Mi.SHOW_DOCUMENT_FRAGMENT,ki[9]=Mi.SHOW_DOCUMENT,ki[10]=Mi.SHOW_DOCUMENT_TYPE,ki[1]=Mi.SHOW_ELEMENT,ki[xi.ENTITY_NODE]=Mi.SHOW_ENTITY,ki[xi.ENTITY_REFERENCE_NODE]=Mi.SHOW_ENTITY_REFERENCE,ki[xi.NOTATION_NODE]=Mi.SHOW_NOTATION,ki[7]=Mi.SHOW_PROCESSING_INSTRUCTION,ki[3]=Mi.SHOW_TEXT,ki);function Li(){var t=new Error,n=t.stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?Ui(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":Ui(n[0]))}function Ui(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var ji,qi=function(t){return t};function Hi(t){var n,i=t.target,r=t.methodName,e=t.hook,s=t.hookPrepareArgs,u=void 0===s?qi:s,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return pn.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var c,h,a=!1,f=i[r];if("function"==typeof f){var l=function(){var t=u(arguments),n=f.apply(this,arguments);if(a){var i=void 0;o&&o.withCallerName&&(i=Li());try{e({result:n,context:this,args:t,callerName:i})}catch(t){pn.error(t)}}return n};(c=l).prototype=(h=f).prototype,Object.defineProperty(c,"toString",{value:function(){return h.toString()}}),i[r]=l}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function Bi(t,n,i){var r=!1,e=Object.getOwnPropertyDescriptor(t,n);if(e){if(!e.configurable)return pn.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,{set:function(){var t=arguments,s=this[n],u=e.set.apply(this,t);if(r)try{i(this,t[0],s)}catch(t){pn.error(t)}return u}})}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&T(t)?t.shadowRoot:null},t.getAllShadowHosts=function(t){return _i(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll((function(t){return t.host}))}}(ji||(ji={}));var Vi=function(){function t(t){this.xn=t,this.xn=mn("DocumentShadowRootObserver:callback",(function(n,i){return t(n,i)}))}var n;return t.Gn=function(t){this.zn.forEach((function(n){t(n,"initial")}))},t.Jn=function(t){var n=this;if(csArray.prototype.push.call(this.$n,t),!this.Wn){this.Wn=!0,this.Xn.observe(document,this.Yn);for(var i=0,r=ji.getAllShadowHosts(document);i<r.length;i++){var e=r[i],s=csElementshadowRoot.apply(e);this.zn.add(s),this.Xn.observe(s,this.Yn)}this.Kn||(this.Kn=Hi({target:Element.prototype,methodName:"attachShadow",hook:function(t){return t.result.isConnected&&n.Zn(t.result)}})),this.Kn.activate()}this.Gn(t)},t.Qn=function(t){var n;this.$n=csArray.prototype.filter.call(this.$n,(function(n){return n!==t})),0===this.$n.length&&(this.$n=[],this.Wn=!1,this.Xn.disconnect(),null===(n=this.Kn)||void 0===n||n.deactivate(),this.zn.clear())},Object.defineProperty(t.prototype,"shadowRoots",{get:function(){return Xn(n.zn)},enumerable:!1,configurable:!0}),t.prototype.observe=function(){ji.isSupported()&&n.Jn(this.xn)},t.prototype.disconnect=function(){ji.isSupported()&&n.Qn(this.xn)},n=t,t.$n=[],t.zn=new Set,t.Wn=!1,t.Yn={childList:!0,subtree:!0},t.Xn=new csMutationObserver((function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i];e.target.isConnected&&Gn(e.addedNodes,n.ti),Gn(e.removedNodes,n.ni)}})),t.Zn=function(t){n.zn.has(t)||(n.Xn.observe(t,n.Yn),n.zn.add(t),Gn(n.$n,(function(n){return n(t,"added")})))},t.ti=function(t){_i(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(n.Zn)},t.ni=function(t){t.isConnected||_i(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll((function(t){n.zn.has(t)&&(n.zn.delete(t),Gn(n.$n,(function(n){return n(t,"removed")})))}))},Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),t}(),Fi=!0;function Gi(t,n){void 0===n&&(n=Fi),t.boundElement.addEventListener(t.type,t.listener,n)}function zi(t,n){void 0===n&&(n=Fi),t.boundElement.removeEventListener(t.type,t.listener,n)}function Ji(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}function $i(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var e=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=Ct();if(s-e>r)return e=s,t.apply(this,n)}}var s,u=[],o=null,c=0,h=function(){c=Ct(),o=null,s=t.apply(i,u)},a=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var a=Ct(),f=r-(a-c);return i=null!=this?this:window,u=Ni([],n,!0),f<=0||f>r?(c=a,s=t.apply(i,u),o?(window.csClearTimeout(o),o=null):u=[]):o||(o=window.csSetTimeout(h,f)),s};return a.cancel=function(){o&&(window.csClearTimeout(o),c=0,o=null,u=[])},a.flushPending=function(){o&&(window.csClearTimeout(o),h())},a}var Wi,Xi,Yi,Ki,Zi,Qi,tr=function(t){return function(n,i,r){r.value=$i(r.value,t)}};function nr(t){var n=csEventtarget.apply(t);return n&&f(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",t[t.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE",t[t.RESOURCE_HASHES=66]="RESOURCE_HASHES",t[t.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",t[t.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",t[t.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",t[t.TEXT_REF=73]="TEXT_REF",t[t.TOUCH_CANCEL=74]="TOUCH_CANCEL",t[t.MUTATION_MOVE=75]="MUTATION_MOVE",t[t.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",t[t.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",t[t.DEBUG=999]="DEBUG"}(Wi||(Wi={})),function(t){t[t.RECORDING_CONSENT_FOR_SESSION_GRANTED=1]="RECORDING_CONSENT_FOR_SESSION_GRANTED",t[t.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN=2]="RECORDING_CONSENT_FOR_SESSION_WITHDRAWN"}(Xi||(Xi={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(Yi||(Yi={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(Ki||(Ki={})),function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(Zi||(Zi={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(Qi||(Qi={}));var ir,rr=!!window.chrome,er="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(Bt(t)&&function(t){try{if(Bt(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&Ft(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(er))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(er,"]"))}}(ir||(ir={}));var sr,ur,or=(sr=csSymbol.for("propStore"),{getStore:function(t){return t[sr]},get:function(t,n){var i=t[sr];return null==i?void 0:i[n]},set:function(t,n,i){var r=t[sr];r||(r={},t[sr]=r),r[n]=i}});!function(t){function n(t,i,r){var e=!1;if(r(t,i,(function(){return e=!0})),!e){var s=t.shadowRoot;s&&n(s,t,r);var u=t.children;if(null==u?void 0:u.length)for(var o=0,c=u;o<c.length;o++){var h=c[o];if(h&&(n(h,t,r),e))break}}}t.setProperty=function(t,n,i){var r;t instanceof Node?or.set(t,n,i):(null!==(r=t.props)&&void 0!==r||(t.props={}),t.props[n]=i)},t.getProperty=function(t,n){var i;return t instanceof Node?or.get(t,n):null===(i=t.props)||void 0===i?void 0:i[n]},t.getProperties=function(t){return t instanceof Node?or.getStore(t):t.props},t.traverse=function(t,i){n(t,void 0,i)}}(ur||(ur={}));var cr=1,hr=csSymbol("nodeIdentifier");function ar(t){var n=ur.getProperty(t,hr);return null!=n?n:(ur.setProperty(t,hr,cr++),ur.getProperty(t,hr))}var fr=function(t,n){return fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},fr(t,n)};function lr(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}fr(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var vr=function(){return vr=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},vr.apply(this,arguments)};function dr(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function wr(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{c(r.next(t))}catch(t){s(t)}}function o(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}c((r=r.apply(t,n||[])).next())}))}function pr(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){u.label=s[1];break}if(6===s[0]&&u.label<e[1]){u.label=e[1],e=s;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(s);break}e[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(t,u)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}Object.create;function yr(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}var mr;Object.create;var gr,Sr=null!==(mr=Kt.Element)&&void 0!==mr?mr:{prototype:{}},br=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,Ar=Sr.prototype.closest,Er=document.createElement("div");function Rr(t){if(!(!!t&&jt(t)))return pn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return br.call(Er,t),!0}catch(n){return pn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}function Tr(t,n){if(Ar)return Ar.call(t,n);var i=t;do{if(br.call(i,n))return i;i=null==i?void 0:i.parentElement}while(null!==i&&1===i.nodeType);return null}!function(t){var n;!function(t){t[t.NotSensitive=0]="NotSensitive",t[t.Parent=1]="Parent",t[t.Child=2]="Child"}(n=t.SensitiveState||(t.SensitiveState={})),t.sensitiveProp="sensitive",t.sensitiveAttributeProp="sensitiveAttribute",t.isSelectorUserInput=function(t){return!!(qt(t)&&"Attributes"in t&&"PIISelectors"in t)&&(t.Attributes instanceof Array&&t.PIISelectors instanceof Array)},t.sanitizeSelectorUserInput=function(t){return"Attributes"in t||(t.Attributes=[]),"PIISelectors"in t||(t.PIISelectors=[]),t},t.getSensitiveDetails=function(i){var r;return null!==(r=ur.getProperty(i,t.sensitiveProp))&&void 0!==r?r:{state:n.NotSensitive}},t.getAttributeSensitiveDetails=function(n){var i;return null!==(i=ur.getProperty(n,t.sensitiveAttributeProp))&&void 0!==i?i:{attributes:[]}},t.isSensitive=function(i){var r=ur.getProperty(i,t.sensitiveProp);return(null==r?void 0:r.state)===n.Parent},t.isSensitiveChild=function(i){var r=ur.getProperty(i,t.sensitiveProp);return(null==r?void 0:r.state)===n.Child},t.isSensitiveAttribute=function(n,i){var r=ur.getProperty(n,t.sensitiveAttributeProp);return(null==(null==r?void 0:r.attributes)?void 0:csArray.prototype.indexOf.call(null==r?void 0:r.attributes,i))>-1},t.setSensitiveProperty=function(n,i){ur.setProperty(n,t.sensitiveProp,i)},t.unsetSensitiveProperty=function(n){ur.setProperty(n,t.sensitiveProp,void 0)},t.setSensitiveAttributeProperty=function(n,i){ur.setProperty(n,t.sensitiveAttributeProp,i)},t.getComputedSelectorSettings=function(t,n){var i,r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return Rr(t)}));n.elementSelector.length>0&&(i=csArray.prototype.push).call.apply(i,yr([r],csString.prototype.split.call(n.elementSelector,","),!1));var e,s,u=function(t){if(t.length<=1)return t;for(var n=[],i=0,r=t;i<r.length;i++)for(var e=r[i],s=0,u=csString.prototype.split.call(e,",");s<u.length;s++){var o=u[s];-1===csArray.prototype.indexOf.call(n,o)&&csArray.prototype.push.call(n,o)}return n}(yr([],r,!0)),o={elementSelector:csArray.prototype.join.call(u,","),attrSelector:n.attrSelector,attrSelectors:n.attrSelectors};return csArray.prototype.forEach.call(t.Attributes,(function(t){(null==t?void 0:t.attrName)&&(null==t?void 0:t.selector)&&Rr(t.selector)&&!function(t,n){return csArray.prototype.some.call(t,(function(t){return t.selector===n.selector&&t.attrName===n.attrName}))}(o.attrSelectors,t)&&csArray.prototype.push.call(o.attrSelectors,t)})),o.attrSelector=(e=o.attrSelectors,s="",csArray.prototype.forEach.call(e,(function(t){var n=csString.prototype.split.call(t.selector,",");csArray.prototype.forEach.call(n,(function(t){Rr(t)&&(s&&(s+=","),s+=t)}))})),s),o}}(gr||(gr={}));var Or,Nr=function(){function t(){var t=this;this.ii=[],this.ei=[{type:"pointerup",listener:function(n){return t.pointerUpListener(n)},boundElement:document},{type:"pointermove",listener:function(n){return t.pointerMoveListener(n)},boundElement:document},{type:"pointerdown",listener:function(n){return t.pointerDownListener(n)},boundElement:document}],this.si=[{type:"touchstart",listener:function(n){return t.touchStartListener(n)},boundElement:document},{type:"touchmove",listener:function(n){return t.touchMoveListener(n)},boundElement:document},{type:"touchend",listener:function(n){return t.touchEndCancelListener(n)},boundElement:document},{type:"touchcancel",listener:function(n){return t.touchEndCancelListener(n)},boundElement:document}],this.ui=[{type:"click",listener:function(n){return t.clickListener(n)},boundElement:document},{type:"keyup",listener:function(n){return t.keyUpListener(n)},boundElement:document},{type:"keydown",listener:function(n){return t.keyDownListener(n)},boundElement:document},{type:"copy",listener:function(n){return t.copyListener(n)},boundElement:document},{type:"cut",listener:function(n){return t.cutListener(n)},boundElement:document},{type:"paste",listener:function(n){return t.pasteListener(n)},boundElement:document},{type:"scroll",listener:function(n){return t.scrollListener(csEventtarget.apply(n))},boundElement:document},{type:"mouseover",listener:function(n){return t.mouseOverListener(n)},boundElement:document}],this.oi=[{type:"scroll",listener:function(n){return t.scrollListener(csEventtarget.apply(n))}}];var n=function(t){if(!jt(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===n||n&&n>=16)&&csArray.prototype.push.call(this.oi,{type:"mouseover",listener:function(n){return t.mouseOverListener(n)}}),this.ci=new Vi((function(n,i){switch(i){case"initial":case"added":t.hi(n);break;case"removed":t.ai(n)}}))}return t.prototype.init=function(){this.fi(),this.li(),this.wi()},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.ii,t)},t.prototype.pi=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.ii,(function(i){return i(t,n)}))},t.prototype.start=function(){this.yi(),this.hi(document),this.ci.observe()},t.prototype.stop=function(){this.ai(document),this.ci.disconnect()},t.prototype.li=function(){var t;this.mi()&&(t=csArray.prototype.push).call.apply(t,Z([this.ui],this.ei,!1))},t.prototype.fi=function(){var t;this.gi()&&(t=csArray.prototype.push).call.apply(t,Z([this.ui],this.si,!1))},t.prototype.hi=function(t){E(t)?csArray.prototype.forEach.call(this.ui,(function(t){return Gi(t)})):csArray.prototype.forEach.call(this.oi,(function(n){Gi({type:n.type,listener:n.listener,boundElement:t})}))},t.prototype.ai=function(t){E(t)?csArray.prototype.forEach.call(this.ui,(function(t){return zi(t)})):csArray.prototype.forEach.call(this.oi,(function(n){zi({type:n.type,listener:n.listener,boundElement:t})}))},t.prototype.mi=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.gi=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype.yi=function(){this.Si()},t.prototype.Si=function(){var t=ir.getScrollContainer()||document,n=ar(t),i=this.bi(t);if(0!==i.top||0!==i.left){var r={type:Wi.SCROLL,args:[n,i.left,i.top],date:Ct()};this.pi(r,!0)}},t.prototype.bi=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!gr.isSensitive(t)&&!gr.isSensitiveChild(t)){var n=ar(t),i=this.bi(t),r={type:Wi.SCROLL,args:[n,i.left,i.top],date:Ct()};this.pi(r)}},t.prototype.mouseOverListener=function(t){if(!gr.isSensitiveChild(t.target)){var n=ar(t.target),i={type:Wi.MOUSE_OVER,args:[n],date:Ct()};this.pi(i)}},t.prototype.clickListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r={type:Wi.CLICK,args:[i],date:Ct()};this.pi(r)}},t.prototype.keyUpListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r=this.Ai[t.key];if(void 0!==r){var e={type:Wi.KEY_UP,args:[i,r],date:Ct()};this.pi(e)}}},t.prototype.keyDownListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r=this.Ai[t.key];if(void 0!==r){var e={type:Wi.KEY_DOWN,args:[i,r],date:Ct()};this.pi(e)}}},t.prototype.copyListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r={type:Wi.CLIPBOARD_COMMAND,args:[i,Qi.COPY],date:Ct()};this.pi(r)}},t.prototype.cutListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r={type:Wi.CLIPBOARD_COMMAND,args:[i,Qi.CUT],date:Ct()};this.pi(r)}},t.prototype.pasteListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r={type:Wi.CLIPBOARD_COMMAND,args:[i,Qi.PASTE],date:Ct()};this.pi(r)}},t.prototype.pointerUpListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r={type:Wi.POINTER_UP,args:[t.pointerId,t.pointerType,Ji(t.clientX,1),Ji(t.clientY,1),i,t.button],date:Ct()};this.pi(r)}},t.prototype.pointerMoveListener=function(t){var n={type:Wi.POINTER_MOVE,args:[t.pointerId,t.pointerType,Ji(t.clientX,1),Ji(t.clientY,1)],date:Ct()};this.pi(n)},t.prototype.pointerDownListener=function(t){var n=nr(t);if(!gr.isSensitiveChild(n)){var i=ar(n),r={type:Wi.POINTER_DOWN,args:[t.pointerId,t.pointerType,Ji(t.clientX,1),Ji(t.clientY,1),i,t.button,{pageX:Ji(t.pageX,1),pageY:Ji(t.pageY,1)}],date:Ct()};this.pi(r)}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:Wi.TOUCH_START,args:[r.identifier,Ji(r.clientX,1),Ji(r.clientY,1)],date:Ct()};this.pi(e)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:Wi.TOUCH_MOVE,args:[r.identifier,Ji(r.clientX,1),Ji(r.clientY,1)],date:Ct()};this.pi(e)}},t.prototype.touchEndCancelListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:"touchend"===t.type?Wi.TOUCH_END:Wi.TOUCH_CANCEL,args:[r.identifier,Ji(r.clientX,1),Ji(r.clientY,1)],date:Ct()};this.pi(e)}},t.prototype.wi=function(){this.Ai={},this.Ai[" "]=Zi.SPACE,this.Ai.Spacebar=Zi.SPACE,this.Ai.Backspace=Zi.BACKSPACE,this.Ai.Enter=Zi.ENTER,this.Ai.Delete=Zi.DELETE,this.Ai.ArrowUp=Zi.ARROWUP,this.Ai.ArrowDown=Zi.ARROWDOWN,this.Ai.ArrowLeft=Zi.ARROWLEFT,this.Ai.ArrowRight=Zi.ARROWRIGHT,this.Ai.Up=Zi.ARROWUP,this.Ai.Down=Zi.ARROWDOWN,this.Ai.Left=Zi.ARROWLEFT,this.Ai.Right=Zi.ARROWRIGHT,this.Ai.CapsLock=Zi.CAPSLOCK,this.Ai.Shift=Zi.SHIFT,this.Ai.Tab=Zi.TAB,this.Ai.Escape=Zi.ESCAPE,this.Ai.Esc=Zi.ESCAPE,this.Ai.End=Zi.END,this.Ai.Alt=Zi.ALT,this.Ai.Control=Zi.CTRL,this.Ai.Meta=Zi.META},X([Pn("RecordingPageEvents.start")],t.prototype,"start",null),X([yn("scroll")],t.prototype,"scrollListener",null),X([yn("mouseOver"),Sn(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(nr(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),X([yn("click"),Sn()],t.prototype,"clickListener",null),X([yn("Event handler type: keyup")],t.prototype,"keyUpListener",null),X([yn("Event handler type: keydown")],t.prototype,"keyDownListener",null),X([yn("Event handler type: copy")],t.prototype,"copyListener",null),X([yn("Event handler type: cut")],t.prototype,"cutListener",null),X([yn("Event handler type: paste")],t.prototype,"pasteListener",null),X([yn("Event handler type: pointerup"),Sn()],t.prototype,"pointerUpListener",null),X([yn("Event handler type: pointermove"),Sn(),tr({wait:33,ignoreThrottledCalls:!1})],t.prototype,"pointerMoveListener",null),X([yn("Event handler type: pointerdown"),Sn()],t.prototype,"pointerDownListener",null),X([yn("Event handler type: touchstart"),Sn()],t.prototype,"touchStartListener",null),X([yn("Event handler type: touchmove"),Sn()],t.prototype,"touchMoveListener",null),X([yn("Event handler type: touchend-cancel"),Sn()],t.prototype,"touchEndCancelListener",null),t}(),kr=function(){function t(t){this.Ei=t,this.Ri=0}return t.prototype.addString=function(t){this.Ri+=2*t.length},t.prototype.addArrayBuffer=function(t){this.Ri+=t.byteLength},t.prototype.isThresholdReached=function(){return this.Ri>this.Ei},t.prototype.reset=function(){this.Ri=0},t}(),Cr=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.Ti=t,this.Oi=new kr(n)}return t.prototype.addEvent=function(t){this.Oi.addString(ct(t)),csArray.prototype.push.call(this.Ti,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.Ti.length;n+=1){if(this.Ti[n].date>=t.date)break}csArray.prototype.splice.call(this.Ti,n,0,t)},t.prototype.eventsCount=function(){return this.Ti.length},t.prototype.clearEvents=function(){this.Oi.reset(),this.Ti=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.Oi.isThresholdReached()},t.prototype.getEvents=function(){return this.Ti},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.Ti,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.Ti=r,i},t.prototype.stringifyEvents=function(){return ct(this.Ti)},t.prototype.Ni=function(t){t.type===Wi.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)},X([Pn("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),Ir=function(){function t(){this.ki=1}return t.prototype.getCurrentIndex=function(){return this.ki},t.prototype.increment=function(){this.ki+=1},t.prototype.reset=function(){this.ki=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.ki)}},t}(),_r=function(){function t(){}return t.prototype.emit=function(n,i,r,e){void 0===e&&(e=document);var s="".concat(void 0!==r?r:t.Ci),u="".concat(s).concat(n),o=t.createEvent(u,{detail:i});null!==o&&e.dispatchEvent(o)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.Ii();if(null===i)return null;var r=n.bubbles,e=void 0!==r&&r,s=n.cancelable,u=void 0!==s&&s,o=n.detail;return i.initCustomEvent(t,e,u,o),i},t.Ii=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.Ci="cs.tracking.",t}(),Pr=function(){function t(){this._isStarted=!1}return Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!1,configurable:!0}),t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._isStarted||(this._isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this._isStarted&&(this._isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}();!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",t.PagehideHidden="pagehideHidden",t.ExitPageByNavigate="exitPageByNavigate"}(Or||(Or={}));var xr,Mr=function(){function t(){var t=this;this._i=!1,this.Pi=function(n){try{switch(n.type){case"visibilitychange":if("hidden"===document.visibilityState)return t.xi(Or.Hidden);break;case"pagehide":return"hidden"===document.visibilityState?t.xi(Or.PagehideHidden):t.xi(Or.PagehideVisible);case"blur":return t.xi(Or.Blur);case"navigate":return t.Mi(n)?t.xi(Or.ExitPageByNavigate):void 0;default:return}}catch(t){}}}return t.prototype.start=function(){this._i||(this._i=!0,this.Di(),this.Li(),this.Ui(),Pt()&&this.ji())},t.prototype.stop=function(){this._i&&(this._i=!1,this.qi(),this.Hi(),this.Bi(),Pt()&&this.Vi())},t.prototype.onEvent=function(t){this.xi=t},t.prototype.ji=function(){window.navigation.addEventListener("navigate",this.Pi)},t.prototype.Vi=function(){window.navigation.removeEventListener("navigate",this.Pi)},t.prototype.Di=function(){document.addEventListener("visibilitychange",this.Pi)},t.prototype.qi=function(){document.removeEventListener("visibilitychange",this.Pi)},t.prototype.Li=function(){window.addEventListener("pagehide",this.Pi)},t.prototype.Hi=function(){window.removeEventListener("pagehide",this.Pi)},t.prototype.Ui=function(){window.addEventListener("blur",this.Pi)},t.prototype.Bi=function(){window.removeEventListener("blur",this.Pi)},t.prototype.Mi=function(t){return t instanceof NavigateEvent!=!1&&(!t.hashChange&&!t.downloadRequest&&!t.formData)},t}(),Dr="null",Lr=null,Ur=[];function jr(t){null==Lr||Lr.postMessage(t)}!!(null===(xr=document.body)||void 0===xr?void 0:xr.getAttribute("data-cs-tag-extension"))&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Lr=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",(function(t){jr({type:"UXA_EVENT",event:t.detail})})),Lr.addEventListener("message",(function(t){if("CONNECT"===t.data.type){if(t.data.sessionId===Dr)return;Dr=t.data.sessionId,csArray.prototype.forEach.call(Ur,(function(t){return t()})),null==Lr||Lr.postMessage({type:"CONNECTED",sessionId:Dr})}})));var qr,Hr,Br=function(t,n){void 0===n&&(n=""),this.name=t,this.format=n},Vr=function(t){function n(n){var i=t.call(this,n,"Value: {count}")||this;return i.count=0,i}return Ai(n,t),n.prototype.increase=function(t){void 0===t&&(t=1),this.count+=t},n.prototype.decrease=function(){this.count>0&&this.count--},n.prototype.clear=function(){this.count=0},n.prototype.getData=function(){return{count:this.count}},n}(Br),Fr=function(t){function n(n){var i=t.call(this,n,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}")||this;return i.added=0,i.removed=0,i}return Ai(n,t),Object.defineProperty(n.prototype,"value",{get:function(){return this.added-this.removed},enumerable:!1,configurable:!0}),n.prototype.increase=function(){this.added++},n.prototype.decrease=function(){this.removed++},n.prototype.getData=function(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}},n}(Br),Gr=function(t){function n(n){var i=t.call(this,n,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms")||this;return i.total=0,i.count=0,i}return Ai(n,t),Object.defineProperty(n.prototype,"average",{get:function(){return this.count?this.total/this.count:0},enumerable:!1,configurable:!0}),n.prototype.measure=function(t){var n=Ct();t(),this.count++,this.total+=Ct()-n},n.prototype.asyncMeasure=function(){var t=this,n=csDate.now();return function(){t.count++,t.total+=csDate.now()-n}},n.prototype.getData=function(){return{total:this.total,count:this.count,average:this.average}},n}(Br),zr={general:{category:"General",nbEvents:new Vr("Nb of Events"),pendingTasks:new Vr("Pending Tasks"),nbOfMutationObservers:new Fr("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new Gr("Initial DOM"),pendingMutations:new Vr("Nb of Mutations scheduled"),serializedMutations:new Gr("Serialized Mutations"),count:new Vr("Mutation Count"),elementMutationObserved:new Fr("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Gr("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Vr("Nb of Hidden Elements "),nbElements:new Vr("Nb of  Elements")}};qr=function(){var t=function(t){return Object.keys(t)},n=csArray.prototype.map.call(t(zr),(function(t){return zr[t]})),i=csArray.prototype.map.call(n,(function(n){return csArray.prototype.map.call(csArray.prototype.filter.call(t(n),(function(t){return"category"!==t})),(function(t){return n[t]}))})),r=csArray.prototype.map.call(n,(function(t,n){return{category:t.category,performanceCounters:csArray.prototype.map.call(i[n],(function(t){return{name:t.name,format:t.format}}))}}));jr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:r}),setInterval((function(){var t=Fn(Vn(i,(function(t){return Vn(t,(function(t){return t.getData()}))})),(function(t){return t}));jr({type:"UXA_PERFORMANCE_COUNTER",event:t})}),1e3)},null!==Dr&&qr(),csArray.prototype.push.call(Ur,qr),function(t){t[t.Active=0]="Active",t[t.Paused=1]="Paused",t[t.Stopped=2]="Stopped"}(Hr||(Hr={}));var Jr=function(){function t(t,n,i){void 0===i&&(i=[]);this.Fi=t,this.Gi=n,this.zi=i,this.Ji=null,this.$i=Hr.Active,this.Wi=[]}return t.prototype.reset=function(){this.Ji=null,this.Wi=[],this.$i=Hr.Active},t.prototype.disconnect=function(){this.$i=Hr.Stopped},t.prototype.Xi=function(){var n=this;this.Gi(Hr.Paused),this.$i=Hr.Paused,csSetTimeout((function(){n.$i===Hr.Paused&&n.Yi()}),t.STOP_TIMEOUT)},t.prototype.Ki=function(){this.Gi(Hr.Active),this.$i=Hr.Active,Gn(this.Wi,this.Fi),this.Wi=[]},t.prototype.Yi=function(){this.Wi=[],this.Gi(Hr.Stopped),this.$i=Hr.Stopped},t.prototype.pushEvent=function(t,n){if(n.isUserEvent&&(this.Ji=t.date,this.$i!==Hr.Active))return this.Ki(),void this.Fi(t);if(this.Zi(t))this.Fi(t);else switch(this.$i){case Hr.Active:if(this.Qi(t,n))return this.Xi(),void csArray.prototype.push.call(this.Wi,t);this.Fi(t);break;case Hr.Paused:csArray.prototype.push.call(this.Wi,t);case Hr.Stopped:}},t.prototype.Qi=function(n,i){return!i.isUserEvent&&null!==this.Ji&&n.date-this.Ji>t.INACTIVITY_TIMEOUT},t.prototype.Zi=function(t){return csArray.prototype.indexOf.call(this.zi,t.type)>-1},t.INACTIVITY_TIMEOUT=5e3,t.STOP_TIMEOUT=5e3,t}();function $r(){var t=new Set;return{add:function(n){t.add(n),1===t.size&&csSetTimeout((function(){t.clear()}))},has:function(n){return t.has(n)},del:function(n){t.delete(n)},clear:function(){t.clear()},values:function(){return Xn(t)},get count(){return t.size}}}function Wr(t){var n=$r();return{push:function(i){0===n.count&&csSetTimeout((function(){t(n.values())})),n.add(i)}}}var Xr,Yr={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Kr=function(){function t(t,n){this.xn=t,this.tr=n,this.xn=mn("DocumentMutationObserver:callback",(function(n,i){return t(n,i)}))}var n;return t.observe=function(t,n){var i=this;csArray.prototype.push.call(this.callbacks,t),n&&csArray.prototype.push.call(this.shadowRootCallbacks,n),this.started?n&&csArray.prototype.forEach.call(ji.getAllShadowHosts(document),(function(t){return n(csElementshadowRoot.apply(t),"initial")})):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.mutationObserver.observe(document,Yr),this.shadowRootObserver=new Vi(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,Gn(this.shadowRootObserver.shadowRoots,(function(t){return i.mutationObserver.observe(t,Yr)})))},t.disconnect=function(t,n){var i,r;this.callbacks=csArray.prototype.filter.call(this.callbacks,(function(n){return n!==t})),n&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,(function(t){return t!==n}))),0===this.callbacks.length&&(this.callbacks=[],this.shadowRootCallbacks=[],null===(i=this.shadowRootObserver)||void 0===i||i.disconnect(),null===(r=this.mutationObserver)||void 0===r||r.disconnect(),this.started=!1)},Object.defineProperty(t.prototype,"shadowRoots",{get:function(){var t,i;return null!==(i=null===(t=n.shadowRootObserver)||void 0===t?void 0:t.shadowRoots)&&void 0!==i?i:[]},enumerable:!1,configurable:!0}),t.prototype.observe=function(){n.observe(this.xn,this.tr)},t.prototype.disconnect=function(){n.disconnect(this.xn,this.tr)},t.prototype.processPendingMutations=function(){var t,i=null===(t=n.mutationObserver)||void 0===t?void 0:t.takeRecords();(null==i?void 0:i.length)&&n.mutationCallback(i)},n=t,t.callbacks=[],t.shadowRootCallbacks=[],t.started=!1,t.mutationCallback=function(t){zr.mutations.count.increase(t.length),csArray.prototype.forEach.call(n.callbacks,(function(i){return i(t,n.mutationObserver)}))},t.onShadowRoot=function(t,i){Gn(n.shadowRootCallbacks,(function(n){return n(t,i)})),"removed"!==i&&n.mutationObserver.observe(t,Yr)},Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),t}(),Zr=function(){function t(t,n){void 0===n&&(n={closest:!1});var i=this;this.xn=t,this.nr=n,this.ir="",this.rr=$r(),this.er=function(t){if(""!==i.ir){for(var n=[],r=0,e=Fn(t,(function(t){return t.addedNodes}));r<e.length;r++){var s=e[r];if(A(s)||i.nr.closest&&l(s))Wn(i.nr.closest?i.ur(s,i.ir):i.cr(s,i.ir),n)}n.length&&i.xn(n,"added")}},this.hr=new Kr(this.er)}return Object.defineProperty(t.prototype,"selectors",{get:function(){return""===this.ir?null:this.ir},enumerable:!1,configurable:!0}),t.prototype.observe=function(t){var n=this;""===this.ir?this.hr.observe():this.ir+=",",this.ir+=t;var i=this.cr(document,t);i.length&&(Gn(i,(function(t){n.rr.add(t)})),this.xn(i,"initial"))},t.prototype.processPendingMutations=function(){this.hr.processPendingMutations()},t.prototype.disconnect=function(){this.hr.disconnect(),this.rr.clear(),this.ir=""},t.prototype.ur=function(t,n){var i=this,r=[];if(l(t)){var e;if(t.parentElement)(e=Tr(t.parentElement,n))&&csArray.prototype.push.call(r,e);return csArray.prototype.filter.call(r,(function(t){return!1===i.rr.has(t)}))}return Ft(t)&&(e=Tr(t,n))?(csArray.prototype.push.call(r,e),csArray.prototype.filter.call(r,(function(t){return!1===i.rr.has(t)}))):this.cr(t,n)},t.prototype.cr=function(t,n){var i=this,r=Fn(ji.getAllShadowHosts(t),(function(t){return window.csquerySelectorAll[t.shadowRoot.nodeType].call(t.shadowRoot,n)}));return Wn(window.csquerySelectorAll[t.nodeType].call(t,n),r),f(t)&&br.call(t,n)&&csArray.prototype.push.call(r,t),csArray.prototype.filter.call(r,(function(t){return!1===i.rr.has(t)}))},Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),t}();function Qr(t){return xt(t,"data:")}function te(t){return xt(t,"#")}function ne(t){return!!t&&Mt(t,".css")}function ie(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),e=r[0],s=r[1];return s?(Mt(e,",")||(s=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(s)),Ni([re(e)],ie(s),!0)):[re(e)]}function re(t){return csString.prototype.split.call(t,/,$/)[0]}!function(t){var n,i;t.ANONYMIZATION_STATUS_PROP="anonymizationStatus",t.CS_CAPTURE_ATTRIBUTE="data-cs-capture",t.ANONMIZATION_WHITELISTED_STATUS="whitelisted",t.start=function(){new Zr((function(n){return function(n){Gn(n,(function(n){_i(n).visitAll((function(n){return function(n){ur.setProperty(n,t.ANONYMIZATION_STATUS_PROP,t.ANONMIZATION_WHITELISTED_STATUS)}(n)}))}))}(n)})).observe("".concat(i))},t.stop=function(){n},t.setWhitelistedElementsSelector=function(t){i=t},t.getWhitelistedElementsSelector=function(){return i},t.isWhitelisted=function(n){return ur.getProperty(n,t.ANONYMIZATION_STATUS_PROP)===t.ANONMIZATION_WHITELISTED_STATUS||function(n){if(n instanceof Node)return f(n)&&n.hasAttribute(t.CS_CAPTURE_ATTRIBUTE);return n.attributes&&csArray.prototype.some.call(n.attributes,(function(n){return n.name===t.CS_CAPTURE_ATTRIBUTE}))}(n)}}(Xr||(Xr={}));var ee=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function se(t,n){var i=csString.prototype.replace.call(t,ee,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r,e,s=t[3]||t[4],u=t[9]||t[10]||t[11],o=(r=(s||u).trim(),e=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,csString.prototype.replace.call(r,e,(function(t,n,i,r){if("\\"===n)return csString.prototype.slice.call(t,1);if(r)return r;var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"�":csString.fromCodePoint(e)}))),c=s?"@import ":"",h=n(o)||o;return"".concat(c,"url(").concat(function(t){if(-1===csString.prototype.indexOf.call(t,'"'))return'"'.concat(t,'"');if(-1===csString.prototype.indexOf.call(t,"'"))return"'".concat(t,"'");return t}(h),")")}));return i}function ue(t){var n=new Set;return se(t,(function(t){var i,r;return n.add(null!==(r=null===(i=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))||void 0===i?void 0:i[1])&&void 0!==r?r:t),t})),Xn(n)}var oe,ce,he,ae=new Map,fe=!Yt&&document.implementation.createHTMLDocument("");function le(t){if(!p(t))return null;var n=ve(t);if(null===n||0===n.length)return null;var i="";if(function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}(t.textContent))Gn(n,(function(t){return i+=t.cssText}));else{var r=function(t){if(!fe)return 0;var n=ae.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,fe.head.appendChild(i);var r=ve(i);return n=r?r.length:0,ae.set(t.textContent,n),fe.head.removeChild(i),n}(t);if(r===n.length)return null;for(var e=new csArray(n.length-r),s=r,u=0;s<n.length;s+=1,u+=1)e[u]=n[s];Gn(e,(function(t){return i+=t.cssText}))}return i}function ve(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}}var de=null!==(oe=Kt.Element)&&void 0!==oe?oe:{prototype:{}},we=null!==(ce=Kt.Node)&&void 0!==ce?ce:{prototype:{}},pe=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},ye=null!==(he=pe(de))&&void 0!==he?he:pe(we),me=function(t){return ye.get.call(t)},ge=function(t){this.csId=ar(t),this.props=or.getStore(t)},Se=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=3,i.data=n.data,i}return lr(n,t),n}(ge),be=function(t){function n(n){var i,r=t.call(this,n)||this;r.attributes=[],r.nodeType=1,r.localName=me(n),r.namespaceURI=null!==(i=n.namespaceURI)&&void 0!==i?i:void 0,r.children=[];var e=le(n);if(e){r.children=new csArray(csNodechildNodes.apply(n).length);var s=document.createTextNode(e),u=new Se(s);csArray.prototype.push.call(r.children,u)}return S(n)&&ur.setProperty(r,"SVG",!0),r}return lr(n,t),n.isElement=function(t){return 1===t.nodeType},n.getAttribute=function(t,n){return zn(t.attributes,(function(t){return t.name===n}))},n.getAttributeValue=function(t,n){var i;return null===(i=this.getAttribute(t,n))||void 0===i?void 0:i.value},n}(ge),Ae=function(){function t(t){var n=this;this.type="asyncEvent",this.ar=!1,t&&t((function(t){return n.resolve(t)}))}return t.prototype.resolve=function(t){if(this.ar)throw new Error("AsyncEvent already resolve.");null==t.timestamp&&(t=vr(vr({},t),{timestamp:this.timestamp})),this.lr=t,this.ar=!0,this.xn&&this.xn(this.lr)},t.prototype.complete=function(t){this.ar&&t(this.lr),this.xn=t},t.prototype.wait=function(){var t=this;return new Promise((function(n){return t.complete(n)}))},t}();var Ee,Re,Te=(Ee="queueMicrotask",Re=csSetTimeout,void 0!==Kt[Ee]?Kt[Ee]:Re);"object"==typeof window&&Vt(window.csQueueMicrotask)&&(Te=window.csQueueMicrotask);var Oe=new bn,Ne=new bn,ke=1;function Ce(t,n){void 0===n&&(n="high");var i=ke;Oe.isEmpty&&Ne.isEmpty&&Ie((function(){if(ke===i){var t=function(){for(;!Ne.isEmpty;){Ne.pop()()}for(;!Oe.isEmpty;){Oe.pop()()}Ne.isEmpty||t()};t()}}));var r=t.name||t.toString(),e=mn("groupMicrotask:".concat(n,":").concat(r),t);"high"===n?Ne.push(e):Oe.push(e)}function Ie(t,n){void 0===n&&(n=10),Te(0===n?t:function(){return Ie(t,n-1)})}function _e(t){return void 0===t&&(t=1),Ti(this,void 0,void 0,(function(){var n;return Oi(this,(function(i){switch(i.label){case 0:n=0,i.label=1;case 1:return n<t?[4,new Promise((function(t){return Ce(t)}))]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}var Pe,xe;!function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function e(){return window.innerWidth}function s(){var t=window.csScreen.width;return Ut(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return Ut(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=e,t.screenWidth=s,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(e()),wh:"".concat(r()),sw:"".concat(s()),sh:"".concat(u())}}}(Pe||(Pe={}));var Me,De=null!==(xe=Kt.Node)&&void 0!==xe?xe:Object;!function(t){var n="isConnected"in De.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(n,i,r){void 0===r&&(r=!1);var e=function(n){if(!0===i(n))return n;for(var r=t.getRootNode(n),e=n;(null==e?void 0:e.parentElement)&&e.parentElement!==r;){if(!0===i(e.parentElement))return n;e=e.parentElement}return!0===i(r)?n:null};if(r){for(var s=n;s;){var u=e(s);if(u)return u;var o=t.getRootNode(s);if(!R(o))break;s=o.host}return null}return e(n)}function r(n){var i;return n.parentElement?n.parentElement:t.getRootNode(n)?null===(i=t.getRootNode(n))||void 0===i?void 0:i.host:null}function e(t){var n,i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return pn.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof De," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var e,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||("transparent"===(e=s.color)||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(e)))}function s(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return u(document,i,r)}function u(n,i,r){var e=n.elementFromPoint(i,r);if(!e)return null;var s=ji.getShadowRoot(e);return s&&s!=t.getRootNode(document.body)&&s!==n?u(s,i,r):e}function o(t){var n=s(t);return null!==n&&(t===n||t.contains(n))}t.forEachChild=function(t,n){for(var i=t;i;i=csNodenextSibling.apply(i))n(t)},t.isConnected=function(t){return n(t)},t.getAncestors=function(t,n){var r=[];return i(t,(function(t){return csArray.prototype.push.call(r,t),!1}),n),r},t.findAncestor=i,t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var e=t.getParentElement(i);return!(!e||e===i)&&n(e,r)},t.getParentElement=r,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=Bn(window.csquerySelectorAll[n.nodeType].call(n,t)),e=0,s=ji.getAllShadowHosts(n);e<s.length;e++){var u=s[e],o=ji.getShadowRoot(u);if(o){var c=Bn(window.csquerySelectorAll[o.nodeType].call(o,t));(i=csArray.prototype.push).call.apply(i,Ni([r],c,!1))}}return r},t.getRootNode=function(){if("getRootNode"in De.prototype)return function(t,n){return t.getRootNode(n)};function t(i){var r=n(i);return R(r)?t(r.host):r}function n(t){return null!=csNodeparentNode.apply(t)?n(csNodeparentNode.apply(t)):t}return function(i,r){return"object"==typeof r&&Boolean(r.composed)?t(i):n(i)}}(),t.isHiddenByCSS=e,t.areAncestorsHiddenByCSS=function t(n){if(e(n))return!0;var i=r(n);return null!=i&&t(i)},t.getTopAncestorHiddenByCSS=function(t){var n=null,i=t;do{if(!e(i))break;n=i}while(i=r(i));return n},t.getTopElement=s,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,e=i.y+i.height/2;return t.getTopElementFromPoint(document,r,e)},t.getTopElementFromPoint=u,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+Pe.windowOffsetX()<0||n.bottom+Pe.windowOffsetY()<0}(t)&&!e(t)&&!function(t){var n=s(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!e(t)&&o(t)},t.isInViewPort=o,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!d(t)||!t.hasAttribute("href"))||(!(!(b(t)||m(t)||y(t)||(n=t,f(n)&&"button"===n.localName))||t.hasAttribute("disabled"))||!(!function(t){return f(t)&&"details"===t.localName}(t)&&!function(t){return f(t)&&"summary"===t.localName}(t)))));var n}}(Me||(Me={}));var Le,Ue=csSymbol(),je=function(){function t(t){var n,i,r,e,s,u,o,c,h=this;this.xn=t,this.vr=null,this.wr=null,this.pr=null,this.yr=null,this.mr=Wr((function(t){return h.processUpdateRulesInATick(t)})),this.xn=function(n){return Ce((function(){return t(n)}))},"function"==typeof(null===(i=null===(n=window.CSSStyleSheet)||void 0===n?void 0:n.prototype)||void 0===i?void 0:i.insertRule)&&(this.vr=Hi({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(t){var n=t.context,i=t.args;h.processInsertRule(n,i)}})),"function"==typeof(null===(e=null===(r=window.CSSStyleSheet)||void 0===r?void 0:r.prototype)||void 0===e?void 0:e.deleteRule)&&(this.wr=Hi({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(t){var n=t.context,i=t.args;h.processDeleteRule(n,i)}})),"function"==typeof(null===(u=null===(s=window.CSSGroupingRule)||void 0===s?void 0:s.prototype)||void 0===u?void 0:u.insertRule)&&(this.pr=Hi({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:function(t){var n=t.context;return h.processUpdateRule(n)}})),"function"==typeof(null===(c=null===(o=window.CSSGroupingRule)||void 0===o?void 0:o.prototype)||void 0===c?void 0:c.deleteRule)&&(this.yr=Hi({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:function(t){var n=t.context;return h.processUpdateRule(n)}}))}return t.prototype.observe=function(){var t,n,i,r;null===(t=this.vr)||void 0===t||t.activate(),null===(n=this.wr)||void 0===n||n.activate(),null===(i=this.pr)||void 0===i||i.activate(),null===(r=this.yr)||void 0===r||r.activate()},t.prototype.disconnect=function(){var t,n,i,r;null===(t=this.vr)||void 0===t||t.deactivate(),null===(n=this.wr)||void 0===n||n.deactivate(),null===(i=this.pr)||void 0===i||i.deactivate(),null===(r=this.yr)||void 0===r||r.deactivate()},t.prototype.processInsertRule=function(t,n){var i=n[0],r=n[1];if(null!=t[Ue]||t.ownerNode){var e={type:"cssRuleInserted",sheet:t,rule:i,index:r};this.xn(e)}},t.prototype.processUpdateRule=function(t){for(var n=t;null!==n.parentRule;)n=n.parentRule;null!==n.parentStyleSheet&&this.mr.push(n)},t.prototype.processUpdateRulesInATick=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];if(null===r.parentStyleSheet)return;var e=r.parentStyleSheet,s=csArray.prototype.indexOf.call(Bn(e.cssRules),r);if(-1===s)return;var u={type:"cssRuleUpdated",sheet:e,rule:r.cssText,index:s};this.xn(u)}},t.prototype.processDeleteRule=function(t,n){var i=n[0];if(null!=t[Ue]||t.ownerNode){var r={type:"cssRuleDeleted",sheet:t,index:i};this.xn(r)}},Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),Ri([yn()],t.prototype,"processInsertRule",null),Ri([yn()],t.prototype,"processUpdateRule",null),Ri([yn()],t.prototype,"processUpdateRulesInATick",null),Ri([yn()],t.prototype,"processDeleteRule",null),t}(),qe=function(){function t(t){var n=this;this.gr=1,this.Sr=new Set,this.br=null,this.Ar=null,this.Er=function(t,i){"initial"!==i&&"added"!==i||n.setStyleSheets(t,t.adoptedStyleSheets)},this.Rr=function(t){var i=t.sheet;if(n.Sr.has(i))if("cssRuleInserted"===t.type){var r={type:"adoptedStyleSheetRuleInserted",sheetId:i[Ue],rule:t.rule,index:t.index};n.xn(r)}else if("cssRuleDeleted"===t.type){var e={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Ue],index:t.index};n.xn(e)}else if("cssRuleUpdated"===t.type){var s={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Ue],rule:t.rule,index:t.index};n.xn(s)}},this.xn=function(i){return Ce((function(){return Ti(n,void 0,void 0,(function(){return Oi(this,(function(n){switch(n.label){case 0:return[4,_e(2)];case 1:return n.sent(),t(i),[2]}}))}))}))},this.ci=new Vi(this.Er),"adoptedStyleSheets"in Document.prototype&&(this.br=Bi(window.Document.prototype,"adoptedStyleSheets",(function(t,i){n.setStyleSheets(t,i)}))),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Ar=Bi(window.ShadowRoot.prototype,"adoptedStyleSheets",(function(t,i){n.setStyleSheets(t,i)}))),this.Tr=new je(this.Rr)}return t.prototype.observe=function(){var t,n;this.setStyleSheets(document,document.adoptedStyleSheets),this.ci.observe(),null===(t=this.br)||void 0===t||t.activate(),null===(n=this.Ar)||void 0===n||n.activate(),this.Tr.observe()},t.prototype.disconnect=function(){var t,n;this.Sr.clear(),this.ci.disconnect(),null===(t=this.br)||void 0===t||t.deactivate(),null===(n=this.Ar)||void 0===n||n.deactivate(),this.Tr.disconnect()},t.prototype.setStyleSheets=function(t,n){if(n.length){this.Or(n);var i={type:"adoptedStyleSheetsSet",target:t,sheetsIds:Vn(n,(function(t){return t[Ue]}))};this.xn(i)}},t.prototype.Or=function(t){var n=this;Gn(t,(function(t){if(!n.Sr.has(t)){var i=n.gr++;t[Ue]=i,n.Sr.add(t);var r={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n.Nr(t)};n.xn(r)}}))},t.prototype.Nr=function(t){var n=[];try{n=Vn(t.cssRules,(function(t){return t.cssText}))}catch(t){}return n},Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),Ri([yn()],t.prototype,"setStyleSheets",null),t}();function He(t){for(var n,i=[],r=function(t){for(var n=new Map,i=function(t){var i=n.get(t);return i||n.set(t,i=[]),i},r=function(t,n){var r=i(t);r.length&&"insert"!==r[0].operation&&"remove"!==r[0].operation&&(r.length=0),csArray.prototype.push.call(r,n)},e=function(t){switch(t.type){case"attributes":if((s=i(t.target)).length&&"attribute"!==s[0].operation)return"continue";var n=csArray.prototype.findIndex.call(s,(function(n){return"attributes"===n.mutation.type&&n.mutation.attributeName===t.attributeName})),e={operation:"attribute",mutation:t};n>=0?s[n]=e:csArray.prototype.push.call(s,e);break;case"characterData":var s;if((s=i(t.target)).length&&"characterData"!==s[0].operation)return"continue";s[0]={operation:"characterData",mutation:t};break;case"childList":Gn(t.removedNodes,(function(n){return r(n,{operation:"remove",mutation:t})})),Gn(t.addedNodes,(function(n){return r(n,{operation:"insert",mutation:t})}))}},s=0,u=t;s<u.length;s++){e(u[s])}return n}(t),e=function(n){var i=!1;return function(t,n,i){for(var r=0;r<t.length;r+=1){var e=n(t[r]);if((null==e?void 0:e.length)&&Jn(e,i))return!0}}(t,(function(t){return"childList"===t.type?t.addedNodes:[]}),(function(t){return t.contains(n)&&(i=!0)})),i},s=function(t){switch(t.type){case"attributes":return t.target.getAttribute(t.attributeName);case"characterData":return t.target.data}throw new Error("not supported type")},u=0,o=t;u<o.length;u++){var c=o[u];switch(c.type){case"attributes":case"characterData":if(s(c)===c.oldValue||e(c.target))continue;csArray.prototype.push.call(i,c);break;case"childList":(n=csArray.prototype.push).call.apply(n,Ni([i],Be(c,r),!1))}}return $n(i,(function(t){return!function(t,n){if("attributes"===t.type||"characterData"===t.type){return!Jn(n.get(t.target),(function(n){return n.mutation===t}))}if(t.addedNodes.length){if(t.target===document.body)return!1;var i=function(t){var i;return"insert"===(null===(i=n.get(t))||void 0===i?void 0:i[0].operation)};return!!i(t.target)||null!==Me.findAncestor(t.target,i,!0)}return!1}(t,r)}))}function Be(t,n){var i,r,e;if(t.addedNodes.length&&!t.removedNodes.length&&!Jn(t.addedNodes,Me.isConnected))return[];if(!function(t){return Jn(t.addedNodes,(function(t){return n.get(t).length>1}))||Jn(t.removedNodes,(function(t){return n.get(t).length>1}))}(t)){var s=Fe(t),u=Ge(t);if(s||u){var o=[];return csArray.prototype.push.call(o,{nextSibling:s,previousSibling:u,target:t.target,type:"childList",addedNodes:t.addedNodes,removedNodes:t.removedNodes}),o}return[t]}var c=function(t,n){return $n(t.addedNodes,(function(i){var r=ze(i,n),e=$n(n.get(i),(function(t){return"insert"===t.operation}));switch(r){case Le.Insert:return t===e[e.length-1].mutation;case Le.None:return!0;case Le.Move:case Le.Remove:case Le.NoOp:return!1}}))}(t,n),h=function(t,n){return $n(t.removedNodes,(function(i){var r=ze(i,n),e=$n(n.get(i),(function(t){return"remove"===t.operation}));switch(r){case Le.Remove:return t===e[e.length-1].mutation;case Le.None:return!0;case Le.Move:case Le.Insert:case Le.NoOp:return!1}}))}(t,n),a=function(t,n){return $n(t.addedNodes,(function(i){var r=$n(n.get(i),(function(t){return"insert"===t.operation}));return ze(i,n)===Le.Move&&t===r[r.length-1].mutation}))}(t,n),f=Ve(c),l=Ve(a),v=[];if(f.length>1||l.length>1){var d=function(t,n,i,r){var e=[],s=!0;return Gn(t,(function(t){0!==t.length&&(csArray.prototype.push.call(e,{nextSibling:csNodenextSibling.apply(t[t.length-1]),previousSibling:t[0].previousSibling,target:i.target,type:"childList",addedNodes:t,removedNodes:s?r:[]}),s=!1)})),Gn(n,(function(t){0!==t.length&&csArray.prototype.push.call(e,{nextSibling:csNodenextSibling.apply(t[t.length-1]),previousSibling:t[0].previousSibling,target:i.target,movedNodes:t,addedNodes:[],removedNodes:[],type:"childList"})})),function(t,n){var i=function(t){var n;return(null===(n=t.movedNodes)||void 0===n?void 0:n.length)?t.movedNodes[0]:t.addedNodes[0]},r=function(n){return function(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return r;return-1}(t.addedNodes,(function(t){return t===i(n)}))};csArray.prototype.sort.call(n,(function(t,n){return r(t)-r(n)}))}(i,e),e}(f,l,t,h);return(i=csArray.prototype.push).call.apply(i,Ni([v],d,!1)),v}return(c.length>0||h.length>0)&&csArray.prototype.push.call(v,{nextSibling:null!==(r=Fe(t))&&void 0!==r?r:t.nextSibling,previousSibling:null!==(e=Ge(t))&&void 0!==e?e:t.previousSibling,target:t.target,type:"childList",addedNodes:c,removedNodes:h}),a.length&&csArray.prototype.push.call(v,{nextSibling:csNodenextSibling.apply(a[0]),previousSibling:a[0].previousSibling,target:t.target,movedNodes:a,addedNodes:[],removedNodes:[],type:"childList"}),v}function Ve(t){if(t.length<=1)return[t];for(var n=[],i=0,r=0;r<t.length-1;r+=1)csNodenextSibling.apply(t[r])!==t[r+1]&&(csArray.prototype.push.call(n,csArray.prototype.slice.call(t,i,r+1)),i=r+1);return i>0&&csArray.prototype.push.call(n,csArray.prototype.slice.call(t,i,t.length)),n}function Fe(t){if(t.nextSibling&&!Me.isConnected(t.nextSibling)){if(t.addedNodes.length)return csNodenextSibling.apply(t.addedNodes[t.addedNodes.length-1]);if(t.removedNodes.length)return csNodenextSibling.apply(t.removedNodes[t.removedNodes.length-1])}return t.nextSibling}function Ge(t){if(t.previousSibling&&!Me.isConnected(t.previousSibling)){if(t.addedNodes.length)return t.addedNodes[0].previousSibling;if(t.removedNodes.length)return t.removedNodes[0].previousSibling}return null}function ze(t,n){var i,r,e=n.get(t);return!e||e.length<=1?Le.None:"".concat(null===(i=e[0])||void 0===i?void 0:i.operation,"-").concat(null===(r=e[e.length-1])||void 0===r?void 0:r.operation)}!function(t){t.Move="remove-insert",t.Remove="remove-remove",t.NoOp="insert-remove",t.Insert="insert-insert",t.None="none"}(Le||(Le={}));var Je=function(){function t(t){var n=this;this.xn=t,this.kr=function(t){t.sheet.ownerNode&&("cssRuleInserted"===t.type?n.xn({type:t.type,target:t.sheet.ownerNode,rule:t.rule,index:t.index}):"cssRuleDeleted"===t.type?n.xn({type:t.type,target:t.sheet.ownerNode,index:t.index}):"cssRuleUpdated"===t.type&&n.xn({type:t.type,target:t.sheet.ownerNode,rule:t.rule,index:t.index}))},this.Cr=new je((function(t){return Ce((function(){return Ti(n,void 0,void 0,(function(){return Oi(this,(function(n){switch(n.label){case 0:return[4,_e()];case 1:return n.sent(),this.kr(t),[2]}}))}))}))})),"adoptedStyleSheets"in Document.prototype&&(this.Ir=new qe(t))}return t.prototype.observe=function(){var t,n=this;this.Xn=new Kr((function(t){return n._r(t)}),(function(t,i){"added"===i&&n.Pr(t)})),this.Xn.observe(),this.Cr.observe(),null===(t=this.Ir)||void 0===t||t.observe()},t.prototype.disconnect=function(){var t,n;null===(t=this.Xn)||void 0===t||t.disconnect(),this.Cr.disconnect(),null===(n=this.Ir)||void 0===n||n.disconnect()},t.prototype._r=function(t){for(var n=He(t),i=0;i<n.length;i++){var r=n[i];if(r)switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:pn.error("processRawMutations: unknown record type '".concat(r.type,"'"))}else pn.error("processRawMutations: empty record")}},t.prototype.processAttributeChanged=function(t){var n={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:Me.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.xn(n)},t.prototype.processCharacterDataChanged=function(t){var n={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.xn(n)},t.prototype.processChildListChanged=function(t){var n,i,r;if(null===(n=t.removedNodes)||void 0===n?void 0:n.length){var e={type:"nodesRemoved",target:t.target,nodes:Vn(t.removedNodes,(function(t){return t}))};this.xn(e)}if(null===(i=t.movedNodes)||void 0===i?void 0:i.length){var s={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.movedNodes[0].previousSibling||void 0,nextSibling:csNodenextSibling.apply(t.movedNodes[t.movedNodes.length-1])||void 0};this.xn(s)}if(null===(r=t.addedNodes)||void 0===r?void 0:r.length){var u=[];if(Gn(t.addedNodes,(function(t){csArray.prototype.push.call(u,t)})),0===u.length)return;var o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:u};this.xn(o)}},t.prototype.Pr=function(t){var n={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.xn(n)},Ri([yn()],t.prototype,"processAttributeChanged",null),Ri([yn()],t.prototype,"processCharacterDataChanged",null),Ri([yn()],t.prototype,"processChildListChanged",null),t}(),$e=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=4,i.data=n.data,i}return lr(n,t),n}(ge),We=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=8,i.data=n.data,i}return lr(n,t),n}(ge),Xe=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=10,i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i}return lr(n,t),n}(ge),Ye=function(t){function n(i){var r=t.call(this,i)||this;return r.nodeType=9,r.baseURI=n.getBaseURI(i),r.children=[],r}return lr(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(ge),Ke=function(t){function n(n){var i=t.call(this,n)||this;return i.nodeType=11,i.mode=n.mode,i.children=[],i}return lr(n,t),n}(ge),Ze=function(){function t(t,n,i){var r;"string"==typeof t?(this.name=t,this.value=n,this.namespaceURI=null!=i?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=null!==(r=t.namespaceURI)&&void 0!==r?r:"")}return t.create=function(n){for(var i,r,e=n.attributes,s=new csArray(e.length),u=0;u<s.length;u++){var o=e[u];s[u]=new t(o.name,o.value,o.namespaceURI),"href"===o.name&&w(n)&&(s[u].value=null!==(r=null===(i=n.sheet)||void 0===i?void 0:i.href)&&void 0!==r?r:o.value)}return s},t}(),Qe={workTime:40,async:!0};ts();function ts(t){return void 0===t&&(t=Qe),function(n,i){var r;null!==(r=t.workTime)&&void 0!==r||(t.workTime=Qe.workTime);var e,s=mn("serialize:callback",(function(t){return i(t)})),u=new bn,o=function(t,n){t.hasChildNodes()&&u.push({node:t,serializedNode:n});var i=t instanceof Element&&csElementshadowRoot.apply(t);if(i){var r=n.shadowRoot=is(i);o(i,r)}},c=!0,h=8,a=mn("work",(function(){var r;if(c)e=is(n),o(n,e),c=!1;else if(u.isEmpty)return;for(var f=function(t){if(t<1)throw new Error("Precision should be >= 1");var n=0,i=performance.now();return{started:i,elapsed:function(){return++n%t==0&&(i=performance.now()),i-this.started}}}(100);!u.isEmpty;){if(t.async&&f.elapsed()>=t.workTime)return void(--h<=0&&csSetTimeout(a));var l=u.pop(),v=l.node,d=null!==(r=l.serializedNode.children)&&void 0!==r?r:[];if(!g(v))for(var w=0,p=csNodefirstChild.apply(v);p;p=csNodenextSibling.apply(p)){var y=is(p);d[w++]=y,o(p,y)}}t.async?csSetTimeout((function(){return s(e)})):i(e)}));if(t.async)for(var f=0;f<h;f++)csSetTimeout(a,1);else t.workTime=1/0,a()}}function ns(t){for(var n=is(t),i=n,r=csNodefirstChild.apply(t);r;r=csNodenextSibling.apply(r))csArray.prototype.push.call(i.children,ns(r));var e=t.shadowRoot;return e&&(i.shadowRoot=ns(e)),n}function is(t){var n,i;switch(t.nodeType){case 1:i=n=new be(t),n.attributes=function(t){if(g(t))return[];return Ze.create(t)}(t);break;case 3:i=new Se(t);break;case 4:i=new $e(t);break;case 8:i=new We(t);break;case 10:i=new Xe(t);break;case 9:i=new Ye(t);break;case 11:i=new Ke(t);break;default:throw new Error("Node type not supported: "+t.nodeType)}return i}var rs,es=function(){function t(){this.Mr=[],this.isStarted=!1}return t.prototype.produceEvent=function(t){this.isStarted&&(t.timestamp=Ct(),csArray.prototype.forEach.call(this.Mr,(function(n){return n(t)})))},t.prototype.onStop=function(){},t.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.onStart())},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Mr=[])},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.Mr,t),function(){var i=csArray.prototype.indexOf.call(n.Mr,t);csArray.prototype.splice.call(n.Mr,i,1)}},t}(),ss=ts(),us=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return lr(n,t),n.prototype.onStart=function(){this.xn=function(t,n){var i=!1,r=function(){if(!i)return t.apply(n,arguments)};return r.cancel=function(){return i=!0},r}(this.Dr,this),this.hr=new Je(this.xn),this.hr.observe();var t=zr.mutations.initialDOM.asyncMeasure();this.produceEvent(new Ae((function(n){return ss(document,(function(i){t(),n({type:"DomEvent",domEvent:"initialDOM",initialDOM:i})}))})))},n.prototype.stopForInactivity=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},n.prototype.onStop=function(){var t,n;null===(t=this.xn)||void 0===t||t.cancel(),null===(n=this.hr)||void 0===n||n.disconnect()},n.prototype.Lr=function(t,n){var i={type:"DomEvent",domEvent:n.type,target:0,targetProps:{}};return"target"in n&&(i.target=ar(n.target),i.targetProps=ur.getProperties(n.target)),[n,i]},n.prototype.Dr=function(t){if(!this.Ur(t))switch(t.type){case"attributeChanged":var n=this.Lr(t.type,t),i=n[0];(_=n[1]).attribute=i.attribute,_.isSvg=S(i.target),_.namespace=i.namespace,_.newValue=i.newValue,_.oldValue=i.oldValue,_.localName=me(i.target),_.linkRel=v(i.target)?i.target.rel:null,_.parentLocalName=i.target.parentElement?me(i.target.parentElement):null,"input"===_.localName&&(_.inputType=i.target.getAttribute("type")),this.produceEvent(_);break;case"characterDataChanged":var r=this.Lr(t.type,t),e=r[0];(_=r[1]).newValue=e.newValue,_.oldValue=e.oldValue,_.targetNodeType=e.target.nodeType,_.parentLocalName=e.target.parentElement?me(e.target.parentElement):null,_.parentProps=e.target.parentElement?ur.getProperties(e.target.parentElement):void 0,this.produceEvent(_);break;case"nodesAdded":var s=this.Lr(t.type,t),u=s[0],o=s[1];o.targetLocalName=f(u.target)?me(u.target):null,o.nextSibling=u.nextSibling?ar(u.nextSibling):null,o.previousSibling=u.previousSibling?ar(u.previousSibling):null,zr.mutations.serializedMutations.measure((function(){o.nodes=Vn(u.nodes,ns)})),this.produceEvent(o);break;case"nodesMoved":var c=this.Lr(t.type,t),h=c[0];(_=c[1]).previousSibling=h.previousSibling?ar(h.previousSibling):null,_.nextSibling=h.nextSibling?ar(h.nextSibling):null,_.nodesIds=Vn(h.nodes,ar),this.produceEvent(_);break;case"nodesRemoved":var a=this.Lr(t.type,t),l=a[0];(_=a[1]).nodesIds=Vn(l.nodes,ar),this.produceEvent(_);break;case"shadowRootAttached":var d=this.Lr(t.type,t),w=d[0];(_=d[1]).shadowRoot=is(w.shadowRoot),this.produceEvent(_);break;case"cssRuleInserted":var p=this.Lr(t.type,t),y=p[0];(_=p[1]).index=y.index,_.rule=y.rule,this.produceEvent(_);break;case"cssRuleDeleted":var m=this.Lr(t.type,t),g=m[0];(_=m[1]).index=g.index,this.produceEvent(_);break;case"cssRuleUpdated":var b=this.Lr(t.type,t),A=b[0];(_=b[1]).rule=A.rule,_.index=A.index,this.produceEvent(_);break;case"adoptedStyleSheetRegistered":var E=this.Lr(t.type,t),R=E[0];(_=E[1]).sheetId=R.sheetId,_.cssRules=R.cssRules,this.produceEvent(_);break;case"adoptedStyleSheetsSet":var T=this.Lr(t.type,t),O=T[0];(_=T[1]).sheetsIds=O.sheetsIds,this.produceEvent(_);break;case"adoptedStyleSheetRuleInserted":var N=this.Lr(t.type,t),k=N[0];(_=N[1]).sheetId=k.sheetId,_.rule=k.rule,_.index=k.index,this.produceEvent(_);break;case"adoptedStyleSheetRuleDeleted":var C=this.Lr(t.type,t),I=C[0];(_=C[1]).sheetId=I.sheetId,_.index=I.index,this.produceEvent(_);break;case"adoptedStyleSheetRuleUpdated":var _,P=this.Lr(t.type,t),x=P[0];(_=P[1]).sheetId=x.sheetId,_.rule=x.rule,_.index=x.index,this.produceEvent(_)}},n.prototype.Ur=function(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return gr.isSensitive(t.target)||gr.isSensitiveChild(t.target);case"characterDataChanged":var n=t.target.parentElement;return null!==n&&(gr.isSensitive(n)||gr.isSensitiveChild(n));case"attributeChanged":return gr.isSensitiveChild(t.target)||gr.isSensitiveAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":return gr.isSensitiveChild(t.target);default:return!1}},n}(es);!function(t){t.isDOMEvent=function(t){return"DomEvent"===t.type}}(rs||(rs={}));var os,cs=function(){function t(){this.Mr=[]}return t.prototype.start=function(){},t.prototype.stop=function(){this.Mr.length=0,this.Mr=[]},t.prototype.pushEvent=function(t){var n=this;if(this.isListening(t)){var i=this.Mr;csSetTimeout((function(){var r=mn("Processor:processEvent",(function(t){return n.processEvent(t)})),e=r(t);null!=e&&csArray.prototype.forEach.call(i,(function(t){return t(e)}))}))}else csSetTimeout((function(){csArray.prototype.forEach.call(n.Mr,(function(n){return n(t)}))}))},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.Mr,t),function(){n.Mr=csArray.prototype.filter.call(n.Mr,(function(n){return n!==t}))}},t.prototype.emitEvent=function(t){var n=this;Ce((function(){return csArray.prototype.forEach.call(n.Mr,(function(n){return n(t)}))}))},t}();function hs(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,e=t.length;r<e;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}function as(t){for(var n=new Uint8Array(t),i="",r=0;r<n.byteLength;r+=1)i+=csString.fromCodePoint(n[r]);return i}function fs(t){return hs(self.atob(t))}function ls(t){var n=csArray.from(new Uint8Array(t));return csArray.prototype.join.call(csArray.prototype.map.call(n,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),"")}function vs(t){var n=-1!==csString.prototype.indexOf.call(t,";base64,"),i=csString.prototype.indexOf.call(t,","),r=n?[csString.prototype.substring.call(t,0,i-7),csString.prototype.substring.call(t,i+1)]:[csString.prototype.substring.call(t,0,i),csString.prototype.substring.call(t,i+1)];if(!n&&/^%3Csvg/i.test(r[1]))try{r[1]=decodeURIComponent(r[1])}catch(t){pn.warn("".concat(t,", calling decodeURIComponent on: ").concat(r[1]))}var e=n?fs(r[1]):hs(r[1]);return new Blob([e],{type:csString.prototype.replace.call(r[0],"data:","")})}!function(t){var n="replaceAll"in csString.prototype;t.ELLIPSIS="…",t.stringReplaceAll=function(t,i,r){if(n)return csString.prototype.replaceAll.call(t,i,r);var e,s=new RegExp((e=i,csString.prototype.replace.call(e,/[.*+?^${}()|[\]\\]/g,"\\$&")),"g");return csString.prototype.replace.call(t,s,r)},t.truncate=function(t,n,i){return void 0===i&&(i=""),t.length<=n?t:csString.prototype.slice.call(t,0,n-i.length)+i}}(os||(os={}));var ds,ws=function(){function t(){}return t.toStaticResourceEvent=function(n,i,r){return wr(this,void 0,void 0,(function(){var e,s,u,o;return pr(this,(function(c){switch(c.label){case 0:return[4,t.jr(n)];case 1:return(e=c.sent())?[4,t.qr(e)]:[2,null];case 2:return s=c.sent(),u=Qr(n)?void 0:n,o={type:"StaticResourceManagerEvent",timestamp:r,resourceId:i,resource:{hash:s,data:e}},u&&(o.originalResourceName=u),[2,o]}}))}))},t.toCSSStaticResourceEvent=function(n,i,r,e){return wr(this,void 0,void 0,(function(){var s,u,o,c;return pr(this,(function(h){switch(h.label){case 0:return[4,t.Hr(n,e)];case 1:return s=h.sent(),u=tn(n),(o=s.get(u))?(c={type:"StaticResourceManagerEvent",timestamp:r,resourceId:i,resource:{hash:o.hash,data:o.data}},s.delete(u),s.size&&(c.nestedResources=[],s.forEach((function(t){t&&csArray.prototype.push.call(c.nestedResources,{hash:t.hash,data:t.data})}))),[2,c]):[2,null]}}))}))},t.qr=function(t){return wr(this,void 0,void 0,(function(){var n;return pr(this,(function(i){switch(i.label){case 0:return[4,t.arrayBuffer()];case 1:return n=i.sent(),[4,crypto.subtle.digest(this.Br,n)];case 2:return[2,ls(i.sent())]}}))}))},t.jr=function(t){return wr(this,void 0,void 0,(function(){var n,i;return pr(this,(function(r){switch(r.label){case 0:return Qr(t)?[3,3]:[4,window.fetch(t)];case 1:return[4,r.sent().blob()];case 2:return n=r.sent(),[3,4];case 3:if(!(i=vs(t)))return[2,null];n=i,r.label=4;case 4:return[2,n]}}))}))},t.Hr=function(n,i){return wr(this,void 0,void 0,(function(){var r,e,s,u,o,c,h,a,f,l,v,d,w,p,y,m;return pr(this,(function(g){switch(g.label){case 0:r=new Map,e=tn(n),s=[{resourceRawPath:n,resourceAbsolutePath:e}],g.label=1;case 1:if(!(s.length>0))return[3,17];if(u=csArray.prototype.pop.call(s),!i&&null!==u.resourceAbsolutePath&&!Qr(u.resourceAbsolutePath))return r.set(u.resourceAbsolutePath,null),[3,1];if(void 0!==r.get(u.resourceAbsolutePath))return[3,1];g.label=2;case 2:return g.trys.push([2,15,,16]),null===u.resourceRawPath||csString.prototype.indexOf.call(u.resourceRawPath,".css")>0?u.data?[3,5]:[4,fetch(u.resourceAbsolutePath)]:[3,8];case 3:return p=g.sent(),o=u,[4,p.text()];case 4:o.data=g.sent(),g.label=5;case 5:for(u.nestedResources||(u.nestedResources=ue(u.data)),c=!1,h=!1,a=function(n){var i=Qr(n)?n:u.resourceAbsolutePath?nn(n,u.resourceAbsolutePath):tn(n),e=r.get(i);if(void 0!==e){if(null!==e){var o=t.Vr(e,n);u.data=os.stringReplaceAll(u.data,n,o)}return"continue"}var a=void 0!==zn(s,(function(t){return t.resourceAbsolutePath===i}));a||(c=!0,h||(csArray.prototype.push.call(s,u),h=!0),csArray.prototype.push.call(s,{resourceRawPath:n,resourceAbsolutePath:i}))},f=0,l=u.nestedResources;f<l.length;f++)v=l[f],a(v);return c?[3,7]:[4,t.Fr(u.data)];case 6:d=g.sent(),r.set(u.resourceAbsolutePath,{hash:d.hash,data:d.data}),g.label=7;case 7:return[3,14];case 8:return w=void 0,Qr(u.resourceAbsolutePath)?[3,11]:[4,fetch(u.resourceAbsolutePath)];case 9:return[4,(p=g.sent()).blob()];case 10:return w=g.sent(),[3,12];case 11:if(!(y=vs(u.resourceAbsolutePath)))return r.set(u.resourceAbsolutePath,null),[3,1];w=y,g.label=12;case 12:return[4,t.qr(w)];case 13:m=g.sent(),r.set(u.resourceAbsolutePath,{hash:m,data:w}),g.label=14;case 14:return[3,16];case 15:return g.sent(),r.set(u.resourceAbsolutePath,null),[3,16];case 16:return[3,1];case 17:return[2,r]}}))}))},t.Vr=function(n,i){var r="cs://resources/".concat(n.hash);return Qr(i)||(r+="?".concat(t.Gr,"=").concat(i)),r},t.Fr=function(n){return wr(this,void 0,void 0,(function(){var i,r,e;return pr(this,(function(s){switch(s.label){case 0:return[4,(i=new Blob([n],{type:"text/css"})).arrayBuffer()];case 1:return r=s.sent(),[4,crypto.subtle.digest(t.Br,r)];case 2:return e=s.sent(),[2,{data:i,hash:ls(e)}]}}))}))},t.Br="SHA-256",t.Gr="original-resource-name",t}(),ps=function(t){function n(){var n=t.call(this)||this;return n.zr="cssrm://",n.Jr=0,n.$r=!1,n}return lr(n,t),n.prototype.isListening=function(t){return!!n.isSupported()&&(!!rs.isDOMEvent(t)&&("initialDOM"===t.domEvent||"nodesAdded"===t.domEvent||"attributeChanged"===t.domEvent||"characterDataChanged"===t.domEvent))},n.prototype.processEvent=function(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Wr(t);break;case"attributeChanged":this.Xr(t);break;case"characterDataChanged":this.Yr(t)}return t},n.prototype.disableOnlineAssets=function(){this.$r=!1},n.prototype.enableOnlineAssets=function(){this.$r=!0},n.prototype.isOnlineAssetsActivated=function(){return this.$r},n.prototype.Wr=function(t){for(var n=this,i=0,r="initialDOM"===t.domEvent?[t.initialDOM]:t.nodes;i<r.length;i++){var e=r[i];ur.traverse(e,(function(t,i){if(3===t.nodeType&&i)n.Kr(t,i.localName);else if(be.isElement(t)){var r=zn(t.attributes,(function(t){return"style"===t.name}));if(r&&(r.value=n.Zr(r.value)),n.Qr(t)||n.te(t,i)){var e=zn(t.attributes,(function(t){return"src"===t.name}));e&&e.value&&(e.value=n.ne(e.value));var s=zn(t.attributes,(function(t){return"srcset"===t.name}));if(s)return void(s.value=n.ie(s.value))}if(n.re(t)&&n.$r){var u=zn(t.attributes,(function(t){return"href"===t.name}));if(!u||!u.value)return;n.Jr++,n.ee(tn(u.value),n.Jr,!0),n.se(t,u,n.Jr)}}}))}},n.prototype.se=function(t,n,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:n.value}),n.value=this.zr+i},n.prototype.Kr=function(t,n){if(t&&"style"===n){var i=this.Zr(t.data);null!==i&&(t.data=i)}},n.prototype.Yr=function(t){if("style"===t.parentLocalName&&t.newValue){var n=this.Zr(t.newValue);null!==n&&(t.newValue=n)}},n.prototype.Xr=function(t){if(t.newValue&&t.newValue!==t.oldValue){var n="src"===t.attribute,i="srcset"===t.attribute;if("style"===t.attribute)t.newValue=this.Zr(t.newValue);else if(n||i){var r="img"===t.localName,e="source"===t.localName&&t.parentLocalName&&"picture"===t.parentLocalName;(r||e)&&(n&&(t.newValue=this.ne(t.newValue)),i&&(t.newValue=this.ie(t.newValue)))}}},n.prototype.ne=function(t){return Qr(t)||this.$r?(this.Jr++,this.ee(t,this.Jr,!1,Ct()),this.zr+this.Jr):t},n.prototype.ie=function(t){if(!this.$r)return t;for(var n=t,i=ie(t),r=Ct(),e=0,s=i;e<s.length;e++){var u=s[e];this.Jr++,this.ee(tn(u),this.Jr,!1,r),n=csString.prototype.replace.call(n,u,this.zr+this.Jr)}return n},n.prototype.Zr=function(t){for(var n=ue(t),i=t,r=Ct(),e=0,s=n;e<s.length;e++){var u=s[e],o=Qr(u);if((o||this.$r)&&!this.ue(u)){this.Jr++,i=csString.prototype.replace.call(i,u,this.zr+this.Jr);var c=ne(u);o?this.ee(u,this.Jr,!1,r):this.$r&&(c?this.ee(u,this.Jr,!0,r):this.ee(tn(u),this.Jr,!1,r))}}return i},n.prototype.ee=function(t,n,i,r){var e=this;void 0===r&&(r=Ct());var s=i?ws.toCSSStaticResourceEvent:ws.toStaticResourceEvent,u=new Ae((function(i){return wr(e,void 0,void 0,(function(){var e,u;return pr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,s(t,n,r,this.$r)];case 1:return e=o.sent(),i(e||{type:"warning",message:"Failed to process static resource: ".concat(t)}),[3,3];case 2:return u=o.sent(),i({type:"warning",message:u}),[3,3];case 3:return[2]}}))}))}));this.emitEvent(u)},n.prototype.Qr=function(t){return"img"===t.localName},n.prototype.te=function(t,n){return"source"===t.localName&&!!n&&"picture"===n.localName},n.prototype.re=function(t){return"link"===t.localName&&csArray.prototype.some.call(t.attributes,(function(t){return"rel"===t.name&&"stylesheet"===t.value}))},n.isSupported=function(){return _t()&&("crypto"in self||"crypto"in window)&&!!crypto&&!!crypto.subtle&&!!crypto.subtle.digest&&!!csArray.from},n.prototype.ue=function(t){return 0===csString.prototype.replace.call(t,/['"]+/g,"").length},n}(cs),ys=function(t){function n(n,i,r,e,s,u,o,c,h,a,f,l,v,d,w,p,y,m,g,S,b,A,E){void 0===m&&(m=[]);var R=t.call(this)||this;return R.j=n,R.oe=i,R.ce=r,R.he=e,R.ae=s,R.fe=u,R.Z=o,R.le=c,R.ve=h,R.de=a,R.we=f,R.pe=l,R.ye=v,R.ge=d,R.Se=w,R.be=p,R.Ae=y,R.Ee=m,R.Re=g,R.Te=S,R.Oe=b,R.Ne=A,R.ke=E,R.Ce=0,R.Ie=new _r,R._e={allowFromQuotaService:!0,allowFromSerialization:!0},R.Pe=$i((function(){R.oe.eventsCount()>0&&R.xe()}),2e3),R.Me=function(t){return R.processBrowserEvent(t)},R.De=function(t){return R.Le(t)},R.Ue=0,R.je=0,R.qe=new Mr,R.He=!1,R.Be=51200,R.Ve=!1,R.Fe=!1,R.Ge=[],R.ze=new Jr((function(t){return R.Je(t)}),(function(t){switch(t){case Hr.Active:R.Re.start();break;case Hr.Stopped:R.Re.stopForInactivity()}}),[Wi.RESOURCE_HASHES]),R.$e=function(t){R.ye.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},R}return J(n,t),n.prototype.init=function(){this.We(),this.pe.onLoad(this.$e),this.pe.onError(this.$e)},n.prototype.We=function(){var t,n,i,r,e=this;this.be.onEvent(this.Me,this.De),this.ae.onEvent(this.De),null===(t=this.we)||void 0===t||t.onTextNodeToEncrypt(this.Me),null===(n=this.we)||void 0===n||n.onInputNodeToEncrypt(this.De),null===(i=this.we)||void 0===i||i.onApiErrorToEncrypt((function(t){e.Xe(t)})),null===(r=this.we)||void 0===r||r.onUserIdentifierToEncrypt(this.Me),this.qe.onEvent((function(t){return t===Or.Blur?e.Ye():e.He?void 0:(e.He=!0,csSetTimeout((function(){e.He=!1})),t===Or.Hidden?e.Ye():e.Ke())}))},n.prototype.isRecording=function(){return this.Z.hasValidSession()&&this.isStarted},n.prototype.Ye=function(){var t=this;if(this.canSendEvents()){this.be.flush(),this.ye.saveBatchesInProgress(),Gn(this.Ee,(function(n){var i,r;return Gn(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.oe.addEvent(n)}))}));var n=this.oe.getEvents();if(0!==n.length){var i=this.pe.getQueryParams();i.rst=this.getRecordingStartTimestamp(),i.let=this.getRecordingLastEventTimestamp();var r=this.he.getCurrentIndex();i.ri=r.toString(),this.Se.removeQueryParams(),this.Se.setQueryParams(i),this.je=n[n.length-1].date;var e=this.oe.stringifyEvents();if(e.length>this.Be){var s=this.Ze();if(s.length>0){var u=ct(s);this.Se.send(u)||this.ye.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:$($({},i),{datatype:"json"}),events:u}),this.he.increment()}if(this.oe.eventsCount()>0){i.ri=this.he.getCurrentIndex().toString();var o=this.oe.stringifyEvents();this.ye.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:$($({},i),{datatype:"json"}),events:o}),this.he.increment()}}else{this.Se.send(e)||this.ye.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:$($({},i),{datatype:"json"}),events:e}),this.he.increment()}this.Se.removeQueryParams(),this.oe.clearEvents()}}},n.prototype.Ke=function(){var t=this;if(this.canSendEvents()){this.be.flush();var n=this.pe.getQueryParams();this.ye.saveBatchesInProgress(),n.rst=this.getRecordingStartTimestamp(),delete n.ri,n.hlm="true",this.Se.removeQueryParams(),Gn(this.Ee,(function(n){var i,r;return Gn(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.oe.addEvent(n)}))}));var i=this.oe.getEvents();if(0===i.length)return delete n.let,delete n.rst,this.Se.setQueryParams(n),this.Se.send(),void this.Se.removeQueryParams();this.je=i[i.length-1].date,n.let=this.getRecordingLastEventTimestamp(),this.Se.setQueryParams(n);var r=this.oe.stringifyEvents();if(r.length>this.Be){var e=this.Ze();if(e.length>0){var s=ct(e);this.Se.send(s)||this.ye.save({key:"".concat(n.sn,".").concat(n.pn,".last"),metadata:$($({},n),{datatype:"json"}),events:s})}else delete n.let,delete n.rst,delete n.ri,this.Se.removeQueryParams(),this.Se.setQueryParams(n),this.Se.send(),this.Se.removeQueryParams();if(this.oe.eventsCount()>0){n.rst=this.getRecordingStartTimestamp(),n.let=this.getRecordingLastEventTimestamp();var u=this.he.getCurrentIndex();n.ri=u.toString();var o=this.oe.stringifyEvents();this.ye.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:$($({},n),{datatype:"json"}),events:o}),this.he.increment()}}else{this.Se.send(r)||(this.ye.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:$($({},n),{datatype:"json"}),events:r}),this.he.increment())}this.Se.removeQueryParams(),this.oe.clearEvents()}},n.prototype.blockSendingEventsFromQuotaService=function(){this._e.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this._e.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this._e.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this._e.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this._e.allowFromQuotaService&&this._e.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){var n;if(this.le&&this.Ne){null===(n=this.le)||void 0===n||n.anonymize(t);var i=this.Ne.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:Ct(),type:"JSError"});i&&this.Me(i)}},n.prototype.onIframeCustomError=function(t){if(this.ke){var n=this.ke.translate($($({},t),{timestamp:Ct(),type:"CustomError"}));n&&this.Me(n)}},n.prototype.onIframeDetailedApiError=function(t){this.Qe(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Le(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isStarted)for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.fe.isCurrentPageviewValid()&&this.ze.pushEvent(t,{isUserEvent:!1})},n.prototype.Le=function(t){this.fe.refreshSession(),this.fe.isSessionValid()&&this.ze.pushEvent(t,{isUserEvent:!0})},n.prototype.Je=function(t){zr.general.nbEvents.increase(),this.oe.addEvent(t),this.oe.isThresholdReached()?this.pushEvents():this.oe.isFull()&&this.Pe(),this.ns(t)},n.prototype.ns=function(t){this.j.emitDebugEvents&&this.Ie.emit("recordingEvent",$($({},t),{typeName:Wi[t.type]}))},n.prototype.onStart=function(){var t=this;this.ze.reset(),Xr.start(),this.qe.start(),this.initStates(),this.Ae.setSensitiveSettings(this.ge.getSensitiveSettings()),this.be.start(),this.ve&&this.de&&this.ve.subscribe(n.rs,(function(n){return t.Qe(n)}),{detailedEvent:!0}),this.j.emitDebugEvents&&this.Ie.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Ge,(function(n){return t.es(n)})),this.Ge=[]},n.prototype.onStop=function(){var t;this.ze.disconnect(),Xr.stop(),this.qe.stop(),this.ae.stop(),this.ve&&this.ve.unsubscribe(n.rs),this.be.stop(),this.Fe=!1,null===(t=this.Te)||void 0===t||t.disableOnlineAssets()},n.prototype.clearStates=function(){this.be.flush(),this.Pe.cancel(),this.pushEvents(),this.pe.removeQueryParams()},n.prototype.initStates=function(){this.Ue=Ct(),this.he.reset(),this.Ce=0,this.pe.setQueryParams(this.ce.getRequestParameters())},n.prototype.pushEvents=function(){Gn(this.Ee,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)})),this.oe.eventsCount()>0&&(this.isStarted?this.xe():this.oe.clearEvents())},n.prototype.xe=function(){if(this.canSendEvents()){var t=this.oe.getEvents();this.je=t[t.length-1].date;var n=this.he.getCurrentIndex();this.pe.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.pe.getQueryParams();this.ye.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.pe.getQueryParams(),t),this.pe.send(t),this.he.increment(),this.oe.clearEvents(),this.ss&&this.ss()}},n.prototype.addInitialDom=function(t){this.oe.addEventByTimestamp(t),this.ns(t)},n.prototype.Qe=function(t){if(this.Oe&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Oe.truncate(t),this.we)return void this.we.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Xe(t)},n.prototype.Xe=function(t){if(this.Ce<n.us){var i={type:Wi.API_ERROR,date:Ct(),args:[this.de.anonymize(t)]};this.Me(i),this.Ce=this.Ce+1}},n.prototype.cs=function(t){var i,r;t===Zn.ETR_SESSION?this.pe.setQueryParams(((i={})[n.hs]=n.fs,i)):t===Zn.ETR_PAGE&&this.pe.setQueryParams(((r={})[n.ls]=n.fs,r))},n.prototype.clearEvents=function(){this.oe.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){var n,i=null===(n=this.Ne)||void 0===n?void 0:n.translate({type:"JSError",timestamp:Ct(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Me(i)},n.prototype.onCustomErrorEvent=function(t){var n,i=null===(n=this.ke)||void 0===n?void 0:n.translate({type:"CustomError",timestamp:Ct(),message:t.message,attributes:t.attributes});i&&this.Me(i)},n.prototype.onPageEvent=function(t){this.vs(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:Ct(),keyId:this.j.encryptionPublicKeyId};null===(n=this.we)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=function(t,n){this.isStarted?this.es({eventName:t,eventType:n}):csArray.prototype.push.call(this.Ge,{eventName:t,eventType:n})},n.prototype.es=function(t){this.cs(t.eventType),this.vs(t.eventName),this.pushEvents()},n.prototype.vs=function(t){var i={type:Wi.PAGE_EVENT,date:Ct(),args:[{eventName:csString.prototype.slice.call(t,0,n.ds)}]};this.oe.addEvent(i)},n.prototype.triggerUnanonymizationConsentGranted=function(){var t={date:Ct(),type:Wi.UNANONYMIZED_CONSENT_GRANTED};this.oe.addEvent(t)},n.prototype.triggerUnanonymizationConsentWithdrawn=function(){var t={date:Ct(),type:Wi.UNANONYMIZED_CONSENT_WITHDRAWN};this.oe.addEvent(t)},n.prototype.triggerRecordingForSessionGranted=function(){var t={date:Ct(),type:Wi.RECORDING_INFO_EVENT,args:[Xi.RECORDING_CONSENT_FOR_SESSION_GRANTED]};this.oe.addEvent(t)},n.prototype.triggerRecordingForSessionWithdrawn=function(){var t={date:Ct(),type:Wi.RECORDING_INFO_EVENT,args:[Xi.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN]};this.oe.addEvent(t)},n.prototype.activateOnlineAssetsOnNextPageview=function(){this.Ve=!0,this.Fe=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.Te?{isStarted:this.j.useStaticResourceManager&&ps.isSupported(),onlineAssets:{activated:this.Te.isOnlineAssetsActivated(),enabledOnNextPageview:this.Ve,enabledForChildrenOnNextStart:this.Fe}}:null},n.prototype.updateStaticResourceManagerOnlineAssets=function(){this.Te&&this.Ve&&(this.Te.enableOnlineAssets(),this.Fe=!0,this.Ve=!1)},n.prototype.onRecordingRequestSent=function(t){this.ss=t},n.prototype.getRecordingStartTimestamp=function(){return this.Ue.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.je.toString()},n.prototype.onOptOut=function(){Gn(this.Ee,(function(t){var n;return null===(n=t.releaseResources)||void 0===n?void 0:n.call(t)}))},n.prototype.Ze=function(){return this.oe.extractEvents(Wi.API_ERROR,Wi.JAVASCRIPT_ERROR,Wi.CUSTOM_ERROR,Wi.TEXT_VISIBILITY,Wi.POINTER_DOWN)},n.rs="RecordingService",n.ds=255,n.us=20,n.ls="etrp",n.hs="etrs",n.fs="1",X([Pn("addInitialDom")],n.prototype,"addInitialDom",null),n}(Pr),ms=function(t){function n(n,i,r){var e=t.call(this)||this;return e.nn=n,e.Se=i,e.pe=r,e.ws=!1,e.ps={},e.ys=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],s=r.metadata,u=r.events;e.gs(s.rt)&&e.pe.send(u,s)}},window.addEventListener("focus",(function(){e.recover()})),e}return J(n,t),n.prototype.onStart=function(){this.ps={}},n.prototype.onStop=function(){},n.prototype.recover=function(){this.nn.recover(this.ys)},n.prototype.addBatchInProgress=function(t,n,i){this.ps[t]={metadata:$({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.ps[t]},n.prototype.blockSendingLastMessage=function(){this.ws=!1},n.prototype.allowSendingLastMessage=function(){this.ws=!0},n.prototype.sendLastMessageBeacon=function(){if(this.ws){var t=this.pe.getQueryParams(),n=(t.ri,t.rst,t.let,W(t,["ri","rst","let"]));n.hlm="true",this.Se.setQueryParams(n),this.Se.send()}},n.prototype.gs=function(t){return!!t&&-1===csString.prototype.indexOf.call(t,Yn.TEMPORARILY_RECORDED)},n.prototype.saveBatchesInProgress=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.ps),(function(n){var i=t.ps[n],r=i.metadata,e=i.events;t.nn.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:$($({},r),{datatype:"json"}),events:csJSON.stringify(e)})}))},n.prototype.save=function(t){this.nn.save(t)},X([yn("RecordingRecovery")],n.prototype,"recover",null),n}(Pr),gs=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.Ss=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this.Ss,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this.Ss,(function(t,n){return $($({},n.getRequestParameters()),t)}),{})},t}(),Ss=function(){function t(t,n){var i=this;this.Pn=t,this.q=n,this.bs=[{boundElement:window,type:"hashchange",listener:function(){return i.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return i.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.As=t},t.prototype.start=function(){this.hi(),this.triggerInitialEvents()},t.prototype.stop=function(){this.ai()},t.prototype.hi=function(){csArray.prototype.forEach.call(this.bs,(function(t){return Gi(t)}))},t.prototype.ai=function(){csArray.prototype.forEach.call(this.bs,(function(t){return zi(t)}))},t.prototype.triggerInitialEvents=function(){this.hashChangeListener()},t.prototype.hashChangeListener=function(){var t={type:Wi.HASH_CHANGE,args:[this.q.anonymizePII(this.Pn.href)],date:Ct()};this.As(t)},t.prototype.visibilityChangeListener=function(){var t={type:Wi.VISIBILITY_CHANGE,args:[document.visibilityState],date:Ct()};this.As(t)},X([yn("hashChange")],t.prototype,"hashChangeListener",null),X([yn("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),bs=function(){function t(t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.Es=[],this.Wi=[],this.Rs=t}return t.prototype.next=function(t){var n=this;this.Wi.length===this.Rs&&csArray.prototype.shift.call(this.Wi),csArray.prototype.push.call(this.Wi,t),1===this.Wi.length&&csSetTimeout((function(){return n.clear()}));for(var i=0,r=this.Es;i<r.length;i++){(0,r[i])(t)}},t.prototype.subscribe=function(t){var n=this;if(zn(this.Es,(function(n){return t===n})))return function(){n.Es=csArray.prototype.filter.call(n.Es,(function(n){return n!==t}))};csArray.prototype.push.call(this.Es,t);for(var i=0,r=this.Wi;i<r.length;i++){var e=r[i];t(e)}return function(){n.Es=csArray.prototype.filter.call(n.Es,(function(n){return n!==t}))}},t.prototype.clear=function(){this.Wi=[]},t.prototype.hasObservers=function(){return this.Es.length>0},t}(),As=function(){function t(t){this.xn=t}var n;return t.prototype.observe=function(){var t=this;(this.Ts=n.Os.subscribe((function(n){return t.xn(n)})),n.Ns)||(n.Ns=!0,n.ks.observe(),_i(document,NodeFilter.SHOW_ELEMENT).visitAll((function(t){n.Cs.add(t),n.Os.next(t)})))},t.prototype.disconnect=function(){n.Ns&&(this.Ts(),n.Os.hasObservers()||(n.Ns=!1,n.ks.disconnect(),n.Os.clear(),n.Cs.clear()))},n=t,t.Cs=$r(),t.Os=new bs,t.Is=function(t){Ce((function(){for(var i=0,r=t;i<r.length;i++){var e=r[i];"childList"===e.type&&Gn(e.addedNodes,(function(t){_i(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){n.Cs.has(t)||(n.Cs.add(t),n.Os.next(t))}))}))}}))},t.Ns=!1,t.ks=new Kr(n.Is),Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),t}(),Es=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this._s=t,this.Ps=n,this.xs=i,this.Ms=new bn,this.nt=!1,this.Ds=0,this.Ls=function(){for(r.Ds=0;r.Ms.length;){if(r.Ds>=r.Ps)return void csSetTimeout(r.Ls,r.xs);var t=Ct(),n=r.Ms.pop();if(!n)break;r.runTask(n);var i=Ct()-t;r.Ds+=i}r.nt=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this._s&&!n?(zr.general.pendingTasks.increase(),this.Ms.push(t),this.Us()):t()},t.prototype.Us=function(){var t=this;this.nt||(this.nt=!0,csSetTimeout((function(){t.Ls()})))},t.prototype.runTask=function(t){zr.general.pendingTasks.decrease(),t()},t.prototype.runPendingTasks=function(){var t=this;this.Ms.forEach((function(n){t.runTask(n)})),this.Ms.clear()},t.prototype.clearQueue=function(){zr.general.pendingTasks.clear(),zr.mutations.pendingMutations.clear(),this.Ms.clear()},t.prototype.isEmpty=function(){return 0===this.Ms.length},X([yn("TaskScheduler"),Pn("runTask")],t.prototype,"runTask",null),X([Pn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),Rs=function(){function t(t){void 0===t&&(t=!1);var n=this;this.Wn=!1,this.js=new je((function(t){return"cssRuleInserted"===t.type&&n.onStyleSheetChange(t)})),this.taskScheduler=new Es(t),this.qs=new As((function(t){return n.taskScheduler.schedule((function(){return n.Hs(t)}))})),this.Xn=new Kr((function(t){return n.taskScheduler.schedule((function(){return n.er(t)}))}))}return t.prototype.onStyleSheetChange=function(t){t.rule&&this.Wn&&this.Bs(t.rule)},t.prototype.start=function(){this.Wn||(this.Wn=!0,this.js.observe(),this.qs.observe(),this.Xn.observe())},t.prototype.stop=function(){this.Wn&&(this.js.disconnect(),this.qs.disconnect(),this.Xn.disconnect(),this.Wn=!1)},t.prototype.onEvent=function(t){this.As=t},t.prototype.onAsset=function(t){this.Vs=t},t.prototype.onStyleSheetFound=function(t){this.Fs=t},t.prototype.Gs=function(t){l(t)&&csNodeparentNode.apply(t)&&p(csNodeparentNode.apply(t))&&this.Bs(t.data)},t.prototype.Bs=function(t){this.zs(ue(t))},t.prototype.Hs=function(t){this.Wn&&gr.getSensitiveDetails(t).state===gr.SensitiveState.NotSensitive&&this.Js(t)},t.prototype.Js=function(t,n){gr.getSensitiveDetails(t).state!==gr.SensitiveState.NotSensitive||n&&gr.isSensitiveAttribute(t,n)||(p(t)?this.$s(t):this.Ws(t,n)||(this.Xs(t,n),this.Ys(t,n),this.Ks(t,n)))},t.prototype.Ws=function(t,n){var i,r,e;if(w(t)&&(!n||"href"===n)&&t.href){var s=(null===(i=t.sheet)||void 0===i?void 0:i.href)||t.href,u={assetId:s,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};return null===(r=this.Fs)||void 0===r||r.call(this,u),null===(e=this.Vs)||void 0===e||e.call(this,u),this.Zs(s),!0}return!1},t.prototype.$s=function(t){for(var n,i,r=new Set,e=0;e<csNodechildNodes.apply(t).length;e++){var s=csNodechildNodes.apply(t)[e];if(3===s.nodeType)for(var u=0,o=ue(s.data);u<o.length;u++){var c=o[u];r.add(c)}}try{i=null===(n=t.sheet)||void 0===n?void 0:n.cssRules}catch(t){"SecurityError"===t.name||"InvalidAccessError"===t.name||wn.error(t.message)}if(i)for(e=0;e<i.length;e++)for(var h=0,a=ue(i.item(e).cssText);h<a.length;h++){c=a[h];r.add(c)}this.zs(Xn(r))},t.prototype.Qs=function(t){return!this.tu(t)&&!Qr(t)&&!te(t)},t.prototype.Xs=function(t,n){var i,r;if(f(r=t)&&"img"===r.localName){if(!n||"src"===n){var e=t.getAttribute("src");e&&this.Qs(e)&&(this.Zs(t.src),null===(i=this.Vs)||void 0===i||i.call(this,{assetId:t.src,assetRawPath:e,assetBasePath:window.location.href}))}n&&"srcset"!==n||!t.srcset||this.nu(t.srcset)}},t.prototype.Ys=function(t,n){if(1===t.nodeType){if(t.hasAttribute&&(!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.Bs(i)}}else pn.warn("StaticResourceUrlTracker: Wrong element nodeType: ".concat(null==t?void 0:t.nodeName,"/").concat(t.nodeType))},t.prototype.nu=function(t){this.zs(ie(t))},t.prototype.Ks=function(t,n){var i,r;if((S(r=t)&&"image"===r.localName||function(t){return S(t)&&"use"===t.localName}(t)||function(t){return S(t)&&"feImage"===t.localName}(t))&&(!n||"href"===n||"xlink:href"===n)){var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e&&this.Qs(e)){var s=tn(e);this.Zs(s),null===(i=this.Vs)||void 0===i||i.call(this,{assetId:s,assetRawPath:e,assetBasePath:window.location.href})}}},t.prototype.zs=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.tu(t)})),(function(t){return!Qr(t)})),(function(t){return!te(t)})),(function(t){return{rawUrl:t,absoluteUrl:tn(t)}})),(function(t){var i;n.As&&n.Zs(t.absoluteUrl),null===(i=n.Vs)||void 0===i||i.call(n,{assetId:t.absoluteUrl,assetBasePath:window.location.href,assetRawPath:t.rawUrl})}))},t.prototype.er=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];switch(r.type){case"attributes":this.Js(r.target,r.attributeName);break;case"characterData":this.Gs(r.target)}}},t.prototype.Zs=function(t){var n,i={date:Ct(),type:Wi.STATIC_RESOURCE_URL,args:[t]};null===(n=this.As)||void 0===n||n.call(this,i)},t.prototype.tu=function(t){return/^https:\/\/\w+:\w+@/.test(t)},t}(),Ts=function(){function t(t){this.iu=[],this.ru=[],this.$t={},this.Wt=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),(function(i){n.$t[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,(function(t){delete n.$t[t]})):this.$t={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.iu,t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.ru,t)},t.prototype.send=function(t){var n=this,i=ot.toQuery($($({},this.$t),{ct:Ln.UNCOMPRESSED})),r=this.eu(i,t);return r?csArray.prototype.forEach.call(this.iu,(function(t){return t()})):csArray.prototype.forEach.call(this.ru,(function(t){return t(n.$t)})),r},t.prototype.eu=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.Wt,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.Wt,"?").concat(t),n||"")},t}(),Os=function(){function t(t){this.su={},this.ou=new kr(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.ou.isThresholdReached()||(this.ou.addString(n),"string"==typeof r?this.ou.addString(r):this.ou.addArrayBuffer(r),this.ou.isThresholdReached()||(this.su[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.hu(),(function(t){var r=n.su[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.au(t))})),0!==i.length&&(t(i),this.ou.reset())},t.prototype.hu=function(){return Object.keys(this.su)},t.prototype.au=function(t){delete this.su[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(ds||(ds={}));var Ns=function(){function t(t,n,i){this.fu=t,this.lu=i,this.vu=ds.NOT_STARTED,this.du=[],this.wu=0,this.pu=self.origin,this.yu="object"==typeof window?"":"worker-",this.ou=new kr(n),this.mu()}return t.prototype.mu=function(){return Y(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.gu()];case 1:return t.sent(),this.vu===ds.READY?this.Su():this.lu(this.du),[2]}}))}))},t.prototype.Su=function(){var t=this;csArray.prototype.forEach.call(this.du,(function(n){t.save(n)})),this.du=[]},t.prototype.save=function(t){return Y(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.vu===ds.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.du,t),[2]):this.vu!==ds.READY||this.ou.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.ou.addString(n),"string"==typeof r?this.ou.addString(r):this.ou.addArrayBuffer(r),this.ou.isThresholdReached()?[2]:[4,this.bn.put("".concat(this.pu,"/").concat(n),new Response(r,{headers:i}))]);case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return Y(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.bn?[3,2]:[4,this.gu()];case 1:if(n.sent(),this.vu!==ds.READY)return[2];n.label=2;case 2:return this.bu(t),[2]}}))}))},t.prototype.gu=function(){return Y(this,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.vu=ds.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.yu).concat(this.fu))];case 1:return t.bn=n.sent(),this.vu=ds.READY,[3,3];case 2:return n.sent(),this.vu=ds.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.bu=function(t){return Y(this,void 0,void 0,(function(){var n,i,r,e,s=this;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.wu++,this.wu>1?[2]:[4,this.bn.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.bn.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return e=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return s.bn.delete(t)})))];case 4:return u.sent(),t(e),this.ou.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.wu--,[7];case 7:return[2]}}))}))},t}(),ks=function(){function t(t){self.caches?this.Au(t):this.Eu()}return t.prototype.save=function(t){this.Ru.save(t)},t.prototype.recover=function(t){this.Ru.recover(t)},t.prototype.Au=function(n){var i=this;this.Ru=new Ns(n,t.Tu,(function(t){i.Eu(t)}))},t.prototype.Eu=function(n){var i=this;this.Ru=new Os(t.Tu),n&&csArray.prototype.forEach.call(n,(function(t){i.Ru.save(t)}))},t.Tu=16777216,t}(),Cs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return lr(n,t),n.prototype.isListening=function(t){return rs.isDOMEvent(t)&&("initialDOM"===t.domEvent||"nodesAdded"===t.domEvent)},n.prototype.processEvent=function(t){for(var n=this,i="initialDOM"===t.domEvent?[t.initialDOM]:t.nodes,r=function(i){if(i instanceof be){var r=gr.getAttributeSensitiveDetails(i);i.attributes=e.Ou(i,r)}if(gr.getSensitiveDetails(i).state===gr.SensitiveState.Child)return"initialDOM"===t.domEvent?{value:null}:(t.nodes=csArray.prototype.filter.call(t.nodes,(function(t){return t!==i})),"continue");ur.traverse(i,(function(t){if(t instanceof be){var i=gr.getAttributeSensitiveDetails(t);t.attributes=n.Ou(t,i);var r=gr.getSensitiveDetails(t);r.state===gr.SensitiveState.Parent&&n.Nu(t,r)}}))},e=this,s=0,u=i;s<u.length;s++){var o=r(u[s]);if("object"==typeof o)return o.value}return t},n.prototype.Ou=function(t,n){return 0===n.attributes.length?t.attributes:csArray.prototype.filter.call(t.attributes,(function(t){return-1===csArray.prototype.indexOf.call(n.attributes,t.name)}))},n.prototype.Nu=function(t,n){var i="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;");t.children=[],csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),be.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})},n}(cs),Is=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,_s=/[^ａ\s]/g;function Ps(t){var n=csString.prototype.replace.call(t,Is,"ａ");return csString.prototype.replace.call(n,_s,"a")}csArray.prototype.reduce.call(["a","e","i","o","mi","id","ex","ut","eu","ac","in","et","sit","vel","sed","leo","amet","elit","orci","erat","quam","odio","eget","lorem","ipsum","dolor","nulla","vitae","purus","proin","neque","porta","augue","velit","lacus","justo","magna","mollis","nullam","turpis","tortor","lectus","luctus","dictum","integer","aliquam","viverra","rhoncus","posuere","egestas","laoreet","vivamus","euismod","sagittis","molestie","faucibus","pulvinar","ultrices","volutpat","ultricies","venenatis","vulputate","convallis","phasellus","adipiscing","vestibulum","consectetur","ullamcorper","sollicitudin"],(function(t,n){var i;return t.set(n.length,yr(yr([],null!==(i=t.get(n.length))&&void 0!==i?i:[],!0),[n],!1)),t}),new Map);var xs,Ms,Ds,Ls,Us=function(t){function n(n,i,r){var e=t.call(this)||this;return e.ku=n,e.Cu=i,e.Iu=r,e}return lr(n,t),n.prototype.setAnonymization=function(t){this.ku=t},n.prototype.isListening=function(t){return rs.isDOMEvent(t)&&("initialDOM"===t.domEvent||"nodesAdded"===t.domEvent||"attributeChanged"===t.domEvent||"characterDataChanged"===t.domEvent)},n.prototype.processEvent=function(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this._u(t);break;case"attributeChanged":this.Pu(t);break;case"characterDataChanged":this.xu(t)}return t},n.prototype._u=function(t){for(var n=this,i=0,r="initialDOM"===t.domEvent?[t.initialDOM]:t.nodes;i<r.length;i++){var e=r[i];ur.traverse(e,(function(t,i){if(t.anonymized=n.ku,3===t.nodeType){var r=n.ku;return i&&("style"===i.localName||Xr.isWhitelisted(i))&&(r=!1),t.anonymized=r,void(t.data=n.Mu(r,t.data,null==i?void 0:i.localName,i?ur.getProperties(i):void 0))}if(be.isElement(t))return n.Du(t);4!==t.nodeType||(t.data=n.ku?Ps(t.data):n.Iu(t.data))}))}},n.prototype.Du=function(t){var n=this;if(!ur.getProperty(t,"SVG")){var i=csArray.prototype.some.call(t.attributes,(function(t){return"type"===t.name&&("submit"===t.value||"button"===t.value)}));t.attributes=csArray.prototype.map.call(t.attributes,(function(r){return r.anonymized=n.ku,r.value=n.Lu(t.localName,n.ku,r.name,r.value,i),r}))}},n.prototype.Pu=function(t){if(!t.isSvg){var n="submit"===t.inputType||"button"===t.inputType;t.newValue=this.Lu(t.localName,this.ku,t.attribute,t.newValue,n)}},n.prototype.Lu=function(t,n,i,r,e){return this.Uu(i)||"svg"===t||"slot"===t?r:"value"===i&&"input"===t&&n&&e?Ps(r):n?"":this.Iu(r)},n.prototype.Uu=function(t){return this.Cu.has(t)},n.prototype.xu=function(t){t.newValue=this.Mu(this.ku,t.newValue,t.parentLocalName,t.parentProps)},n.prototype.Mu=function(t,n,i,r){if(i){if("style"===i)return n;if(t&&r&&r[Xr.ANONYMIZATION_STATUS_PROP]===Xr.ANONMIZATION_WHITELISTED_STATUS)return this.Iu(n)}return t?Ps(n):this.Iu(n)},n}(cs),js="textarea",qs=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return lr(n,t),n.prototype.isListening=function(t){return rs.isDOMEvent(t)&&("initialDOM"===t.domEvent||"nodesAdded"===t.domEvent||"characterDataChanged"===t.domEvent)},n.prototype.processEvent=function(t){switch(t.domEvent){case"initialDOM":this.ju(t);break;case"nodesAdded":this.qu(t);break;case"characterDataChanged":this.Hu(t)}return t},n.prototype.ju=function(t){var n=this;ur.traverse(t.initialDOM,(function(t,i){n.Bu(t,i)&&(t.data=n.Vu(t.data))}))},n.prototype.qu=function(t){for(var n=this,i=0,r=t.nodes;i<r.length;i++){var e=r[i];ur.traverse(e,(function(i,r){n.Fu(i,r,t)&&(i.data=n.Vu(i.data))}))}},n.prototype.Hu=function(t){t.parentLocalName===js&&(t.newValue=this.Vu(t.newValue))},n.prototype.Vu=function(t){return csString.prototype.replace.call(t,/\S/g,"•")},n.prototype.Fu=function(t,n,i){return this.Gu(t,i)||this.Bu(t,n)},n.prototype.Gu=function(t,n){return 3===t.nodeType&&n.targetLocalName===js},n.prototype.Bu=function(t,n){return 3===t.nodeType&&Ht(n)&&n.localName===js},n}(cs),Hs=function(t){function n(n){var i=t.call(this)||this;return i.zu=n,i}return lr(n,t),n.prototype.onStart=function(){this.produceEvent({type:"Debug",key:"debugInfo",value:this.zu})},n}(es),Bs=function(){function t(t){var n=this;this.xn=t,this.Ju={boundElement:window,type:"resize",listener:function(){return n.resizeListener()}},this.xn=t}return t.prototype.observe=function(){Gi(this.Ju),this.yi()},t.prototype.yi=function(){this.resizeListener()},t.prototype.disconnect=function(){zi(this.Ju)},t.prototype.resizeListener=function(){var t={width:Pe.windowWidth(),height:Pe.windowHeight()};this.xn(t)},Ri([yn("resize")],t.prototype,"resizeListener",null),t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(xs||(xs={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(Ms||(Ms={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(Ds||(Ds={})),function(t){function n(){return"orientation"in window.csScreen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(window.csScreen.orientation.type){case Ms.PORTRAIT_PRIMARY:case Ms.PORTRAIT_SECONDARY:return xs.PORTRAIT;case Ms.LANDSCAPE_PRIMARY:case Ms.LANDSCAPE_SECONDARY:return xs.LANDSCAPE;default:return xs.PORTRAIT}}:i()?function(){switch(window.orientation){case Ds.PORTRAIT:case Ds.PORTRAIT_REVERSE:return xs.PORTRAIT;case Ds.LANDSCAPE:case Ds.LANDSCAPE_REVERSE:return xs.LANDSCAPE;default:return xs.PORTRAIT}}:function(){return xs.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Ls||(Ls={}));var Vs,Fs=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.$u=null,n.Wu=null,n.Xu=new Bs((function(t){n.produceEvent(vr(vr({},t),{type:"viewportResize"})),n.onScreenPotentiallyChanged()})),n}return lr(n,t),n.prototype.onScreenPotentiallyChanged=function(){var t=Ls.getCurrentOrientation(),n=this.Yu(t),i=n.screenWidth,r=n.screenHeight;if(i!==this.$u||r!==this.Wu){this.$u=i,this.Wu=r;var e={type:"screenResize",width:i,height:r};this.produceEvent(e)}},n.prototype.Yu=function(t){var n,i,r=Pe.screenWidth(),e=Pe.screenHeight();return t===xs.PORTRAIT?(n=r,i=e):(n=Math.max(r,e),i=Math.min(r,e)),{screenWidth:n,screenHeight:i}},n.prototype.onStart=function(){this.Xu.observe()},n.prototype.onStop=function(){this.$u=null,this.Wu=null,this.Xu.disconnect()},n}(es),Gs=function(t){function n(){var n=t.call(this)||this;n.Ku="object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise,n.Zu=mn("CustomElementRegistrationProducer:onElementsFound",(function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i];gr.isSensitive(e)||gr.isSensitiveChild(e)||f(s=e)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&-1===csString.prototype.indexOf.call(s.tagName,":")&&-1===csString.prototype.indexOf.call(s.tagName,'"')&&-1===csString.prototype.indexOf.call(s.tagName,",")&&csArray.prototype.indexOf.call(O,csString.prototype.toLocaleLowerCase.call(s.tagName))<0&&n.register(csString.prototype.toLowerCase.call(e.tagName))}var s}));var i=Wr(n.Zu);return n.qs=new As((function(t){return i.push(t)})),n.Qu=new Set,n}return lr(n,t),n.prototype.onStart=function(){this.Ku&&this.qs.observe()},n.prototype.onStop=function(){this.Qu.clear(),this.qs.disconnect()},n.prototype.register=function(t){return wr(this,void 0,void 0,(function(){return pr(this,(function(n){switch(n.label){case 0:return this.Qu.has(t)?[2]:(this.Qu.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}),[2]}}))}))},dr([yn()],n.prototype,"register",null),n}(es);!function(t){t.isNavigationTimingObserverSupported=function(){var t,n;return(null==(null===(t=window.PerformanceObserver)||void 0===t?void 0:t.supportedEntryTypes)?void 0:csArray.prototype.indexOf.call(null===(n=window.PerformanceObserver)||void 0===n?void 0:n.supportedEntryTypes,"navigation"))>=0},t.getTimeOrigin=function(){return window.performance.timeOrigin}}(Vs||(Vs={}));var zs,Js,$s=function(){function t(t){this.xn=t}return t.no=function(){return new window.PerformanceObserver((function(n){return t.io(n)}))},t.io=function(n){var i=n.getEntriesByType("navigation")[0];i&&(this.ro=i,t.eo(i))},t.Jn=function(n){t.so(n),t.ro&&n(t.ro),t.uo||t.oo()},t.so=function(n){t.co.add(n)},t.ho=function(n){t.co.delete(n)},t.oo=function(){if(!t.ao)return t.ro||(t.ro={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),void t.eo(t.ro);t.ao.observe({type:"navigation",buffered:!0}),t.uo=!0},t.eo=function(n){t.co.forEach((function(t){t(n)}))},t.Qn=function(n){t.ho(n),0===t.co.size&&t.fo()},t.fo=function(){var n;t.uo&&(null===(n=t.ao)||void 0===n||n.disconnect(),t.uo=!1,t.ro=null,t.ao=this.no())},t.prototype.observe=function(){t.Jn(this.xn)},t.prototype.disconnect=function(){t.Qn(this.xn)},t.ao=Vs.isNavigationTimingObserverSupported()?t.no():null,t.uo=!1,t.co=new Set,t.ro=null,t}(),Ws=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.lo=null,n.vo=new $s((function(t){if(!n.lo){var i=n.do(t);i&&(n.lo=i,n.produceEvent(i))}})),n}return lr(n,t),n.prototype.onStart=function(){this.lo?this.produceEvent(this.lo):this.vo.observe()},n.prototype.onStop=function(){this.vo.disconnect()},n.prototype.do=function(t){var n=Vs.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:n,requestStart:Math.floor(n+t.requestStart),domInteractive:Math.floor(n+t.domInteractive)},timestamp:Ct()}},n}(es);!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(zs||(zs={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(Js||(Js={}));var Xs=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.wo(n.x)-this.wo(t.x),r=this.wo(n.y)-this.wo(t.y),e=n.time-t.time;return{duration:e,distance:this.po(i,r),direction:this.yo(i,r),velocity:this.mo(i,r,e)}},t.prototype.computePinchMetrics=function(t,n){var i=this.wo(n.x)-this.wo(t.x),r=this.wo(n.y)-this.wo(t.y);return{duration:n.time-t.time,distance:this.po(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.wo=function(t){return t/window.devicePixelRatio},t.prototype.po=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.mo=function(t,n,i){var r=i/1e3,e=t/r,s=n/r;return Math.round(Math.abs(e)+Math.abs(s))},t.prototype.yo=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?Js.RIGHT:Js.LEFT:n>0?Js.DOWN:Js.UP},t}(),Ys=function(){function t(){this.So={},this.bo=function(){},this.Ao=new Xs,this.Eo()}return t.isGestureDetectionSupported=function(){return void 0!==window.devicePixelRatio},t.prototype.onGesture=function(t){this.bo=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.Ro(t)){this.To(t)&&this.Eo();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Ct()};if(1===t.touches.length)this.So.startPinchTime=n.time,this.So.firstTouch=n;else if(2===t.touches.length&&(this.So.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Ct()},this.So.firstTouch&&this.So.secondTouch)){var i=this.Ao.computePinchMetrics(this.So.firstTouch,this.So.secondTouch);this.Oo=i.distance}csArray.prototype.push.call(this.ko,n),this.Co=nr(t)}},t.prototype.processActionMove=function(){this.Io=!0},t.prototype.processActionUp=function(t){if(this._o(t)){if(csArray.prototype.push.call(this.ko,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Ct()}),this.Po(t)&&this.So.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.So.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Ct()};this.So.firstTouch&&(this.So.firstTouch=n,this.So.secondTouch=i),this.xo(t)}this.Oo||this.Mo()&&this.Do(t)}},t.prototype.Eo=function(){this.ko=[],this.Co=null,this.Io=!1,this.Oo=null,this.Lo=!0},t.prototype.Do=function(t){var n=this.Ao.compute(this.ko[0],this.ko[1]);this.Lo=t.isTrusted;var i=this.Io?this.Uo(n):this.jo(n);if(this.qo(i.type,t.changedTouches)){var r=t.changedTouches[0];i.pageX=Ji(r.pageX,1),i.pageY=Ji(r.pageY,1)}this.bo(i,t)},t.prototype.xo=function(t){if(this.So.firstTouch&&this.So.secondTouch){var n=this.Ao.computePinchMetrics(this.So.firstTouch,this.So.secondTouch);this.Lo=t.isTrusted;var i=this.Ho(n);i&&this.bo(i,t)}},t.prototype.Ho=function(t){if(this.Oo&&!(this.Ao.getScale(this.Oo,t.distance)<.1))return{type:this.Oo>t.distance?zs.PINCH_IN:zs.PINCH_OUT,target:this.Co,distance:t.distance,isTrusted:this.Lo}},t.prototype.Uo=function(t){return{type:t.velocity<100?zs.DRAG:zs.FLICK,target:this.Co,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Lo}},t.prototype.jo=function(t){return{type:t.duration<1e3?zs.TAP:zs.LONG_PRESS,target:this.Co,isTrusted:this.Lo}},t.prototype.qo=function(t,n){return t===zs.TAP&&n&&1===n.length},t.prototype.To=function(t){return 1===t.touches.length},t.prototype.Mo=function(){return 2===this.ko.length},t.prototype.Ro=function(t){return t.touches.length>0},t.prototype._o=function(t){return t.changedTouches.length>0},t.prototype.Po=function(t){return this.Io&&!!this.Oo&&1===t.changedTouches.length&&1===t.touches.length},t}(),Ks=function(){function t(t){this.xn=t}return t.prototype.observe=function(){t.Bo&&t.Vo(this.xn)},t.prototype.disconnect=function(){t.Bo&&t.Fo(this.xn)},t.Go=function(n,i){t.co.forEach((function(t){return t(n,i)}))},t.Vo=function(n){t.co.has(n)||(t.co.add(n),1===t.co.size&&(t.zo.onGesture(t.Go),csArray.prototype.forEach.call(t.bs,(function(t){return Gi(t)}))))},t.Fo=function(n){t.co.delete(n),0===t.co.size&&csArray.prototype.forEach.call(t.bs,(function(t){return zi(t)}))},t.Jo=function(n){if(t.zo.isValidTouchEvent(n))switch(n.type){case"touchstart":t.zo.processActionDown(n);break;case"touchmove":t.zo.processActionMove();break;case"touchend":t.zo.processActionUp(n)}},t.bs=[{boundElement:document,type:"touchstart",listener:function(n){return t.Jo(n)}},{boundElement:document,type:"touchmove",listener:function(n){return t.Jo(n)}},{boundElement:document,type:"touchend",listener:function(n){return t.Jo(n)}}],t.Bo=Ys.isGestureDetectionSupported(),t.co=new Set,t.zo=new Ys,t}(),Zs=function(t){function n(){var n=t.call(this)||this;return n.$o=new Ks(n.Wo.bind(n)),n}return lr(n,t),n.prototype.onStart=function(){this.$o.observe()},n.prototype.onStop=function(){this.$o.disconnect()},n.prototype.Wo=function(t){var n=this.Xo(t);n&&this.produceEvent(n)},n.prototype.Xo=function(t){if(!this.Yo(t))return null;var n,i=(n=t.target,ur.getProperty(n,hr));return i?{type:"Gesture",targetId:i,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null},n.prototype.Yo=function(t){return null!==t.target&&!(f(t.target)&&gr.isSensitiveChild(t.target))},n}(es);function Qs(t){return"INPUT"===t.nodeName}function tu(t){return Qs(t)&&"number"===t.type}function nu(t){return Qs(t)&&("checkbox"===t.type||"radio"===t.type)}var iu,ru=function(t){function n(n){var i=t.call(this)||this;return i.we=n,i.Ko=$r(),i.Zo=function(t){return i.inputHandler(t)},i.Qo=[],i.tc(),i.nc(),i.rc=new Zr((function(t){for(var n=function(t){i.ec(t)&&Ce((function(){i.sc(t,ar(t))}))},r=0,e=t;r<e.length;r++){n(e[r])}})),i.ci=new Vi((function(t,n){switch(n){case"initial":case"added":Gi({type:"change",listener:i.Zo,boundElement:t});break;case"removed":zi({type:"change",boundElement:t,listener:i.Zo})}})),i}return lr(n,t),n.prototype.onStart=function(){Gi({type:"keyup",boundElement:document,listener:this.Zo}),Gi({type:"change",boundElement:document,listener:this.Zo}),Gn(this.Qo,(function(t){return t.activate()})),this.rc.observe(csArray.prototype.join.call(n.oc,",")),this.ci.observe()},n.prototype.onStop=function(){zi({type:"keyup",boundElement:document,listener:this.Zo}),zi({type:"change",boundElement:document,listener:this.Zo}),Gn(this.Qo,(function(t){return t.deactivate()})),this.rc.disconnect(),this.ci.disconnect(),this.Ko.clear()},n.prototype.sc=function(t,n){var i,r,e;if(!this.Ko.has(t))if(this.Ko.add(t),function(t){return"SELECT"===t.nodeName}(t)){var s={type:"InputEvent",inputType:"select",target:ar(t),selectedIndex:t.selectedIndex,timestamp:Ct()};this.produceEvent(s)}else if(nu(t)){var u={type:"InputEvent",inputType:"checkable",target:ar(t),checked:t.checked,timestamp:Ct()};this.produceEvent(u)}else{var o=function(t){return"TEXTAREA"===t.nodeName||Qs(t)&&!tu(t)&&!nu(t)}(t),c=tu(t);if(o||c){var h=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.we)||void 0===r?void 0:r.shouldEncrypt(t))return void(null===(e=this.we)||void 0===e||e.registerInputNodeToEncrypt({targetId:n,targetValue:h,date:Ct()}));var a=c?"0":"•",f={type:"InputEvent",inputType:"text",target:ar(t),value:csString.prototype.replace.call(h,/\S/g,a),timestamp:Ct()};this.produceEvent(f)}}},n.prototype.inputHandler=function(t){var n=this;if(this.isStarted){var i=nr(t),r=ar(i);r&&this.ec(i)&&Me.isConnected(i)&&Ce((function(){n.sc(i,r)}))}},n.prototype.tc=function(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")},n.prototype.nc=function(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)},n.prototype.trackChanges=function(t,n,i){var r=this;void 0===i&&(i=!1);var e=Bi(t.prototype,n,(function(t,n,e){if(e!==n&&Me.isConnected(t)){var s=i?t.parentElement:t;r.cc(s)}}));e&&csArray.prototype.push.call(this.Qo,e)},n.prototype.ec=function(t){return!gr.isSensitive(t)&&!gr.isSensitiveChild(t)&&(y(t)||b(t)||m(t))},n.prototype.cc=function(t){var n=this;if(this.isStarted&&Me.isConnected(t)){var i=ar(t);i&&this.ec(t)&&Ce((function(){n.sc(t,i)}))}},n.oc=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],dr([Sn()],n.prototype,"inputHandler",null),dr([yn()],n.prototype,"trackChanges",null),n}(es),eu=function(){function t(t){var n=this;this.xn=t,this.hc=!1,this.Ju={boundElement:window,type:"error",listener:function(t){return n.ac(t)}}}return t.prototype.observe=function(){Gi(this.Ju,this.hc)},t.prototype.disconnect=function(){zi(this.Ju,this.hc)},t.prototype.ac=function(t){this.xn(t)},t}(),su=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.fc=new eu((function(t){return n.lc(t)})),n}return lr(n,t),n.prototype.lc=function(t){var n=t.message,i=t.filename,r=t.lineno,e=t.colno;n=null!=n?n:"[NO ERROR MESSAGE]",this.produceEvent({type:"JSError",message:n,filename:i,lineno:r,colno:e})},n.prototype.onStart=function(){this.fc.observe()},n.prototype.onStop=function(){this.fc.disconnect()},n}(es),uu=function(t){function n(n){var i=t.call(this)||this;return i.vc=n,i.wc=1024,i}return lr(n,t),n.prototype.isListening=function(t){return"JSError"===t.type},n.prototype.processEvent=function(t){return t.message=os.truncate(t.message,this.wc,os.ELLIPSIS),this.vc(t)},n}(cs),ou=[],cu=!1;function hu(){for(var t=csDate.now(),n=0;n<ou.length;n++)if(ou[n](),csDate.now()-t>=35)return ou=csArray.prototype.slice.call(ou,n+1),void csSetTimeout(hu);ou=[],cu=!1}!function(t){t[t.Started=0]="Started",t[t.Stopped=1]="Stopped",t[t.Processing=2]="Processing",t[t.Completed=3]="Completed"}(iu||(iu={}));var au=function(){function t(){var t=this;this.yc=new bn,this.$i=iu.Stopped,this.xn=null,this.mc=function(n){t.$i!==iu.Stopped&&n&&(t.xn(n),t.gc())}}return t.prototype.start=function(t){if(this.xn)throw new Error("callback already set");this.$i=iu.Started,this.xn=t},t.prototype.push=function(t){this.yc.push(t),this.Sc()},t.prototype.stop=function(){this.xn=null,this.$i=iu.Stopped,this.yc.clear()},t.pipe=function(n,i){for(var r=n,e=new csArray,s=function(n){var i=new t;i.start((function(t){n.pushEvent(t)})),csArray.prototype.push.call(e,i),Gn(r,(function(t){return t.subscribe((function(t){return i.push(t)}))})),r=[n]},u=0,o=i;u<o.length;u++){s(o[u])}var c=new t;return Gn(r,(function(t){return t.subscribe((function(t){return c.push(t)}))})),c.stop=function(){t.prototype.stop.call(c),Gn(e,(function(t){return t.stop()}))},c},t.prototype.bc=function(){return this.$i===iu.Stopped},t.prototype.Ac=function(){return this.$i===iu.Processing},t.prototype.gc=function(){var t=this;this.bc()||(this.yc.isEmpty?this.$i=iu.Completed:(this.$i=iu.Processing,function(t){if(csArray.prototype.push.call(ou,t),!cu){for(var n=0;n<3;n++)csSetTimeout(hu);cu=!0}}((function(){var n=t.yc.pop();n instanceof Ae?n.complete(t.mc):t.mc(n)}))))},t.prototype.Sc=function(){this.bc()||this.Ac()||this.gc()},t}(),fu=function(){function t(t,n){void 0===n&&(n=[]),this.producers=t,this.processors=n,this.Wn=!1,this.co=[]}return t.prototype.start=function(){if(this.Wn)throw new Error("Recording is already started.");var t=this.co;this.yc=au.pipe(this.producers,this.processors),this.yc.start((function(n){return csArray.prototype.forEach.call(t,(function(t){return t(n)}))})),Gn(this.producers,(function(t){return t.start()})),Gn(this.processors,(function(t){return t.start()})),this.Wn=!0},t.prototype.stop=function(){this.yc.stop(),this.co.length=0;for(var t=0,n=this.producers;t<n.length;t++){n[t].stop()}for(var i=0,r=this.processors;i<r.length;i++){r[i].stop()}this.Wn=!1,this.co=[]},t.prototype.subscribe=function(t){var n=this;if(this.Wn)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.co,t),function(){return n.co=csArray.prototype.filter.call(n.co,(function(n){return n!==t}))}},t}(),lu=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot",D],vu=function(t){function n(n){var i=t.call(this)||this;return i.Ee=n,i}return J(n,t),n.prototype.subscribe=function(n){return t.prototype.subscribe.call(this,n)},n.prototype.onStart=function(){var t=this;Gn(this.Ee,(function(n){n.onEvent((function(n){return t.Fi(n)}))})),Gn(this.Ee,(function(t){var n;null===(n=t.start)||void 0===n||n.call(t)}))},n.prototype.onStop=function(){Gn(this.Ee,(function(t){var n;return null===(n=t.stop)||void 0===n?void 0:n.call(t)}))},n.prototype.Fi=function(t){this.produceEvent({timestamp:Ct(),type:"Legacy",originalEvent:t})},n}(es);function du(t){var n=function(t){var n={type:wu(t.type)};for(var i in t){var r=t[i];void 0!==r&&"type"!==i&&(n[i]=r)}return n}(t.data);return{type:Wi.GESTURE_RECOGNITION,args:[t.targetId,n],date:t.timestamp}}function wu(t){switch(t){case zs.DRAG:case zs.FLICK:return Ki.SWIPE;case zs.LONG_PRESS:return Ki.LONG_PRESS;case zs.TAP:return Ki.TAP;case zs.PINCH_IN:return Ki.PINCH_IN;case zs.PINCH_OUT:return Ki.PINCH_OUT}}var pu;function yu(t){return function(t,n){var i=[];return{push:function(t){csArray.prototype.push.call(i,t),i.length===n.batchSize&&this.flush()},flush:function(){if(i.length){var n=i;i=[],t(n)}}}}((function(n){var i={visibleInViewPort:n},r={type:Wi.TEXT_VISIBILITY,date:Ct(),args:[i]};t(r)}),{batchSize:20})}!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive",t.TIME_ORIGIN="timeOrigin"}(pu||(pu={}));$($({},{connectEnd:"ce",connectStart:"cs",decodedBodySize:"dbs",domainLookupEnd:"dle",domainLookupStart:"dls",duration:"d",fetchStart:"fs",initiatorType:"it",name:"n",nextHopProtocol:"nhp",redirectEnd:"re",redirectStart:"rs",requestStart:"rqs",responseEnd:"rse",responseStart:"rss",responseStatus:"rst",secureConnectionStart:"scs",startTime:"st",transferSize:"ts"}),{domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",loadEventEnd:"lee",loadEventStart:"les",type:"t"});var mu=0;var gu,Su=function(){function t(t,n,i,r,e){var s=this;this.Ec=t,this.Rc=n,this.Tc=i,this.Ne=r,this.ke=e,this.Oc=function(){},this.Nc=function(){},this.kc=yu((function(t){return s.Oc(t)}))}return t.prototype.start=function(){var t,n,i=this;this.Cc={processEvent:function(t,n){if(t.originalEvent.type===Wi.PERFORMANCE_RESOURCE_TIMING)return mu>=500?null:(mu+=1,n($($({},t.originalEvent),{date:t.timestamp})));n(t.originalEvent)},reset:function(){mu=0}},this.Ec.subscribe((function(t){var n,r,e,s,u,o=t,c=o.timestamp;switch(o.type){case"Legacy":i.Cc.processEvent(o,i.Oc);break;case"CustomElementRegistration":i.Oc({type:Wi.CUSTOM_ELEMENT_REGISTRATION,date:c,args:[o.tagName]});break;case"DomEvent":!function(t,n,i){var r=t.timestamp;switch(t.domEvent){case"initialDOM":var e=t.initialDOM,s={type:Wi.INITIAL_DOM,date:r,args:[e]};i.emitInitialDomDone(s);break;case"nodesAdded":csArray.prototype.forEach.call(t.nodes,(function(i){n({type:Wi.MUTATION_INSERT,date:r,args:[t.target,t.nextSibling,i]})}));break;case"nodesMoved":for(var u=0,o=t.nodesIds;u<o.length;u++){var c=o[u];n({type:Wi.MUTATION_MOVE,date:r,args:[c,t.nextSibling,t.target]})}break;case"nodesRemoved":csArray.prototype.forEach.call(t.nodesIds,(function(t){n({type:Wi.MUTATION_REMOVE,date:r,args:[t]})}));break;case"attributeChanged":var h=t.target,a=t.namespace,f=t.attribute,l=t.newValue;n({type:Wi.MUTATION_ATTRIBUTE,date:r,args:[h,a,f,l]});break;case"characterDataChanged":h=t.target,l=t.newValue,n({type:Wi.MUTATION_CHARACTER_DATA,date:r,args:[h,l]});break;case"cssRuleInserted":h=t.target;var v=t.rule,d=Ht(w=t.index)?[h,v,w]:[h,v];n({type:Wi.STYLESHEET_RULE_INSERT,date:r,args:d});break;case"cssRuleDeleted":h=t.target;var w=t.index;n({type:Wi.STYLESHEET_RULE_DELETE,date:r,args:[h,w]});break;case"cssRuleUpdated":h=t.target,v=t.rule,w=t.index,n({type:Wi.STYLESHEET_RULE_UPDATE,date:r,args:[h,v,w]});break;case"shadowRootAttached":h=t.target;var p=t.shadowRoot;n({type:Wi.ATTACH_SHADOW,date:r,args:[h,p]});break;case"adoptedStyleSheetRegistered":var y=t.sheetId,m=t.cssRules;n({type:Wi.REGISTER_ADOPTED_STYLE_SHEET,date:r,args:[y,{cssRules:m}]});break;case"adoptedStyleSheetsSet":h=t.target;var g=t.sheetsIds;n({type:Wi.SET_ADOPTED_STYLE_SHEETS,date:r,args:[h,g]});break;case"adoptedStyleSheetRuleInserted":y=t.sheetId,v=t.rule,d=Ht(w=t.index)?[y,v,w]:[y,v],n({type:Wi.ADOPTED_STYLESHEET_RULE_INSERT,date:r,args:d});break;case"adoptedStyleSheetRuleDeleted":y=t.sheetId,w=t.index,n({type:Wi.ADOPTED_STYLESHEET_RULE_DELETE,date:r,args:[y,w]});break;case"adoptedStyleSheetRuleUpdated":d=[y=t.sheetId,v=t.rule,w=t.index],n({type:Wi.ADOPTED_STYLESHEET_RULE_UPDATE,date:r,args:d});break;default:wn.error("translateDOMEvent: DOMEvent not supported")}}(o,i.Oc,i.Rc);break;case"InputEvent":var h=function(t){switch(t.inputType){case"text":return{type:Wi.INPUT_TEXT,args:[t.target,t.value],date:t.timestamp};case"select":return{type:Wi.INPUT_SELECT,args:[t.target,t.selectedIndex],date:t.timestamp};case"checkable":return{type:Wi.INPUT_CHECKABLE,args:[t.target,t.checked],date:t.timestamp}}}(o);null===(n=i.Nc)||void 0===n||n.call(i,h);break;case"encryptedCharacterDataChanged":var a=o.target,f=o.rawData,l=o.encryptedData,v=o.encryptionMetadata;i.Oc({type:Wi.MUTATION_ENCRYPTED_CHARACTER_DATA,date:c,args:[a,f,l,v]});break;case"StaticResource":var d=o.url;i.Oc({type:Wi.STATIC_RESOURCE_URL,date:c,args:[d]});break;case"ResizeSensitiveElement":a=o.target;var w=o.width,p=o.height;i.Oc({type:Wi.MUTATION_ATTRIBUTE,date:c,args:[a,"","style","width:".concat(w,"px !important;height:").concat(p,"px !important;")]});break;case"Gesture":var y=du(t);null===(r=i.Nc)||void 0===r||r.call(i,y);break;case"TextVisibility":i.kc.push(o.text);break;case"StaticResourceManagerEvent":null===(e=i.Tc)||void 0===e||e.processEvent(o);break;case"screenResize":w=o.width,p=o.height;var m={type:Wi.SCREEN_RESIZE,date:c,args:[w,p]};i.Oc(m);break;case"viewportResize":w=o.width,p=o.height;var g={type:Wi.RESIZE,date:c,args:[w,p]};i.Oc(g);break;case"PerformanceTiming":i.Oc(function(t){return{type:Wi.PERFORMANCE_TIMINGS,args:[{performanceTiming:pu.REQUEST_START,timestamp:t.timings.requestStart},{performanceTiming:pu.DOM_INTERACTIVE,timestamp:t.timings.domInteractive},{performanceTiming:pu.TIME_ORIGIN,timestamp:t.timings.timeOrigin}],date:t.timestamp}}(o));break;case"CustomError":(S=null===(s=i.ke)||void 0===s?void 0:s.translate(o))&&i.Oc(S);break;case"JSError":var S;(S=null===(u=i.Ne)||void 0===u?void 0:u.translate(o))&&i.Oc(S);break;case"Debug":i.Oc({type:Wi.DEBUG,date:c,args:[o.key,o.value]});break;case"warning":wn.warn(o.message);break;default:wn.error("WebRecorderEventTranslator: Event not supported (".concat(o.type,")"))}})),this.Rc.emitInitialDomStart(),null===(t=this.Ne)||void 0===t||t.start(),null===(n=this.ke)||void 0===n||n.start(),this.Ec.start()},t.prototype.stop=function(){var t,n,i;this.reset(),this.flush(),this.Ec.stop(),null===(t=this.Tc)||void 0===t||t.flushEvents(),null===(n=this.Ne)||void 0===n||n.stop(),null===(i=this.ke)||void 0===i||i.stop()},t.prototype.flush=function(){this.kc.flush()},t.prototype.onEvent=function(t,n){var i,r=this;this.Oc=t,this.Nc=n,null===(i=this.Tc)||void 0===i||i.onEvent((function(t){return r.Oc(t)}))},t.prototype.reset=function(){this.Cc.reset()},t}(),bu=function(){function t(t){void 0===t&&(t=100),this.Ic=t,this._c={},this.Pc=null,this.Gr="original-resource-name"}return t.prototype.onEvent=function(t){this.xc=t},t.prototype.processEvent=function(t){this.Mc(t.resourceId,t.resource.hash,t.originalResourceName),this.Dc(t)},t.prototype.flushEvents=function(){this.Pc&&csClearTimeout(this.Pc),this.Lc()},t.prototype.onSendStaticResource=function(t){this.Dc=t},t.prototype.Lc=function(){if(Object.keys(this._c).length){var t={type:Wi.RESOURCE_HASHES,date:Ct(),args:[this._c]};this.Pc=null,this._c={},this.xc(t)}},t.prototype.Mc=function(t,n,i){var r=this,e=n;i&&(e+="?".concat(this.Gr,"=").concat(i)),this._c[t]=e,this.Pc||(this.Pc=window.csSetTimeout((function(){return r.Lc()}),this.Ic))},t}();function Au(t,n){var i,r,e,s,u=null,o=function(c){var h=Ct();if(!c&&null!==u){var a=n-(h-u);if(a>0)return void(r=window.csSetTimeout(o,a))}var f=h-e;r=null,u=null,e=null,s=t.apply(void 0,Ni([f],i,!1))},c=function(){for(var t=[],c=0;c<arguments.length;c++)t[c]=arguments[c];if(i=Ni([],t,!0),!e)return e=Ct(),r=window.csSetTimeout(o,n),s;u=Ct()};return c.flushPending=function(){r&&(window.csClearTimeout(r),o(!0))},c.cancel=function(){u=null,e=null,r&&(window.csClearTimeout(r),r=null)},c}function Eu(t){return void 0===t&&(t=0),function(n,i,r){var e=r.value,s=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];s||(s=!0,csSetTimeout((function(){s=!1,e.apply(n,i)}),t))}}}!function(t){t[t.NOT_EXIST=2]="NOT_EXIST"}(gu||(gu={}));var Ru,Tu,Ou=function(t){function n(n,i,r){var e=t.call(this)||this;return e.Tc=n,e.Uc=i,e.jc=r,e.qc={},e.Hc=new Set,e.Ac=!1,e}return J(n,t),n.prototype.initState=function(){var t=this;_t()&&(this.Bc=this.jc.getRequestParameters(),this.Vc="".concat(this.Uc,"/exist?").concat(ot.toQuery(this.Bc)),this.Fc="".concat(this.Uc,"/putTag?").concat(ot.toQuery(this.Bc)),this.Gc=Au((function(){return Y(t,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:if(this.Ac)return this.Gc(),[2];this.Ac=!0,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,this.zc()];case 2:return t.sent(),[3,4];case 3:return this.Ac=!1,[7];case 4:return[2]}}))}))}),300),this.Tc.onSendStaticResource((function(n){t.Jc(n)})))},n.prototype.onStart=function(){},n.prototype.onStop=function(){},n.prototype.onIframeStaticResource=function(t){this.Jc(t)},n.prototype.Jc=function(t){var n=this;this.$c(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,(function(t){n.$c(t.hash,t.data)}))},n.prototype.$c=function(t,n){this.Hc.has(t)||(this.Hc.add(t),this.qc[t]=n,this.Gc())},n.prototype.zc=function(){return Y(this,void 0,void 0,(function(){var t,n,i,r=this;return K(this,(function(e){switch(e.label){case 0:return t=this.qc,this.qc={},[4,this.Wc(t)];case 1:return(n=e.sent()).length?(i=this.Xc(n),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return window.fetch(r.Fc,{method:"POST",body:t})})))]):[2];case 2:return e.sent(),[2]}}))}))},n.prototype.Yc=function(t){return Y(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(n=Object.keys(t)).length?(i={projectId:this.Bc.pid,filter:gu.NOT_EXIST,hashes:n,touch:!0},[4,window.fetch(this.Vc,{method:"POST",body:csJSON.stringify(i)})]):[2,[]];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},n.prototype.Wc=function(t){return Y(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return n=[],[4,this.Yc(t)];case 1:return i=r.sent(),csArray.prototype.forEach.call(i,(function(i){var r=t[i];r?csArray.prototype.push.call(n,{hash:i,data:r}):wn.warn("SRM: received unknown hash: "+i)})),[2,n]}}))}))},n.prototype.Xc=function(t){for(var n=0,i=[new FormData],r=0,e=t;r<e.length;r++){var s=e[r],u=s.data,o=s.hash,c=i.length-1;if((n+=u.size)<8388608)i[c].append("",u,o);else{var h=new FormData;h.append("",u,o),n=u.size,csArray.prototype.push.call(i,h)}}return i},n}(Pr),Nu=function(){function t(t){this.Kc=t,this.Zc=20,this.Qc=0,this._i=!1}return t.prototype.translate=function(t){if(this.Qc>=this.Zc)return this.Kc.stop(),null;this.Qc+=1;var n=t.filename,i=t.message,r=t.lineno,e=t.colno,s=t.timestamp;return{type:Wi.JAVASCRIPT_ERROR,date:s,args:[{errorType:"jsError",message:i,filename:n,lineno:r,colno:e}]}},t.prototype.start=function(){this._i||(this.Qc=0,this._i=!0)},t.prototype.stop=function(){this._i=!1},t}(),ku="v2/recording",Cu=["setCapturedElementsSelector"],Iu=["setEncryptionSelectors"],_u=["isRecording"],Pu=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],xu=["replay:resourceManager:getStatus","cssrm:getStatus"],Mu=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,l,v,d,w,p,y,m,g){this.th=t,this.Z=n,this.j=i,this.Bc=r,this.nh=e,this.q=s,this.fe=u,this.ge=o,this.Ae=c,this.le=h,this.ve=a,this.de=f,this.Rc=l,this.ih=v,this.rh=d,this.eh=w,this.uh=p,this.oh=y,this.Oe=m,this.hh=g}return t.prototype.init=function(){var t=this,n=[],i=[];csArray.prototype.push.call(i,new Cs),this.ah=new Us(this.hh.shouldUseAnonymization(),this.fh(),(function(n){return t.q.checkAndAnonymizePII(n,t.j.anonymizeDigits,t.j.anonymizeEmails)})),this.ph();var r=new ks("csPersisted");this.yh(r);var e=new Ir;this.oe=new Cr;var s=new Rs;csArray.prototype.push.call(n,s),this.j.useStaticResourceManager&&ps.isSupported()&&(this.Te=new ps,this.Tc=new bu,this.mh=new Ou(this.Tc,this.j.getStaticResourceManagerUri(),this.Bc),this.rh.addListener(this.mh),csArray.prototype.push.call(i,this.Te));var u=new gs(e,this.Bc,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}},{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.Z.getRecordingStates(),",")}}}),o=new Ts("".concat(this.j.getRecordingUri(),"/").concat(ku));csArray.prototype.push.call(i,this.ah),csArray.prototype.push.call(i,new qs),this.ae=new Nr,this.ae.init(),this.ye=new ms(r,o,this.pe),csArray.prototype.push.call(n,new Ss(window.location,this.q));var c=new us,h=[new Hs({version:"15.12.0",visibilityState:document.visibilityState}),this.Ae,c,new vu(csArray.prototype.filter.call(n,(function(t){return t}))),new Fs,new Gs,new Ws,new Zs,new ru(this.we)];this.j.jsErrorsEnabled&&(this.Kc=new su,this.gh=new uu((function(n){return t.le.anonymize(n)})),this.Ne=new Nu(this.Kc),csArray.prototype.push.call(h,this.Kc),csArray.prototype.push.call(i,this.gh));var a=new fu(h,i),f=new Su(a,this.Rc,this.Tc,this.Ne,this.ke);this.recordingService=new ys(this.j,this.oe,u,e,this.ae,this.fe,this.Z,this.le,this.ve,this.de,this.we,this.pe,this.ye,this.ge,o,f,this.Ae,n,c,this.Te,this.Oe,this.Ne,this.ke),this.ih.addListener(this.recordingService),this.rh.addListener(this.recordingService),this.recordingService.init(),this.nh.register(_u,(function(){return t.Z.isReplayRecorded()&&!t.eh.isUrlExcludedForSessionReplay()})),this.nh.register(Cu,(function(n){Xr.setWhitelistedElementsSelector(n),t.Rc.emitRecordingStatusChange()})),this.nh.register(Pu,(function(){t.recordingService.activateOnlineAssetsOnNextPageview(),t.Rc.emitRecordingStatusChange()})),this.nh.register(xu,(function(){return t.recordingService.getStaticResourceManagerStatus()})),this.th.enableRecordingStatus(this.recordingService,this.ge,this.hh,this.Z,this.we)},t.prototype.fh=function(){var t=new Set;return csArray.prototype.forEach.call(lu,(function(n){t.add(n)})),csArray.prototype.forEach.call(this.j.whitelistedAttributes,(function(n){t.add(n)})),t},t.prototype.onAfterNaturalPageView=function(){var t;null===(t=this.mh)||void 0===t||t.initState()},t.prototype.onStartTracking=function(){this.ye.recover(),this.ph(),this.Z.isReplayRecorded()&&!this.eh.isUrlExcludedForSessionReplay()&&(this.Z.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Sh())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.Z.isReplayRecorded()||this.eh.isUrlExcludedForSessionReplay()||this.Z.isTemporarilyRecorded()||this.ye.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.ph(),this.Z.isReplayRecorded()&&!this.eh.isUrlExcludedForSessionReplay()?(this.Z.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.bh()):this.Ah()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.Ah()},t.prototype.onOptout=function(){this.Ah(),this.recordingService.onOptOut()},t.prototype.onReplayUnanonymizationConsentGranted=function(){this.ph(),this.recordingService.triggerUnanonymizationConsentGranted(),this.Rc.emitRecordingStatusChange()},t.prototype.onReplayUnanonymizationConsentWithdrawn=function(){this.ph(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.Rc.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){t===Yn.NOT_RECORDED&&n===Kn.ETR_OFF?(this.recordingService.clearEvents(),this.Ah()):(this.pe.setQueryParams({rt:csArray.prototype.join.call(this.Z.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents())},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),this.ye.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.ye.allowSendingLastMessage(),this.ae.start(),this.recordingService.pushEvents()},t.prototype.onAfterReplayRecordingConsentGranted=function(){this.Z.isReplayRecorded()&&!this.eh.isUrlExcludedForSessionReplay()&&(this.Z.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Sh(),this.recordingService.triggerRecordingForSessionGranted())},t.prototype.onAfterReplayRecordingConsentWithdrawn=function(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Ah())},t.prototype.Sh=function(){this.recordingService.updateStaticResourceManagerOnlineAssets(),this.recordingService.start(),this.ye.start(),this.Rc.emitRecordingStatusChange()},t.prototype.Ah=function(){var t;void 0===t&&(t=!1),t&&(cr=1),hr=csSymbol("nodeIdentifier"),this.recordingService.stop(),this.ye.stop(),this.Rc.emitRecordingStatusChange()},t.prototype.bh=function(){this.Ah(),this.Sh()},t.prototype.yh=function(t){this.pe=this.uh.create("".concat(this.j.getRecordingUri(),"/").concat(ku),!0,"byteArray",t,["rt","v","pid","pn","sn","uu"])},t.prototype.ph=function(){var t,n=this.hh.shouldUseAnonymization();this.ah.setAnonymization(n),null===(t=this.Eh)||void 0===t||t.setAnonymization(n)},X([Pn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),X([Pn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}();!function(t){t[t.NOT_NEEDED=1]="NOT_NEEDED",t[t.NOT_EXPRESSED=2]="NOT_EXPRESSED",t[t.WITHDRAWN=3]="WITHDRAWN",t[t.GRANTED=4]="GRANTED"}(Ru||(Ru={})),function(t){t.isReplayConsentNeeded=function(t){return t.replayConsentRequiredForSession},t.isRecordingBlockedByConsent=function(t){return t.recordingState===Yn.BLOCKED_BY_CONSENT_NOT_EXPRESSED||t.recordingState===Yn.BLOCKED_BY_CONSENT_WITHDRAWN},t.isRecordingWithDrawn=function(t){return t.recordingState===Yn.BLOCKED_BY_CONSENT_WITHDRAWN}}(Tu||(Tu={}));var Du=function(){function t(t,n,i,r){this.K=t,this.Z=n,this.j=i,this.Rh=r,this.Th=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Th},t.prototype.setNaturalPageViewSent=function(t){this.Th=t},t.prototype.getTrackingContext=function(){var t=this.Z.getSession();if(!t)return null;var n=this.getSessionKey();if(!n)return null;var i=this.Oh(t),r=this.Nh(),e=this.kh(),s=this.Ch();return{projectId:r,sessionKey:n,pageNumber:i,pageViewType:e,isRecording:this.Ih(),uxaDomain:s,recordingConsentState:this._h(t)}},t.prototype.getSessionKey=function(){var t=this.K.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype._h=function(t){return Tu.isReplayConsentNeeded(this.j)?t.recordingState===Yn.BLOCKED_BY_CONSENT_NOT_EXPRESSED?Ru.NOT_EXPRESSED:t.recordingState===Yn.BLOCKED_BY_CONSENT_WITHDRAWN?Ru.WITHDRAWN:Ru.GRANTED:Ru.NOT_NEEDED},t.prototype.Oh=function(t){return t.pageNumber},t.prototype.Nh=function(){return this.j.projectId},t.prototype.kh=function(){return this.Rh.getPageViewType()},t.prototype.Ch=function(){return this.j.uxaDomain},t.prototype.Ih=function(){return this.Z.isReplayRecorded()},t}(),Lu=function(){function t(t){this.Ph=t,this.xh=[]}return t.prototype.handleCommand=function(t){if(Vt(t)&&(this.Mh(t),this.Ph.isNaturalPageViewSent())){var n=this.Ph.getTrackingContext();null!==n&&this.Dh(t,n)}},t.prototype.Mh=function(t){csArray.prototype.push.call(this.xh,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.Ph.getTrackingContext();null!==n&&csArray.prototype.map.call(this.xh,(function(i){return t.Dh(i,n)}))},t.prototype.Dh=function(t,n){csSetTimeout((function(){t(n)}))},t}(),Uu=function(){function t(t){this.Ph=t,this.Lh=[]}return t.prototype.handleCommand=function(t){return this.Ph.isNaturalPageViewSent()?this.Uh(t):void this.jh(t)},t.prototype.Uh=function(t){var n=this.Ph.getSessionKey();return this.qh(t)&&null!==n&&this.Dh(t.callback,n),n},t.prototype.jh=function(t){this.qh(t)&&csArray.prototype.push.call(this.Lh,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.Ph.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.Lh,(function(i){t.Dh(i,n)})),this.Lh=[]},t.prototype.qh=function(t){return t&&"function"==typeof t.callback},t.prototype.Dh=function(t,n){csSetTimeout((function(){t(n)}))},t}(),ju=function(){function t(t,n){this.Hh=t,this.Ph=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=this.Ph.getTrackingContext();null!==n&&this.Hh.sendToChildren(hn.TrackingContextResultMessage,$($({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.Ph.isNaturalPageViewSent()){var n=this.Ph.getTrackingContext();null!==n&&(t.trackingContext=n,this.Hh.sendToChildren(hn.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.Ph.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:on.AfterPageView};this.Hh.sendToChildren(hn.IntegrationCallback,n)}},t}();function qu(t,n){var i,r=t.isRecording,e=t.pageNumber,s=t.projectId,u=t.uxaDomain,o=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&o){var c=o[1],h=o[2];i="".concat(u,"/quick-playback/index.html?pid=").concat(s,"&uu=").concat(c,"&sn=").concat(h,"&pvid=").concat(e,"&recordingType=cs"),n.withTimestamp&&(i+="&t=".concat(Ct()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}var Hu,Bu,Vu=function(){function t(t){this.Ph=t}return t.prototype.handleCommand=function(t,n){qt(t)&&Vt(n)&&this.Dh(t,n)},t.prototype.Dh=function(t,n){var i=this;csSetTimeout((function(){var r=i.Ph.getTrackingContext();if(r){var e=qu(r,t);n(e)}}))},t}(),Fu=function(){function t(){this.xh=new Set}return t.prototype.handleCommand=function(t,n){var i=this;return Vt(t)?this.xh.has(t)?null:(this.xh.add(t),n&&(this.yu=n,this.Bh(t,n)),function(){return i.xh.delete(t)}):null},t.prototype.executeCallbacks=function(t){var n=this;this.Vh(t)&&(this.yu=t,this.xh.forEach((function(i){return n.Bh(i,t)})))},t.prototype.Bh=function(t,n){csSetTimeout((function(){try{t(n)}catch(t){}}))},t.prototype.Vh=function(t){var n=t.isRecording,i=t.recordingStartTimestamp,r=t.etrState;return this.yu&&(this.yu.isRecording!==n||this.yu.recordingStartTimestamp!==i||this.yu.etrState!==r)},t}(),Gu=["afterPageView"],zu=["getSessionKey"],Ju=["onRecordingStateChange"],$u=["replay:link:generate"],Wu=function(){function t(t,n,i,r,e,s,u,o){this.K=t,this.Z=n,this.nh=i,this.Fh=r,this.Hh=e,this.j=s,this.Rh=u,this.th=o}return t.prototype.init=function(){var t=this;this.Ph=new Du(this.K,this.Z,this.j,this.Rh),this.Gh=new Lu(this.Ph),this.zh=new Uu(this.Ph),this.Jh=new Fu,this.$h=new Vu(this.Ph),this.Wh=new ju(this.Hh,this.Ph),this.Fh.addListener(this.Wh),this.nh.register(zu,(function(n){return t.zh.handleCommand(n)})),this.nh.register(Gu,(function(n){return t.Gh.handleCommand(n)})),this.nh.register(Ju,(function(n){t.Jh.handleCommand(n,t.th.getRecordingStatus())})),this.nh.register($u,(function(n,i){t.Xh&&t.$h.handleCommand($($({},n),{recordingStartTimestamp:t.th.getRecordingStatus().recordingStartTimestamp}),i)}))},t.prototype.onAfterNaturalPageView=function(){this.Ph.setNaturalPageViewSent(!0),this.zh.flushPendingCallbacks(),this.Gh.executeRegisteredCallbacks(),this.Wh.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.Gh.executeRegisteredCallbacks(),this.Wh.sendAfterPageViewCallbackToChildren()},t.prototype.onRecordingStateChange=function(){this.Jh.executeCallbacks(this.th.getRecordingStatus())},t.prototype.onRecordingStatusChange=function(){this.Jh.executeCallbacks(this.th.getRecordingStatus())},t.prototype.setRecordingService=function(t){this.Xh=t},X([Eu()],t.prototype,"onRecordingStateChange",null),X([Eu()],t.prototype,"onRecordingStatusChange",null),t}(),Xu=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=jt(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return jt(t)&&(jt(n)||Ut(n))},t}(),Yu=function(t){function n(n,i){var r=t.call(this)||this;return r.Yh=n,r.q=i,r.Kh=[],r}return J(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Kh,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.Kh=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?Xu.isValid(t,n)&&this.Yh.add(new Xu(this.q.anonymizePII(t),this.q.anonymizePII(n))):csArray.prototype.push.call(this.Kh,{key:t,value:n})},n}(Pr),Ku=function(){function t(t){this.Zh=t,this.Yh=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.Yh,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.Yh=[]},t.prototype.onBatchReady=function(t){this.Qh=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.Yh;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.Zh.compressSync(csJSON.stringify(t),"base64"),ct:this.Zh.algorithm}},t.prototype.setBatchReadyCall=function(){this.Qh()},X([Eu(),yn("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),Zu=["trackDynamicVariable"],Qu=function(){function t(t,n,i,r,e,s){this.nh=t,this.Z=n,this.j=i,this.Bc=r,this.Zh=e,this.q=s,this.D=new vt(this.j.getTrackerUri(),"dvar"),this.Yh=new Ku(this.Zh),this.ta=new Yu(this.Yh,this.q)}return t.prototype.init=function(){var t=this;this.D.setRequestParametersProviders(this.Bc,this.Yh),this.Z.setDynamicVariablesService(this.ta),this.Yh.onBatchReady((function(){return t.D.send()})),this.D.after((function(){return t.Yh.clear()})),this.nh.register(Zu,(function(n){var i=void 0===n?{}:n,r=i.key,e=i.value;t.ta.trackDynamicVariable(r,e)}))},t.prototype.onStartTracking=function(){this.ta.start()},t}(),to=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),jt(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return Bt(t)&&Lt(t.revenue)&&jt(t.currency)&&t.currency.length<=10&&(!Bt(t.id)||jt(t.id))},t}(),no=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.na(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return Ht(n.sku)&&(i.sku=n.sku),Ht(n.category)&&(i.category=n.category),Ht(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.na=function(t){return Bt(t)&&jt(t.id)&&jt(t.name)&&Lt(parseFloat(t.price))&&Ut(parseInt(t.quantity,10))&&(!Ht(t.sku)||jt(t.sku))&&(!Ht(t.category)||jt(t.category))&&(!Ht(t.merchant)||jt(t.merchant))},t}(),io=function(){function t(t,n,i){this.q=t,this.ia=n,this.fe=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.q.anonymizeFields(t,["id"]);this.ra=to.from(n)},t.prototype.getTransaction=function(){return this.ra},t.prototype.sendTransaction=function(){null!==this.ia&&null!==this.fe&&(this.fe.refreshSession(),this.fe.isSessionValid()&&(this.ra.hasValidRevenue()?this.ia.send():wn.warn("Transaction Service: unable to send transaction with invalid parameters")))},t.prototype.addItem=function(t){if(!Vt(t)){var n=this.q.anonymizeFields(t,["id","name","sku","category"]),i=no.from(n);null!==i&&csArray.prototype.push.call(this.ea,i)}},t.prototype.getItems=function(){return this.ea},t.prototype.clear=function(){this.ra=to.from({revenue:NaN}),this.ea=[]},t.prototype.getRequestParameters=function(){var t={id:this.ra.id?"".concat(this.ra.id):"",revenue:"".concat(this.ra.revenue)};return Ht(this.ra.tax)&&(t.tax="".concat(this.ra.tax)),Ht(this.ra.shipping)&&(t.shipping="".concat(this.ra.shipping)),Ht(this.ra.currency)&&(t.cu="".concat(this.ra.currency)),t.items=window.csJSON.stringify(this.ea),t},t}(),ro=function(){function t(t,n){this.sa=t,this.fe=n,this.ua=null}return t.prototype.addToCart=function(t){var n={};jt(t.sku)&&(n.sku=csString.prototype.slice.call(t.sku,0,100)),jt(t.merchant)&&(n.merchant=csString.prototype.slice.call(t.merchant,0,100)),(n.sku||n.merchant)&&(this.ua=n,this.sendCartItem())},t.prototype.getCartItem=function(){return this.ua},t.prototype.sendCartItem=function(){this.fe.refreshSession(),this.fe.isSessionValid()&&this.sa.send()},t.prototype.clear=function(){this.ua=null},t.prototype.getRequestParameters=function(){if(!this.ua)return{};var t={};return jt(this.ua.sku)&&this.ua.sku.length>0&&(t.sku=this.ua.sku),jt(this.ua.merchant)&&this.ua.merchant.length>0&&(t.me=this.ua.merchant),t},t}(),eo=["ecommerce:addToCart","ec:cart:add"],so=["ecommerce:addTransaction","ec:transaction:create"],uo=["ecommerce:addItem","ec:transaction:items:add"],oo=["ecommerce:send","ec:transaction:send"],co=function(){function t(t,n,i,r,e,s,u){this.j=t,this.jc=n,this.K=i,this.nh=r,this.q=e,this.fe=s,this.ot=u}return t.prototype.init=function(){var t=new vt(this.j.getTrackerUri(),"transaction"),n=new vt(this.j.getTrackerUri(),"addtocart"),i=new io(this.q,t,this.fe),r=new ro(n,this.fe),e=new gs(this.jc,this.K,this.ot,i);t.setRequestParametersProviders(e),t.after((function(){i.clear()}));var s=new gs(this.jc,this.K,this.ot,r);n.setRequestParametersProviders(s),n.after((function(){r.clear()})),this.nh.register(so,(function(t){i.addTransaction(t)})),this.nh.register(uo,(function(t){return i.addItem(t)})),this.nh.register(oo,(function(){return i.sendTransaction()})),this.nh.register(eo,(function(t){r.addToCart(t)}))},t}(),ho=function(){function t(t){this.oa=t.performance}return t.prototype.getRequestParameters=function(){if(this.ca())return{};var t=this.ha();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.ha=function(){var t=this.oa.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.ca=function(){return!(this.oa&&this.oa.timing&&this.oa.timing.loadEventEnd>0)},t}();function ao(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.DEAD_CLICK=30]="DEAD_CLICK",t[t.DEAD_ZOOM=31]="DEAD_ZOOM",t[t.PAGE_RELOAD=32]="PAGE_RELOAD",t[t.THRASHED_CURSOR=33]="THRASHED_CURSOR",t[t.BLANK_PAGE=34]="BLANK_PAGE",t[t.EXTERNAL_EVENT=35]="EXTERNAL_EVENT"}(Hu||(Hu={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(Bu||(Bu={}));var fo,lo=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),vo=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),wo=function(t){function n(n){var i=t.call(this)||this;return i.aa=n,i.supportedEventTypes=[Hu.MOUSEDOWN,Hu.MOUSEUP,Hu.CLICK,Hu.MOUSEOVER,Hu.TAP,Hu.DRAG,Hu.FLICK],i}return J(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.aa.getEventTargetPath(t)),n},n}(vo),po=function(){function t(t,n,i,r){this.j=t,this.aa=n,this.fa=i,this.nr=r,this.va=[],csArray.prototype.push.call(this.va,new wo(this.aa))}return t.prototype.processGesture=function(t,n){switch(t.type){case zs.TAP:this.da(n);break;case zs.FLICK:this.wa(t,n);break;case zs.DRAG:this.pa(t,n)}},t.prototype.da=function(t){var n={type:Hu.TAP,ts:0,x:0,y:0,tgt:""},i=lo.build(t,n,this.va);i.tgt!==B.INVALID_ELEMENT&&this.As(i)},t.prototype.pa=function(t,n){var i,r,e={type:Hu.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this.nr)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.nr)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=lo.build(n,e,this.va);s.tgt!==B.INVALID_ELEMENT&&this.As(s)},t.prototype.wa=function(t,n){var i,r,e={type:Hu.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this.nr)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.nr)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=lo.build(n,e,this.va);s.tgt!==B.INVALID_ELEMENT&&this.As(s)},t.prototype.onEvent=function(t){this.As=t},t.prototype.start=function(){var n=this;this.fa.subscribe(t.ya,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.fa.unsubscribe(t.ya)},t.ya="AnalysisGestureTracker",X([Sn()],t.prototype,"processGesture",null),t}();!function(t){t.getRelativePosition=function(t){var n=nr(t);if(!(n&&f(n)&&Vt(n.getBoundingClientRect)&&Bt(t.pageX)&&Bt(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-Pe.windowOffsetX(),e=t.pageY-i.top-Pe.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,e+=n.scrollTop);var s=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/s*65535),yRel:Math.round(e/u*65535),valid:!0}}}(fo||(fo={}));var yo,mo,go,So,bo,Ao,Eo=function(t){function n(n,i){var r=t.call(this)||this;return r.P=n,r.aa=i,r.supportedEventTypes=[Hu.MOUSEMOVE,Hu.CLICK],r.ma="",r}return J(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=fo.getRelativePosition(t),r=i.valid,e=i.xRel,s=i.yRel;if(r){var u=this.aa.getEventTargetPath(t);u!==B.INVALID_ELEMENT&&(n.xRel=e,n.yRel=s,n.type===Hu.MOUSEMOVE&&(u!==this.ma||this.P.iframesTracking?(this.ma=u,n.tgtHM=u):n.tgtHM=""))}else n.type===Hu.MOUSEMOVE&&(this.ma="");return n},n}(vo),Ro=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[Hu.CHANGE],n.ga=["text","email","number","search","tel","url","password"],n}return J(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=nr(t);return y(i)&&csArray.prototype.indexOf.call(this.ga,i.type)>=0&&(n.isBlank=""===i.value),n},n}(vo),To=function(){function t(t,n,i){var r=this;this.P=t,this.aa=n,this.Sa=i,this.ba="select, select *, input, textarea",this.Aa="select, select *, input, textarea",this.Ea="a, a *, button, button *, select, select *, input, textarea",this.Ra="input, select, textarea",this.Ta=150,this.Oa=400,this.Na=!1,this.ka=Au((function(t,n){return r.scrollListener(t,n)}),this.Ta),this.Ca=Au((function(t){return r.resizeListener(t)}),this.Ta),this.Ia=$i((function(t){return r.mouseMoveListener(t)}),this.Oa),this._a=[{boundElement:window,type:"resize",listener:function(){return r.Ca()}},{boundElement:document,type:"scroll",listener:function(t){return r.ka(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Ia(function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t}(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.Pa=[{type:"change",listener:this.Sa.on(this.Aa,(function(t){return r.changeListener(t)}))}],this.xa=Z([{boundElement:document,type:"mouseover",listener:this.Sa.on(this.Ea,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.Sa.on(this.Ea,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.Sa.on(this.ba,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.Sa.on(this.ba,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"keyup",listener:this.Sa.on(this.Ra,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.Sa.on(this.Ra,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.Sa.on(this.Ra,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.Sa.on(this.Ra,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.Sa.on(this.Ra,(function(t){return r.pasteListener(t)}))}],csArray.prototype.map.call(this.Pa,(function(t){return $($({},t),{boundElement:document})})),!0),this.va=[],this.Ai={},this.Er=function(t,n){switch(n){case"initial":case"added":r.hi(t);break;case"removed":r.ai(t)}},this.ci=new Vi(this.Er),this.wi(),this.P.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(this.va,new Eo(this.P,this.aa)),csArray.prototype.push.call(this.va,new Ro,new wo(this.aa))}return t.prototype.hi=function(t){if(E(t)){var n=this.Ma();csArray.prototype.forEach.call(n,(function(t){return Gi(t)}))}else{n=this.Da();csArray.prototype.forEach.call(n,(function(n){Gi($($({},n),{boundElement:t}))}))}},t.prototype.ai=function(t){if(E(t)){var n=this.Ma();csArray.prototype.forEach.call(n,(function(t){return zi(t)}))}else{n=this.Da();csArray.prototype.forEach.call(n,(function(n){zi($($({},n),{boundElement:t}))}))}},t.prototype.onEvent=function(t){this.As=t},t.prototype.start=function(){this.ci.observe(),this.hi(document),this.resizeListener()},t.prototype.stop=function(){this.ai(document),this.ci.disconnect()},t.prototype.flushPendingDebouncedListeners=function(){this.ka.flushPending(),this.Ca.flushPending()},t.prototype.Da=function(){return this.Sa.isMatchesSelectorSupported()?this.Pa:(wn.warn("Element.matches is not implemented yet"),[])},t.prototype.Ma=function(){return this.Sa.isMatchesSelectorSupported()?Z(Z([],this._a,!0),this.xa,!0):(wn.warn("Element.matches is not implemented yet"),this._a)},t.prototype.resizeListener=function(t){var n=ir.getScrollContainer(),i=Ft(n);i&&(this.Na=!0);var r={type:Hu.RESIZE,ts:0,x:i?n.clientWidth:Pe.windowWidth(),y:i?n.clientHeight:Pe.windowHeight()};void 0!==t&&(r.d=t),this.As(r)},t.prototype.scrollListener=function(t,n){var i=ir.isEventOnScrollContainer(n);!this.Na&&i&&this.resizeListener();var r={type:Hu.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:Pe.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:Pe.windowOffsetY(),d:t},e=lo.build(n,r,this.va);this.As(e)},t.prototype.mouseMoveListener=function(t){var n={type:Hu.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=lo.build(t,n,this.va);this.As(i)},t.prototype.mouseDownListener=function(t){var n={type:Hu.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=lo.build(t,n,this.va);this.La(i)},t.prototype.mouseUpListener=function(t){var n={type:Hu.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=lo.build(t,n,this.va);this.La(i)},t.prototype.clickListener=function(t){var n={type:Hu.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=lo.build(t,n,this.va);this.La(i)},t.prototype.mouseOverListener=function(t){var n={type:Hu.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=lo.build(t,n,this.va);this.La(i)},t.prototype.mouseOutListener=function(t){var n={type:Hu.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.aa.getEventTargetPath(t)},i=lo.build(t,n,this.va);this.La(i)},t.prototype.focusInListener=function(t){var n={type:Hu.FOCUSIN,ts:0,tgt:this.aa.getEventTargetPath(t)},i=lo.build(t,n,this.va);this.La(i)},t.prototype.focusOutListener=function(t){var n={type:Hu.FOCUSOUT,ts:0,tgt:this.aa.getEventTargetPath(t)},i=lo.build(t,n,this.va);this.La(i)},t.prototype.changeListener=function(t){var n={type:Hu.CHANGE,ts:0,tgt:this.aa.getEventTargetPath(t)},i=lo.build(t,n,this.va);this.La(i)},t.prototype.copyListener=function(t){var n={type:Hu.COMMAND,ts:0,tgt:this.aa.getEventTargetPath(t),key:Qi.COPY};this.La(n)},t.prototype.cutListener=function(t){var n={type:Hu.COMMAND,ts:0,tgt:this.aa.getEventTargetPath(t),key:Qi.CUT};this.La(n)},t.prototype.pasteListener=function(t){var n={type:Hu.COMMAND,ts:0,tgt:this.aa.getEventTargetPath(t),key:Qi.PASTE};this.La(n)},t.prototype.keyUpListener=function(t){var n={type:Hu.KEYUP,ts:0,tgt:this.aa.getEventTargetPath(t),key:this.Ua(t)};this.La(n)},t.prototype.keyDownListener=function(t){var n={type:Hu.KEYDOWN,ts:0,tgt:this.aa.getEventTargetPath(t),key:this.Ua(t)};this.La(n)},t.prototype.Ua=function(t){var n=this.Ai[t.key];return void 0===n?Zi.ALPHANUMERICAL:n},t.prototype.La=function(t){ao(t)&&t.tgt!==B.INVALID_ELEMENT&&this.As(t)},t.prototype.wi=function(){this.Ai[" "]=Zi.SPACE,this.Ai.Spacebar=Zi.SPACE,this.Ai.Enter=Zi.ENTER,this.Ai.Backspace=Zi.BACKSPACE,this.Ai.Delete=Zi.DELETE,this.Ai.ArrowUp=Zi.ARROWUP,this.Ai.ArrowDown=Zi.ARROWDOWN,this.Ai.ArrowLeft=Zi.ARROWLEFT,this.Ai.ArrowRight=Zi.ARROWRIGHT,this.Ai.Up=Zi.ARROWUP,this.Ai.Down=Zi.ARROWDOWN,this.Ai.Left=Zi.ARROWLEFT,this.Ai.Right=Zi.ARROWRIGHT,this.Ai.CapsLock=Zi.CAPSLOCK,this.Ai.Shift=Zi.SHIFT,this.Ai.Tab=Zi.TAB},X([yn("Event handler type: resize")],t.prototype,"resizeListener",null),X([yn("Event handler type: scroll")],t.prototype,"scrollListener",null),X([yn("Event handler type: mouseMove"),Sn()],t.prototype,"mouseMoveListener",null),X([yn("Event handler type: mouseDown"),Sn()],t.prototype,"mouseDownListener",null),X([yn("Event handler type: mouseUp"),Sn()],t.prototype,"mouseUpListener",null),X([yn("Event handler type: click"),Sn()],t.prototype,"clickListener",null),X([yn("Event handler type: mouseOver"),Sn()],t.prototype,"mouseOverListener",null),X([yn("Event handler type: mouseOut"),Sn()],t.prototype,"mouseOutListener",null),X([yn("Event handler type: focusIn")],t.prototype,"focusInListener",null),X([yn("Event handler type: focusOut")],t.prototype,"focusOutListener",null),X([yn("Event handler type: change")],t.prototype,"changeListener",null),X([yn("Event handler type: copy")],t.prototype,"copyListener",null),X([yn("Event handler type: cut")],t.prototype,"cutListener",null),X([yn("Event handler type: paste")],t.prototype,"pasteListener",null),X([yn("Event handler type: keyup")],t.prototype,"keyUpListener",null),X([yn("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),Oo=function(){function t(){var t=this;this.ja=100,this.qa=0,this.Ha=Pe.documentHeight(),this.Ba={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}},this.qa=this.Va(ir.getScrollContainer()).maxScrollRate}return t.prototype.onEvent=function(t){this.As=t},t.prototype.start=function(){Gi(this.Ba)},t.prototype.stop=function(){zi(this.Ba)},t.prototype.reset=function(){var t=ir.getScrollContainer(),n=this.Va(t),i=n.maxScrollRate,r=n.maxDocumentHeight;this.Ha=r,this.qa=i,this.As()},t.prototype.Va=function(t){var n=0,i=0;if(null===t)i=Pe.documentHeight(),n=this.Fa(i);else{var r=this.Ga(t);i=this.za(t,r),n=this.Ja(t,r)}return{maxScrollRate:n,maxDocumentHeight:i}},t.prototype.maxScrollRateListener=function(t){var n=null;ir.isEventOnScrollContainer(t)&&(n=csEventtarget.apply(t));var i=this.Va(n),r=i.maxScrollRate,e=i.maxDocumentHeight;(r>this.qa||e>this.Ha)&&(this.qa=r,e>this.Ha&&(this.Ha=e),this.As())},t.prototype.Fa=function(t){var n=Math.round(this.$a()/t*100);return Math.min(n,this.ja)},t.prototype.$a=function(){var t=Pe.windowHeight();return Pe.windowOffsetY()+t},t.prototype.Ja=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.za(t,n),e=Math.round(i/r*100);return Math.min(e,this.ja)},t.prototype.Ga=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.za=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.qa),mdh:"".concat(this.Ha)}},X([yn("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),No=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,l,v,d,w,p,y,m,g,S){this.j=t,this.Wa=n,this.fa=i,this.Xa=r,this.Ya=e,this.Ka=s,this.Za=u,this.Qa=o,this.fe=c,this.nn=h,this.tf=a,this.nf=f,this.qe=l,this.pe=v,this.if=d,this.rf=w,this.ef=p,this.sf=y,this.uf=m,this.cf=g,this.hf=S,this.Ie=new _r,this.af=!1}return t.prototype.init=function(){var t,n,i,r,e,s,u,o=this;this.Wa.onEvent((function(t){return o.Le(t)})),this.fa.onEvent((function(t){return o.Le(t)})),this.Xa.onEvent((function(){var t=o.Xa.getRequestParameters();o.pe.setQueryParams(t),o.Za.setQueryParams(t)})),this.nf.onEvent((function(t){return o.ff(t)})),this.lf(),null===(t=this.if)||void 0===t||t.onEvent((function(t){return o.Le(t)})),null===(n=this.uf)||void 0===n||n.onEvent((function(t){return o.Le(t)})),null===(i=this.rf)||void 0===i||i.onEvent((function(t){return o.Le(t)})),null===(r=this.ef)||void 0===r||r.onEvent((function(t){return o.Le(t)})),this.vf(),null===(e=this.sf)||void 0===e||e.onEvent((function(t){return o.ff(t)})),null===(s=this.cf)||void 0===s||s.onEvent((function(t){return o.ff(t)})),null===(u=this.hf)||void 0===u||u.onEvent((function(t){return o.ff(t)}))},t.prototype.vf=function(){var t=this;this.Za.onBeaconSuccess((function(){t.Ka.clearEvents()})),this.Za.onBeaconFailure((function(n){t.df(n)}))},t.prototype.initStates=function(){var t=this.Qa.getRequestParameters(),n=this.Ya.getRequestParameters(),i=this.Xa.getRequestParameters();this.pe.setQueryParams(t),this.pe.setQueryParams(n),this.pe.setQueryParams(i),this.Za.setQueryParams(t),this.Za.setQueryParams(n),this.Za.setQueryParams(i),this.wf()},t.prototype.clearStates=function(t){var n,i;this.Wa.flushPendingDebouncedListeners(),null===(n=this.rf)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.ef)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.pf(),this.sendLastMessageBeacon()):this.sendEvents(),this.Xa.reset(),this.nf.stop(),this.pe.removeQueryParams()},t.prototype.start=function(t){var n,i,r,e,s,u,o;t||null===(n=this.sf)||void 0===n||n.start(),this.qe.start(),this.Wa.start(),this.Xa.start(),this.fa.start(),null===(i=this.if)||void 0===i||i.start(),null===(r=this.ef)||void 0===r||r.start(),t||this.nf.start(),null===(e=this.rf)||void 0===e||e.start(),null===(s=this.uf)||void 0===s||s.start(),null===(u=this.cf)||void 0===u||u.start(),null===(o=this.hf)||void 0===o||o.start()},t.prototype.collectInitialEvents=function(){var t;null===(t=this.if)||void 0===t||t.collectInitialEvents()},t.prototype.onIframeAnalysisBrowserEvent=function(t){this.ff(t)},t.prototype.onIframeAnalysisUserEvent=function(t){this.Le(t)},t.prototype.onExternalEvent=function(t){this.Je(t)},t.prototype.ff=function(t){this.fe.isCurrentPageviewValid()&&this.Je(t)},t.prototype.Le=function(t){this.fe.refreshSession(),this.fe.isSessionValid()&&this.Je(t)},t.prototype.Je=function(t){this.Ka.addEvent(this.yf(t)),this.Ka.isFull()&&this.sendEvents(),this.j.emitDebugEvents&&this.Ie.emit("analysisEvent",$($({},t),{typeName:Hu[t.type]}))},t.prototype.yf=function(t){return t.ts=this.mf(),t},t.prototype.pf=function(){this.Za.setQueryParams({hlm:"true"}),this.af=!0},t.prototype.sendLastMessageBeacon=function(){this.Za.setQueryParams(this.Ya.getRequestParameters()),this.Za.send(this.Ka.stringifyEvents()),this.Za.removeQueryParams(["hlm"]),this.af=!1},t.prototype.sendEvents=function(){this.Ka.isEmpty()||(this.pe.setQueryParams(this.Qa.getRequestParameters()),this.pe.setQueryParams(this.Ya.getRequestParameters()),this.pe.send(this.Ka.getEvents()),this.Ka.clearEvents())},t.prototype.stop=function(){var t,n,i,r,e,s,u;this.qe.stop(),this.Wa.stop(),this.Xa.stop(),this.fa.stop(),this.nf.stop(),null===(t=this.if)||void 0===t||t.stop(),null===(n=this.rf)||void 0===n||n.stop(),null===(i=this.ef)||void 0===i||i.stop(),null===(r=this.uf)||void 0===r||r.stop(),this.Ka.empty(),null===(e=this.sf)||void 0===e||e.stop(),null===(s=this.cf)||void 0===s||s.stop(),null===(u=this.hf)||void 0===u||u.stop()},t.prototype.wf=function(){this.gf=Ct()},t.prototype.mf=function(){return Ct()-this.gf},t.prototype.lf=function(){var t=this;this.qe.onEvent((function(n){var i,r;null===(i=t.rf)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.ef)||void 0===r||r.flushPendingTextHighlightEvent(),n===Or.PagehideVisible?t.pf():n===Or.PagehideHidden?(t.pf(),t.sendLastMessageBeacon()):t.Ka.isEmpty()&&!t.af||t.sendLastMessageBeacon()}))},t.prototype.df=function(t){try{this.Ka.isEmpty()&&!this.af||this.nn.save({requestParameters:t,events:this.Ka.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===Bu.SUCCESS||t===Bu.FAILURE||t===Bu.ATTEMPT}(t))if(Ft(n)){var i={status:t,type:Hu.SUBMIT,ts:0,tgt:this.tf.getElementPath(n)};i.tgt!==B.INVALID_ELEMENT&&this.ff(i)}else wn.warn("AnalysisEvents Service: invalid element: ".concat(n));else wn.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),ko=function(){function t(t,n){var i=this;this.nn=t,this.pe=n,this.Sf=function(){"visible"===document.visibilityState&&i.bf()}}return t.prototype.start=function(){this.bf(),this.Di()},t.prototype.stop=function(){this.qi()},t.prototype.getRecoveryStorage=function(){return this.nn},t.prototype.bf=function(){var t=this.nn.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.pe.send(r,i)}},t.prototype.Di=function(){document.addEventListener("visibilitychange",this.Sf)},t.prototype.qi=function(){document.removeEventListener("visibilitychange",this.Sf)},t}(),Co=function(){function t(t){this.fu=t}return t.prototype.save=function(t){localStorage.setItem(this.fu,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.fu)},t.prototype.recover=function(){var t=localStorage.getItem(this.fu);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){wn.error("Invalid item in localStorage.\n         (key:".concat(this.fu,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Io=function(){function t(t){var n=this;this.Af=t,this.Ef=function(t){return n.processMetric(t)},this._i=!1}return t.prototype.onEvent=function(t){this.As=t},t.prototype.start=function(){this._i||(this._i=!0,this.Af.onFCP(this.Ef),this.Af.onCLS(this.Ef),this.Af.onFID(this.Ef),this.Af.onLCP(this.Ef),this.Af.onTTFB(this.Ef),this.Af.onINP(this.Ef))},t.prototype.stop=function(){this._i=!1},t.prototype.processMetric=function(t){if(this._i){var n={type:Hu.PERFORMANCE,name:t.name,val:t.value,ts:0};this.As(n)}},X([yn("Performance metric handler")],t.prototype,"processMetric",null),t}(),_o=-1,Po=function(t){addEventListener("pageshow",(function(n){n.persisted&&(_o=n.timeStamp,t(n))}),!0)},xo=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Mo=function(){var t=xo();return t&&t.activationStart||0},Do=function(t,n){var i=xo(),r="navigate";return _o>=0?r="back-forward-cache":i&&(document.prerendering||Mo()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Lo=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){n(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},Uo=function(t,n,i,r){var e,s;return function(u){n.value>=0&&(u||r)&&((s=n.value-(e||0))||void 0===e)&&(e=n.value,n.delta=s,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},jo=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},qo=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ho=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},Bo=-1,Vo=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Fo=function(t){"hidden"===document.visibilityState&&Bo>-1&&(Bo="visibilitychange"===t.type?t.timeStamp:0,zo())},Go=function(){addEventListener("visibilitychange",Fo,!0),addEventListener("prerenderingchange",Fo,!0)},zo=function(){removeEventListener("visibilitychange",Fo,!0),removeEventListener("prerenderingchange",Fo,!0)},Jo=function(){return Bo<0&&(Bo=Vo(),Go(),Po((function(){setTimeout((function(){Bo=Vo(),Go()}),0)}))),{get firstHiddenTime(){return Bo}}},$o=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Wo=[1800,3e3],Xo=function(t,n){n=n||{},$o((function(){var i,r=Jo(),e=Do("FCP"),s=Lo("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<r.firstHiddenTime&&(e.value=Math.max(t.startTime-Mo(),0),e.entries.push(t),i(!0)))}))}));s&&(i=Uo(t,e,Wo,n.reportAllChanges),Po((function(r){e=Do("FCP"),i=Uo(t,e,Wo,n.reportAllChanges),jo((function(){e.value=performance.now()-r.timeStamp,i(!0)}))})))}))},Yo=[.1,.25],Ko={passive:!0,capture:!0},Zo=new Date,Qo=function(t,n){yo||(yo=n,mo=t,go=new Date,ic(removeEventListener),tc())},tc=function(){if(mo>=0&&mo<go-Zo){var t={entryType:"first-input",name:yo.type,target:yo.target,cancelable:yo.cancelable,startTime:yo.timeStamp,processingStart:yo.timeStamp+mo};So.forEach((function(n){n(t)})),So=[]}},nc=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){Qo(t,n),e()},r=function(){e()},e=function(){removeEventListener("pointerup",i,Ko),removeEventListener("pointercancel",r,Ko)};addEventListener("pointerup",i,Ko),addEventListener("pointercancel",r,Ko)}(n,t):Qo(n,t)}},ic=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,nc,Ko)}))},rc=[100,300],ec=0,sc=1/0,uc=0,oc=function(t){t.forEach((function(t){t.interactionId&&(sc=Math.min(sc,t.interactionId),uc=Math.max(uc,t.interactionId),ec=uc?(uc-sc)/7+1:0)}))},cc=function(){return bo?ec:performance.interactionCount||0},hc=function(){"interactionCount"in performance||bo||(bo=Lo("event",oc,{type:"event",buffered:!0,durationThreshold:0}))},ac=[200,500],fc=0,lc=function(){return cc()-fc},vc=[],dc={},wc=function(t){var n=vc[vc.length-1],i=dc[t.interactionId];if(i||vc.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};dc[r.id]=r,vc.push(r)}vc.sort((function(t,n){return n.latency-t.latency})),vc.splice(10).forEach((function(t){delete dc[t.id]}))}},pc=[2500,4e3],yc={},mc=[800,1800],gc=function t(n){document.prerendering?$o((function(){return t(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(n)}),!0):setTimeout(n,0)},Sc=function(t,n){n=n||{};var i=Do("TTFB"),r=Uo(t,i,mc,n.reportAllChanges);gc((function(){var e=xo();if(e){var s=e.responseStart;if(s<=0||s>performance.now())return;i.value=Math.max(s-Mo(),0),i.entries=[e],r(!0),Po((function(){i=Do("TTFB",0),(r=Uo(t,i,mc,n.reportAllChanges))(!0)}))}}))},bc=function(){function t(){}return t.prototype.onFCP=function(t){Xo(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},Xo(Ho((function(){var i,r=Do("CLS",0),e=0,s=[],u=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=s[0],i=s[s.length-1];e&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,s.push(t)):(e=t.value,s=[t])}})),e>r.value&&(r.value=e,r.entries=s,i())},o=Lo("layout-shift",u);o&&(i=Uo(t,r,Yo,n.reportAllChanges),qo((function(){u(o.takeRecords()),i(!0)})),Po((function(){e=0,r=Do("CLS",0),i=Uo(t,r,Yo,n.reportAllChanges),jo((function(){return i()}))})),setTimeout(i,0))})))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},$o((function(){var i,r=Jo(),e=Do("FID"),s=function(t){t.startTime<r.firstHiddenTime&&(e.value=t.processingStart-t.startTime,e.entries.push(t),i(!0))},u=function(t){t.forEach(s)},o=Lo("first-input",u);i=Uo(t,e,rc,n.reportAllChanges),o&&qo(Ho((function(){u(o.takeRecords()),o.disconnect()}))),o&&Po((function(){var r;e=Do("FID"),i=Uo(t,e,rc,n.reportAllChanges),So=[],mo=-1,yo=null,ic(addEventListener),r=s,So.push(r),tc()}))}))}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},$o((function(){var i,r=Jo(),e=Do("LCP"),s=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(e.value=Math.max(n.startTime-Mo(),0),e.entries=[n],i())},u=Lo("largest-contentful-paint",s);if(u){i=Uo(t,e,pc,n.reportAllChanges);var o=Ho((function(){yc[e.id]||(s(u.takeRecords()),u.disconnect(),yc[e.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,(function(){return setTimeout(o,0)}),!0)})),qo(o),Po((function(r){e=Do("LCP"),i=Uo(t,e,pc,n.reportAllChanges),jo((function(){e.value=performance.now()-r.timeStamp,yc[e.id]=!0,i(!0)}))}))}}))}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){Sc(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},$o((function(){var i;hc();var r,e=Do("INP"),s=function(t){t.forEach((function(t){t.interactionId&&wc(t),"first-input"===t.entryType&&!vc.some((function(n){return n.entries.some((function(n){return t.duration===n.duration&&t.startTime===n.startTime}))}))&&wc(t)}));var n,i=(n=Math.min(vc.length-1,Math.floor(lc()/50)),vc[n]);i&&i.latency!==e.value&&(e.value=i.latency,e.entries=i.entries,r())},u=Lo("event",s,{durationThreshold:null!==(i=n.durationThreshold)&&void 0!==i?i:40});r=Uo(t,e,ac,n.reportAllChanges),u&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&u.observe({type:"first-input",buffered:!0}),qo((function(){s(u.takeRecords()),e.value<0&&lc()>0&&(e.value=0,e.entries=[]),r(!0)})),Po((function(){vc=[],fc=cc(),e=Do("INP"),r=Uo(t,e,ac,n.reportAllChanges)})))}))}(t,{reportAllChanges:!0})},t}(),Ac=function(){function t(t){void 0===t&&(t=[]),this.Ti=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.Ti)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.Ti,t)},t.prototype.eventsCount=function(){return this.Ti.length},t.prototype.clearEvents=function(){this.Ti=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.Ti.length},t.prototype.getEvents=function(){return this.Ti},t}(),Ec="v2/events",Rc=["submit"],Tc=function(){function t(t,n,i,r,e,s,u,o,c,h,a){this.j=t,this.jc=n,this.K=i,this.tf=r,this.Sa=e,this.nh=s,this.fe=u,this.fa=o,this.Fh=c,this.uh=h,this.ih=a}return t.prototype.init=function(){var t=this,n=new Ac,i=this.uh.create("".concat(this.j.getTrackerUri(),"/").concat(Ec),!0,"base64");this.Rf=this.Tf(i),this.Of=this.Nf(n,this.Rf.getRecoveryStorage(),i),this.Of.init(),this.ih.addListener(this.Of),this.Fh.addListener(this.Of),this.nh.register(Rc,(function(n,i){t.Of.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.Rf.start(),this.Of.start(t)},t.prototype.onAfterNaturalPageView=function(){this.Of.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Of.initStates(),this.Of.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.Of.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.Of.clearStates(),this.Of.stop(),this.Rf.stop()},t.prototype.onOptout=function(){this.Of.stop(),this.Rf.stop()},t.prototype.Nf=function(t,n,i){var r=new ho(window),e=new Oo,s=new To(this.j,this.tf,this.Sa),u=new po(this.j,this.tf,this.fa),o=new Io(new bc),c=new Mr;var h=new Ts("".concat(this.j.getTrackerUri(),"/").concat(Ec)),a=new gs(this.jc,this.K);return new No(this.j,s,u,e,r,t,h,a,this.fe,n,this.tf,o,c,i,undefined,undefined,undefined,undefined,undefined,undefined,undefined)},t.prototype.Tf=function(t){return new ko(new Co("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Ao||(Ao={}));var Oc=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.Rc=n,s.kf=i,s.ot=r,s.Rh=e,s}return J(n,t),n.prototype.init=function(){this.Cf()},n.prototype.onStart=function(t){t?this.If():this._f()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t,n){this.isStarted?this.Pf(t,n):Bt(t)&&this.ot.overridePath(t,n)},n.prototype._f=function(){this.Rh.setPageViewType(Ao.Natural),this.Rc.emitBeforeNaturalPageView(),this.kf.send(),this.ot.cleanupOverrideLifespan(),this.Rc.emitAfterNaturalPageView()},n.prototype.If=function(){this.Rh.setPageViewType(Ao.Renewal),this.Rc.emitBeforeNaturalPageView(),this.kf.send(),this.Rc.emitAfterNaturalPageView()},n.prototype.Pf=function(t,n){this.Rh.setPageViewType(Ao.Artificial),this.Rc.emitArtificialPageViewEnd(),Bt(t)&&this.ot.overridePath(t,n),this.Rc.emitBeforeArtificialPageView(),this.kf.send(),this.ot.cleanupOverrideLifespan(),this.Rc.emitAfterArtificialPageView()},n.prototype.Cf=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.Pf()}))},n}(Pr),Nc=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function kc(){return{la:Nc}}var Cc,Ic=function(){function t(t){this.oh=t,this.xf=[],this.Mf=!1}return t.prototype.getRequestParameters=function(){return{dr:this.Df()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.oh.getUrlMaskingPattern(t);csArray.prototype.push.call(this.xf,n)},t.prototype.enableRemoveQueryString=function(){this.Mf=!0},t.prototype.disableRemoveQueryString=function(){this.Mf=!1},t.prototype.Df=function(){var t=this.Mf?this.oh.removeQueryString(this.Lf()):this.Lf();return this.oh.anonymizeUrl(t,this.xf)},t.prototype.Lf=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),_c=function(){function t(t){this.Z=t,this.Uf=this.jf()&&"currentScript"in document}return t.prototype.qf=function(){var t=window.CSCurrentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.Hf(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.Hf=function(t){var n=t.transferSize;return void 0!==n?0===n||300===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.Uf||1!==this.Oh())return{};var t=this.qf();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.Oh=function(){var t;return(null===(t=this.Z.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.jf=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Pc=["trackPageview"],xc=["setPath"],Mc=["setQuery"],Dc=["referrer:maskUrl"],Lc=["referrer:removeQueryString"],Uc=["referrer:keepQueryString"],jc=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,l){this.j=t,this.nh=n,this.Rc=i,this.Bc=r,this.K=e,this.Z=s,this.Bf=u,this.wn=o,this.oh=c,this.ot=h,this.eh=a,this.Rh=f,this.Vf=l}return t.prototype.init=function(){var t,i=this,r=new vt(this.j.getTrackerUri(),"pageview");this.Ff=new Oc(this.Rc,r,this.ot,this.Rh);var e=new Ic(this.oh);this.Ff.init();var s=new gs(this.Bc,this.K,Pe,e,this.ot,this.Bf,n,this.wn,this.Rh,new _c(this.Z),this.eh);if(this.Vf){s.addProvider(this.Vf);var u=null===(t=this.j.heapEnvironment)||void 0===t?void 0:t.env_id;s.addProvider({getRequestParameters:function(){var t={cw:"1"};return u&&(t.happid=u),t}})}r.setRequestParametersProviders(s),this.nh.register(Pc,(function(t,n){jt(t)?i.Gf(n)?i.Ff.triggerArtificialPageView(t,n):i.Ff.triggerArtificialPageView(t):i.Ff.triggerArtificialPageView()})),this.nh.register(xc,(function(t,n){jt(t)&&(i.Gf(n)?i.ot.overridePath(t,n):i.ot.overridePath(t))})),this.nh.register(Mc,(function(t,n){jt(t)&&(i.Gf(n)?i.ot.overrideQuery(t,n):i.ot.overrideQuery(t))})),this.nh.register(Dc,(function(t){return e.addUrlMaskingPattern(t)})),this.nh.register(Lc,(function(){return e.enableRemoveQueryString()})),this.nh.register(Uc,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.Ff.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.Ff.stop()},t.prototype.Gf=function(t){return qt(t)&&null!==t},t}(),qc=function(){function t(t){this.aa=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.aa.hasValidEventTarget(r)&&i.zf(r,t)&&n(r)}},t.prototype.zf=function(t,n){var i=nr(t);return I.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!I},t}(),Hc=function(){function t(){}return t.prototype.onLoad=function(t){this.un=t},t.prototype.onLoadCallbackExecute=function(){this.un()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.Jf(t)},t.prototype.Jf=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},X([yn("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Bc=function(){function t(t,n,i){this.j=t,this.K=n,this.Z=i,this.gf=Ct()}return t.prototype.resetStartTime=function(){this.gf=Ct()},t.prototype.getSessionData=function(){var t=this.j.projectId,n=this.K.getVisitor();null==n&&wn.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,e=i.visitsCount,s=this.Z.getSession();return null===s&&wn.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:e,pageNumber:(null!=s?s:{}).pageNumber,relativeTimestamp:Ct()-this.gf}},t}(),Vc=["clearSession"],Fc=["extendSession"],Gc=["getSessionData"],zc=["session:start:newVisitor"],Jc=["session:clear:visitor"],$c=function(){function t(t,n,i,r){this.j=t,this.K=n,this.Z=i,this.nh=r}return t.prototype.init=function(){var t=this;this.$f=new Bc(this.j,this.K,this.Z),this.nh.register(Vc,(function(){return t.Z.removeSession()})),this.nh.register(Fc,(function(){return t.Z.extendSessionPeriodically()}),{disableApplyPending:!0}),this.nh.register(Gc,(function(){return t.$f.getSessionData()}),{disableApplyPending:!0}),this.nh.register(zc,(function(){return t.K.renewVisitor()})),this.nh.register(Jc,(function(){t.K.resetVisitor()}),{disableApplyImmediate:!0})},t.prototype.onBeforeNaturalPageView=function(){this.K.createOrUpdateVisitor(),this.Z.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.Z.abortQuotaServiceRequest(),this.K.createOrUpdateVisitor(),this.Z.createOrUpdateSession()},t.prototype.onAfterNaturalPageView=function(){this.$f.resetStartTime()},t.prototype.onAfterArtificialPageView=function(){this.$f.resetStartTime()},t.prototype.onOptout=function(){this.K.removeVisitor(),this.Z.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.Z.updateRecordingState(t,n)},t}(),Wc=function(){function t(t,n){var i=this;this.Z=t,this.K=n,this.Wf=!1,this.Xf=$i((function(){return i.Z.refreshSession()}),3e4)}return t.prototype.onSessionExpired=function(t){this.Yf=t},t.prototype.isSessionValid=function(){return!!this.Wf||!!this.Z.hasValidSession()&&(!this.Z.pollCacheRefreshEvent()||!this.K.isSessionRenewed())},t.prototype.isCurrentPageviewValid=function(){var t=this.Z.hasValidSession();return this.Z.pollCacheRefreshEvent(!1)?!this.K.isSessionRenewed():t},t.prototype.refreshSession=function(){this.isSessionValid()?this.Xf():this.Kf()&&(this.Zf=Ct(),this.renewSession())},t.prototype.renewSession=function(){this.Wf=!0,this.Yf(),this.Wf=!1},t.prototype.Kf=function(){return!Ht(this.Zf)||Ct()-this.Zf>6e4},t}();function Xc(t){return t.tagDeploymentMode===Cc.DualCollectionReview||t.tagDeploymentMode===Cc.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}(Cc||(Cc={}));var Yc,Kc=function(){function t(t,n,i){this.j=t,this.Z=n,this.ge=i}return t.prototype.init=function(){this.Qf=!1,this.tl=!1},t.prototype.loadClicktalePtc=function(){!this.Qf&&this.j.ptcDomain&&this.j.ptcGuid&&this.nl()},t.prototype.startDataCollection=function(t){this.tl||(this.j.tagDeploymentMode===Cc.LoadClicktalePtc&&this.il()&&this.ge.initCTPII(),Xc(this.j)&&(this.ge.initCTPII(),t(),this.tl=!0))},t.prototype.il=function(){return this.Z.isReplayRecorded()},t.prototype.nl=function(){this.Qf=!0;var t=this.rl();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.rl=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.j.ptcSha512&&this.j.ptcSnapshotPath?(t.integrity="sha512-".concat(this.j.ptcSha512),t.src="https://".concat(this.j.ptcDomain,"/").concat(this.j.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.j.ptcDomain,"/ptc/").concat(this.j.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(Yc||(Yc={}));var Zc,Qc=function(){function t(t,n,i,r,e,s){this.j=t,this.Z=n,this.ot=i,this.nh=r,this.el=e,this.ge=s,this.sl=0}return t.prototype.init=function(){var t=this;this.ul=new Kc(this.j,this.Z,this.ge),this.ul.init(),this.ol(),this.nh.register(["startDataCollection"],(function(){t.sl++,t.ul.startDataCollection(t.el)}))},t.prototype.ol=function(){Xc(this.j)&&this.ul.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.j.tagDeploymentMode===Cc.LoadClicktalePtc&&this.ul.loadClicktalePtc()},t.prototype.onAfterArtificialPageView=function(){!this.Z.isReplayRecorded()&&Yc.isRecording()&&this.j.tagDeploymentMode===Cc.LoadClicktalePtc&&Yc.triggerLogicalPageView(this.ot.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.Z.isReplayRecorded()&&Yc.isRecording()&&Yc.triggerLogicalPageView(this.ot.getAnonymizedUrl())},t.prototype.onOptout=function(){Yc.isRecording()&&Yc.stopRecording()},t}(),th="RSA-OAEP",nh="AES-CTR";!function(t){var n,i,r,e=!1,s=null,u=window.TextEncoder?new window.TextEncoder:null;function o(){var t,n;return null!=(null===(n=null===(t=window.self.crypto)||void 0===t?void 0:t.subtle)||void 0===n?void 0:n.encrypt)&&null!=window.self.CryptoKey}function c(n){return Ti(this,void 0,void 0,(function(){var r;return Oi(this,(function(u){switch(u.label){case 0:return!o()||e?[2,null]:[4,i];case 1:u.sent(),(r=hs(n)).byteLength>190&&(r=r.slice(0,190)),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,t.crypto.encrypt({name:th},s,r)];case 3:return[2,as(u.sent())];case 4:return u.sent(),[2,null];case 5:return[2]}}))}))}function h(n){var i;return Ti(this,void 0,void 0,(function(){var r;return Oi(this,(function(e){switch(e.label){case 0:if(!o())return[2,null];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.crypto.exportKey("jwk",n)];case 2:return r=e.sent(),[2,null!==(i=r.k)&&void 0!==i?i:null];case 3:return e.sent(),[2,null];case 4:return[2]}}))}))}t.crypto=null===(n=window.crypto)||void 0===n?void 0:n.subtle,t.prop="toEncrypt",t.MAX_DIGEST_INPUT_SIZE=100,t.isKeyImported=function(){return!e},t.getCryptoKey=function(){return s},t.isSupported=o,t.importKey=function(n){return Ti(this,void 0,void 0,(function(){return Oi(this,(function(r){switch(r.label){case 0:return[4,i=t.crypto.importKey("spki",fs(n),{name:th,hash:"SHA-256"},!1,["encrypt"]).catch((function(){return e=!0,null}))];case 1:return s=r.sent(),i=void 0,s||pn.warn("Fail to import public key '".concat(n,"'")),[2]}}))}))},t.asymmetricEncrypt=c,t.symmetricEncrypt=function(n,i){return Ti(this,void 0,void 0,(function(){var r,s;return Oi(this,(function(c){switch(c.label){case 0:if(!o()||e)return[2,null];r={counter:i.initializationVector,name:nh,length:64},s=u.encode(n),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,t.crypto.encrypt(r,i.cryptoKey,s)];case 2:return[2,as(c.sent())];case 3:return c.sent(),[2,null];case 4:return[2]}}))}))},t.encryptSecret=function(t){return Ti(this,void 0,void 0,(function(){var n,i;return Oi(this,(function(r){switch(r.label){case 0:return[4,h(t)];case 1:if(!(n=r.sent()))throw new Error("Export secret failed");return[4,c(n)];case 2:if(!(i=r.sent()))throw new Error("Encrypt secret failed");return[2,i]}}))}))},t.generateSymmetricKey=function(){return Ti(this,void 0,void 0,(function(){return Oi(this,(function(n){switch(n.label){case 0:if(!o()||e)return[2,null];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.crypto.generateKey({name:nh,length:128},!0,["encrypt","decrypt"])];case 2:return[2,{cryptoKey:n.sent(),initializationVector:window.crypto.getRandomValues(new Uint8Array(16))}];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},t.setDigestSalt=function(t){r=t},t.digest=function(n){return Ti(this,void 0,void 0,(function(){var i;return Oi(this,(function(e){switch(e.label){case 0:n=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(n)),r&&(n="".concat(n,":").concat(r)),i=u.encode(n),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t.crypto.digest("SHA-1",i)];case 2:return[2,ls(e.sent())];case 3:return e.sent(),[2,null];case 4:return[2]}}))}))},t.generateKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}}(Zc||(Zc={}));var ih,rh,eh="@user-identifier@",sh=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.j=n,s.cl=i,s.Zh=r,s.hl=e,s.al=[],s.Ge=[],s}return J(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.al,(function(n){return t.trackPageEvent(n)})),this.al=[],csArray.prototype.forEach.call(this.Ge,(function(n){return t.trackEventTriggerRecording(n)})),this.Ge=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n.ll(t)&&(this.vl(t)?Zc.isSupported()&&this.dl(t):this.wl(t)):csArray.prototype.push.call(this.al,t)},n.prototype.vl=function(t){return nt(t,eh)},n.prototype.dl=function(t){return Y(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return this.j.customHashIdEnabled?(n=csString.prototype.slice.call(t,17)).length>Zc.MAX_DIGEST_INPUT_SIZE?(wn.warn("UserIdentifier event: invalid user identifier"),[2]):[4,Zc.digest(n)]:[2];case 1:return(i=r.sent())?(this.pl={eventName:i,isETR:!1,isCustomHashId:!0},this.yl()):wn.warn("Page event: unable to compute customHashId"),this.j.encryptionEnabled?(this.hl.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.wl=function(t){this.hl.emitPageEvent(t),this.pl={eventName:t,isETR:!1,isCustomHashId:!1},this.yl(),this.j.tagDeploymentMode===Cc.LoadClicktalePtc&&Yc.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n.ll(t)&&(this.j.malkaEtrEnabled?this.ml(t):this.gl(t)):csArray.prototype.push.call(this.Ge,t)},n.prototype.ml=function(t){nt(t,"@ETP@")?this.hl.emitEventTriggerRecording(t,Zn.ETR_PAGE):this.hl.emitEventTriggerRecording(t,Zn.ETR_SESSION),this.pl={eventName:t,isETR:!0,isCustomHashId:!1},this.yl()},n.prototype.gl=function(t){(function(t){return Xc(t)||t.tagDeploymentMode===Cc.LoadClicktalePtc})(this.j)&&(this.hl.emitEventTriggerRecording(t,Zn.ETR_LEGACY),this.pl={eventName:t,isETR:!0,isCustomHashId:!1},this.yl(),this.j.tagDeploymentMode===Cc.LoadClicktalePtc&&Yc.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.Zh.compressSync(this.pl.eventName,"base64"),ct:this.Zh.algorithm,isETR:"".concat(this.pl.isETR),isCustomHashId:"".concat(this.pl.isCustomHashId)}},n.prototype.yl=function(){this.cl.send()},n.ll=function(t){return jt(t)&&!!csString.prototype.trim.call(t)},n}(Pr),uh=["trackPageEvent"],oh=["trackEventTriggerRecording"],ch=function(){function t(t,n,i,r,e){this.j=t,this.nh=n,this.Zh=i,this.Bc=r,this.hl=e}return t.prototype.init=function(){var t=this,n=new vt(this.j.getTrackerUri(),"pageEvent");this.Sl=new sh(this.j,n,this.Zh,this.hl),n.setRequestParametersProviders(this.Sl,this.Bc),this.nh.register(uh,(function(n){t.Sl.trackPageEvent(n)})),this.nh.register(oh,(function(n){t.Sl.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.Sl.start()},t}(),hh=function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}(),ah=function(t){function n(){var n=t.call(this)||this;return n.hr=new eu((function(t){return n.errorListener(t)})),n}return J(n,t),n.prototype.onStartTracking=function(){this.hr.observe()},n.prototype.onStopTracking=function(){this.hr.disconnect()},n.prototype.errorListener=function(t){var n=this.bl(t);for(var i in this.subscriptions){(0,this.subscriptions[i])(n)}},n.prototype.Al=function(t){return t=null!=t?t:"[NO ERROR MESSAGE]",os.truncate(t,n.wc,os.ELLIPSIS)},n.prototype.bl=function(t){return{errorType:"jsError",message:this.Al(t.message),filename:t.filename,lineno:t.lineno,colno:t.colno}},n.wc=1024,X([yn("Event handler type: error")],n.prototype,"errorListener",null),n}(hh),fh=["[data-cs-mask]","#c1_card_info_id"],lh=function(){function t(t){var n,i;this.j=t,this.El=Z([],fh,!0),this.Rl=[{selector:"input:not([type=button]):not([type=submit])",attrName:"value"}],this.Tl={PIISelectors:Z([".ctHidden,textarea"],fh,!0),Attributes:[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]},this.Ol={elementSelector:"",attrSelector:"",attrSelectors:[]};var r={PIISelectors:[],Attributes:[]};Xc(this.j)||((n=csArray.prototype.push).call.apply(n,Z([r.PIISelectors],this.El,!1)),(i=csArray.prototype.push).call.apply(i,Z([r.Attributes],this.Rl,!1))),this.Ol=gr.getComputedSelectorSettings(r,this.Ol)}return t.prototype.setSensitiveSettingsFromCommand=function(t){t=gr.sanitizeSelectorUserInput(t),gr.isSelectorUserInput(t)&&this.Nl(t)},t.prototype.setSensitiveSettingsFromParent=function(t){var n={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Nl(n)},t.prototype.getSensitiveSettings=function(){return this.Ol},t.prototype.initCTPII=function(){var t,n,i,r,e,s,u,o=this.Tl;(null===(r=null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII)||void 0===r?void 0:r.Text)instanceof Array&&(t=o.PIISelectors).push.apply(t,window.ClickTaleSettings.DOM.PII.Text),(null===(u=null===(s=null===(e=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===e?void 0:e.DOM)||void 0===s?void 0:s.PII)||void 0===u?void 0:u.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach((function(t){jt(t.attr)&&jt(t.rule)&&o.Attributes.push({selector:t.rule,attrName:t.attr})})),this.Nl(o)},t.prototype.Nl=function(t){this.Ol=gr.getComputedSelectorSettings(t,this.Ol)},t}(),vh=function(){function t(t){this.nh=t}return t.prototype.init=function(){this.kl(t.Cl,Wt),this.kl(t.Il,$t)},t.prototype.kl=function(t,n){this.nh.register([t],(function(t,i){jt(t)&&(jt(i)||Gt(i))&&wn.error(i,"".concat(n).concat(t))}))},t.Il="logSnippetError",t.Cl="logImplementationSnippetError",t}(),dh=function(){function t(t,n,i,r){this.j=t,this.Hh=n,this.th=i,this.Fh=r}return t.prototype.init=function(){var t=this;this.Hh.onChildMessage((function(n,i,r){return t.Fh.emitIframeEvent(n,i,r)})),this.Hh.setRecordingStatusCallback((function(){return t.th.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.j.iframesTracking&&this.Hh.start()},t.prototype.onOptout=function(){this.j.iframesTracking&&this.Hh.stop()},t.prototype.onRecordingStatusChange=function(){this.j.iframesTracking&&this.Hh.onRecordingStatusChange(this.th.getRecordingStatus())},t}(),wh=function(t){function n(n){var i=t.call(this)||this;return i.j=n,i._l=0,i.Pl=new Map,i.xl={boundElement:window,type:"message",listener:function(t){return i.Ml(t)}},i}return J(n,t),n.prototype.onChildMessage=function(t){this.Dl=t},n.prototype.setRecordingStatusCallback=function(t){this.Ll=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=an.buildBaseMessage(hn.RecordingStatus,cn.Parent,this.j.projectId);i.content=t,this.Pl.forEach((function(t){!n.Ul(t)&&t.port&&an.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=an.buildBaseMessage(t,cn.Parent,this.j.projectId);i.content=n,this.jl(i)},n.prototype.onStart=function(){Gi(this.xl,!1),this.ql()},n.prototype.onStop=function(){this.Hl(),zi(this.xl,!1),this.Bl()},n.prototype.ql=function(){var t=this,n=this.Vl();this.Fl(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.Gl(n)){var i={iframe:n};t.Pl.set(t._l,i),t._l+=1}})),this.zl()},n.prototype.Vl=function(){var t=this;return csArray.prototype.filter.call(Me.findAllElements("iframe"),(function(n){return t.Jl(n)}))},n.prototype.Fl=function(t){var n=this;this.Pl.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.$l(r,i)}))},n.prototype.$l=function(t,n){n.port&&an.closeChannelPort(n.port),this.Pl.delete(t)},n.prototype.Bl=function(){this.Pl.forEach((function(t){t.port&&an.closeChannelPort(t.port)})),this.Pl.clear()},n.prototype.Gl=function(t){var n=null;return this.Pl.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.Jl=function(t){return t.id!==r&&(!t.src||en(rn(t.src),this.j.hostnames))},n.prototype.jl=function(t){this.Pl.forEach((function(n){n.port&&an.sendChannelMessage(n.port,t)}))},n.prototype.zl=function(){var t=this;this.Pl.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Wl(i);an.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Hl=function(){var t=this.Xl();this.Pl.forEach((function(n){n.port?an.sendChannelMessage(n.port,t):n.iframe.contentWindow&&an.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Wl=function(t){return an.buildBaseMessage(hn.Discovery,cn.Parent,this.j.projectId,t)},n.prototype.Xl=function(){return an.buildBaseMessage(hn.Stop,cn.Parent,this.j.projectId)},n.prototype.Yl=function(t,n){var i=this,r=this.Pl.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.Kl(t,r)}):wn.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this._l,")"))},n.prototype.Zl=function(t){if(t.port){var n=an.buildBaseMessage(hn.RecordingStatus,cn.Parent,this.j.projectId),i=this.Ll();this.Ul(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,an.sendChannelMessage(t.port,n)}},n.prototype.Kl=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===hn.EndOfBufferedMessages?this.Zl(n):this.Dl(n.iframe,i,r)}else wn.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.Ml=function(t){if(an.isMessageValid(t,cn.Child,this.j.projectId,this.j.hostnames))switch(t.data.type){case hn.Discovery:if(void 0===t.data.id)return void this.ql();if(t.ports&&1===t.ports.length&&this.Pl.has(t.data.id))return void this.Yl(t.data.id,t.ports[0]);wn.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case hn.ChildLogMessage:this.Dl(null,hn.ChildLogMessage,t.data.content);break;default:wn.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.Ul=function(t){return gr.isSensitive(t.iframe)||gr.isSensitiveChild(t.iframe)},n}(Pr),ph=function(){function t(t){this.Ql=t}return t.prototype.buildApiErrors=function(t,n){var i=this.Ql.collectDataPoints(t,n);if(null===i)return null;var r=this.tv(t,i);return n?{apiError:r,detailedApiError:this.nv(t,i)}:{apiError:r}},t.prototype.nv=function(t,n){var i=this.iv(t);return n.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),n.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),n.collectResponseBody&&t.requestBody&&(i.responseBody=t.responseBody),Object.keys(n.standardRequestHeaders).length>0&&(i.standardRequestHeaders=n.standardRequestHeaders),Object.keys(n.standardResponseHeaders).length>0&&(i.standardResponseHeaders=n.standardResponseHeaders),Object.keys(n.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(n.customRequestHeaders)),Object.keys(n.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(n.customResponseHeaders)),Object.keys(n.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=n.plainCustomRequestHeaders),Object.keys(n.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=n.plainCustomResponseHeaders),n.plainResponseBodyAttributes&&Object.keys(n.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=n.plainResponseBodyAttributes),n.plainRequestBodyAttributes&&Object.keys(n.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=n.plainRequestBodyAttributes),Object.keys(n.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(n.responseBodyAttributes)),Object.keys(n.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(n.requestBodyAttributes)),i},t.prototype.iv=function(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}},t.prototype.tv=function(t,n){var i=this.iv(t);return n.matchingBodyContents.length>0&&(i.matchingBodyContents=n.matchingBodyContents),Object.keys(n.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=n.plainResponseBodyAttributes),i},t}(),yh=function(t){function n(n,i,r){var e=t.call(this)||this;return e.rv=n,e.ev=i,e.sv=r,e.uv=0,e.ov=new ph(r),e}return J(n,t),n.prototype.subscribe=function(n,i,r){(null==r?void 0:r.detailedEvent)&&(Object.defineProperty(i,"detailedEvent",{value:r.detailedEvent}),this.uv++),t.prototype.subscribe.call(this,n,i)},n.prototype.unsubscribe=function(n){var i;(null===(i=this.subscriptions[n])||void 0===i?void 0:i.hasOwnProperty("detailedEvent"))&&this.uv--,t.prototype.unsubscribe.call(this,n)},n.prototype.init=function(){var t=this,n=this.sv.computeApiErrorCollectionOptions();this.rv.setCollectionOptions(n),this.rv.onEvent((function(n){return t.cv(n)})),this.ev.setCollectionOptions(n),this.ev.onEvent((function(n){return t.cv(n)}))},n.prototype.onStartTracking=function(){this.rv.start(),this.ev.start()},n.prototype.onStopTracking=function(){this.rv.stop(),this.ev.stop()},n.prototype.cv=function(t){var n=this.ov.buildApiErrors(t,0!==this.uv);if(n)for(var i in this.subscriptions){var r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?n.detailedApiError&&r(n.detailedApiError):r(n.apiError)}},n}(hh),mh=function(){function t(t){this.oh=t,this.xf=[]}return t.prototype.addUrlMaskingPattern=function(t){var n=this.oh.getUrlMaskingPattern(t);csArray.prototype.push.call(this.xf,n)},t.prototype.getUrlMaskingPatterns=function(){return this.xf},t.prototype.anonymize=function(t){var n=this.oh.removeQueryString(t.url);return $($({},t),{url:this.oh.anonymizeUrl(n,this.xf),library:t.library?this.oh.anonymizeUrl(t.library,this.xf):void 0})},t}(),gh=function(){function t(t,n){this.q=t,this.ot=n}return t.prototype.anonymize=function(t){return jt(t.message)&&(t.message=this.hv(t.message),t.message=this.q.anonymizePII(t.message)),jt(t.filename)&&(t.filename=this.ot.computeOverriddenUrl(t.filename)),t},t.prototype.hv=function(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,"value='".concat("CS_ANONYMIZED_VALUE","'"))},t}(),Sh=function(t){function n(n){var i=t.call(this)||this;return i.av=n,i.bs=[{boundElement:document,type:"touchstart",listener:function(t){return i.Je(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Je(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Je(t)}}],i.fv=new Ys,i.fv.onGesture((function(t,n){return i.Wo(t,n)})),i}return lr(n,t),n.prototype.Wo=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.bs,(function(t){return Gi(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.bs,(function(t){return zi(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Je=function(t){var n=this;this.av.tryToExecute("process gesture event",(function(){if(n.fv.isValidTouchEvent(t))switch(t.type){case"touchstart":n.fv.processActionDown(t);break;case"touchmove":n.fv.processActionMove();break;case"touchend":n.fv.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===zs.FLICK||t.type===zs.DRAG},n}(hh),bh=function(t){function n(n,i){var r=t.call(this)||this;return r.pe=n,r.lv=i,r.vv=0,r}return J(n,t),n.prototype.onStart=function(){var t=this;wn.isPerfLoggingActive()&&(this.wv=window.setInterval((function(){return t.pv()}),n.yv))},n.prototype.onStop=function(){wn.isPerfLoggingActive()&&(this.pv(),clearInterval(this.wv))},n.prototype.pv=function(){if(!(Tn.isEmpty||this.vv>=n.mv)){this.vv++;var t=$({a:n.gv,l:n.Sv},this.lv.getRequestParameters()),i=[];Tn.forEach((function(n){csArray.prototype.push.call(i,$($({},n),t))})),this.pe.send(i),Tn.clear()}},n.gv="uxa",n.Sv="perf",n.yv=5e3,n.mv=5,n}(Pr),Ah=function(){function t(t,n,i){this.j=t,this.lv=n,this.uh=i}return t.prototype.init=function(){this.bv=new bh(this.uh.create(this.j.getLoggerUri(),!0),this.lv)},t.prototype.onStartTracking=function(){this.bv.start()},t.prototype.onOptout=function(){this.bv.stop()},t}(),Eh=function(){function t(){this.Av=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,e){this.Av=!0,this.Xh=t,this.ge=n,this.hh=i,this.Z=r,this.we=e},t.prototype.getRecordingStatus=function(){var t,n,i,r;return this.Av?{isRecording:this.Xh.isRecording(),isMutationTrackerStarted:this.Xh.isStarted,sensitiveSettings:this.ge.getSensitiveSettings(),capturedElementSelector:Xr.getWhitelistedElementsSelector(),useAnonymization:this.hh.shouldUseAnonymization(),encryptionSelectors:null===(t=this.we)||void 0===t?void 0:t.getEncryptionSelectors(),activateOnlineAssetsOnNextStart:null===(n=this.Xh.getStaticResourceManagerStatus())||void 0===n?void 0:n.onlineAssets.enabledForChildrenOnNextStart,recordingStartTimestamp:parseInt(this.Xh.getRecordingStartTimestamp(),10),etrState:null!==(r=null===(i=this.Z.getSession())||void 0===i?void 0:i.etrState)&&void 0!==r?r:Kn.ETR_OFF}:{isRecording:!1,recordingStartTimestamp:0,etrState:Kn.ETR_OFF}},t}(),Rh=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),Th=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.ve=n,s.Ev=i,s.jc=r,s.de=e,s.Rv=[],s.Ce=0,s}return J(n,t),n.prototype.init=function(){this.ve.init()},n.prototype.initStates=function(){this.Tv(),this.Rv=[],this.Ce=0,this.wf()},n.prototype.wf=function(){this.gf=Ct()},n.prototype.mf=function(){return Ct()-this.gf},n.prototype.onStart=function(){var t=this;this.ve.subscribe(n.rs,(function(n){return t.Je(n)}))},n.prototype.onStop=function(){this.ve.unsubscribe(n.rs)},n.prototype.onIframeApiError=function(t){this.Je(t)},n.prototype.Je=function(t){this.isStarted&&this.Ce<n.Zc&&(t.relativeTime=this.mf(),csArray.prototype.push.call(this.Rv,this.de.anonymize(t)),this.Ov())},n.prototype.Tv=function(){this.Ev.removeQueryParams(),this.Ev.setQueryParams(this.jc.getRequestParameters())},n.prototype.Ov=function(){this.Ev.send({errors:this.Rv}),this.Rv=[],this.Ce+=1},n.rs="ApiErrorsService",n.Zc=20,n}(Pr),Oh=["api-errors:maskUrl"],Nh=function(){function t(t,n,i,r,e,s,u){this.ve=t,this.de=n,this.j=i,this.jc=r,this.Fh=e,this.nh=s,this.uh=u}return t.prototype.init=function(){var t=this.uh.create("".concat(this.j.getTrackerUri(),"/").concat("api-errors"),!0);this.Nv=new Th(this.ve,t,this.jc,this.de),this.Nv.init(),this.Fh.addListener(this.Nv),this.kv()},t.prototype.kv=function(){var t=this;this.nh.register(Oh,(function(n){return t.de.addUrlMaskingPattern(n)}))},t.prototype.onStartTracking=function(){this.Nv.start()},t.prototype.onAfterNaturalPageView=function(){this.Nv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Nv.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Nv.stop()},t.prototype.onOptout=function(){this.Nv.stop()},t}(),kh=function(t){function n(n,i,r,e,s,u){var o=t.call(this)||this;return o.Cv=n,o.Iv=i,o.jc=r,o.le=e,o.ih=s,o.ot=u,o._v=[],o.Qc=0,o.Pv=[],o}return J(n,t),n.prototype.initStates=function(){this.gf=Ct(),this.Iv.removeQueryParams(),this.Iv.setQueryParams(this.jc.getRequestParameters()),this._v=[],this.Qc=0},n.prototype.onStart=function(){var t=this;this.Cv.subscribe(n.rs,(function(n){return t.Je(n)})),this.xv()},n.prototype.onStop=function(){this.Cv.unsubscribe(n.rs)},n.prototype.onIframeJavascriptError=function(t){this.Je(t)},n.prototype.trackCustomError=function(t){var n={errorType:"jsError",message:"".concat("Custom Error:"," ").concat(t),lineno:1,colno:1,filename:"https://cserror.com/texterror.js"};this.Mv(n)},n.prototype.Mv=function(t){if(this.isStarted){var n=this.Je(t);n&&this.ih.emitCustomJavaScriptErrorEvent(n)}else csArray.prototype.push.call(this.Pv,t)},n.prototype.xv=function(){var t=this;this.isStarted&&(csArray.prototype.forEach.call(this.Pv,(function(n){return t.Mv(n)})),this.Pv=[])},n.prototype.Je=function(t){if(this.isStarted&&this.Qc<20){var n=$($({},t),{pageUrl:this.ot.getAnonymizedUrl(),rt:this.mf()});return this.le.anonymize(n),csArray.prototype.push.call(this._v,n),this.Ov(),n}return null},n.prototype.mf=function(){return Ct()-this.gf},n.prototype.Ov=function(){this.Iv.send({errors:this._v}),this._v=[],this.Qc+=1},n.rs="JavaScriptErrorsService",n}(Pr),Ch=["trackError"],Ih=function(){function t(t,n,i,r,e,s,u,o,c){this.Cv=t,this.le=n,this.j=i,this.jc=r,this.Fh=e,this.nh=s,this.ih=u,this.ot=o,this.uh=c}return t.prototype.init=function(){var t=this.uh.create("".concat(this.j.getTrackerUri(),"/").concat("errors"),!0);this.Dv=new kh(this.Cv,t,this.jc,this.le,this.ih,this.ot),this.Fh.addListener(this.Dv),this.kv()},t.prototype.kv=function(){var t=this;this.j.jsCustomErrorsEnabled&&!this.j.customErrors.enabled&&this.nh.register(Ch,(function(n){t.Dv.trackCustomError(n)}))},t.prototype.onStartTracking=function(){this.Dv.start()},t.prototype.onAfterNaturalPageView=function(){this.Dv.initStates()},t.prototype.onAfterArtificialPageView=function(){this.Dv.initStates()},t.prototype.onBeforeSessionRenewal=function(){this.Dv.stop()},t.prototype.onOptout=function(){this.Dv.stop()},t}(),_h=function(){function t(){this.Lv=Ao.Natural}return t.prototype.setPageViewType=function(t){this.Lv=t},t.prototype.getPageViewType=function(){return this.Lv},t.prototype.getRequestParameters=function(){return{pvt:this.Lv}},t}(),Ph=function(){function t(t){this.fe=t}return t.prototype.onAfterVisitorRenewal=function(){this.fe.renewSession()},t}(),xh=function(){function t(t,n,i,r,e){this.j=t,this.hh=n,this.wn=i,this.ot=r,this.Ae=e}return t.prototype.init=function(){this.Uv()},t.prototype.onBeforeArtificialPageView=function(){this.Ae.stop()},t.prototype.onAfterArtificialPageView=function(){this.Ae.start(),this.jv()},t.prototype.onBeforeVisitorRenewal=function(){this.qv()},t.prototype.onOptout=function(){this.qv(),this.Hv()},t.prototype.Uv=function(){var t,n,i=this;window.heapReadyCb=window.heapReadyCb||[],window.heap=window.heap||[],window.heap.load=function(t,n){window.heap.envId=t,window.heap.clientConfig=n=n||{},window.heap.clientConfig.shouldFetchServerConfig=!1;var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://cdn.us.heap-api.com/config/"+t+"/heap_config.js";var r=document.getElementsByTagName("script")[0];csNodeparentNode.apply(r).insertBefore(i,r);for(var e=["init","startTracking","stopTracking","track","resetIdentity","identify","getSessionId","getUserId","getIdentity","addUserProperties","addEventProperties","removeEventProperty","clearEventProperties","addAccountProperties","addAdapter","addTransformer","addTransformerFn","onReady","addPageviewProperties","removePageviewProperty","clearPageviewProperties","trackPageview"],s=function(t){return function(){var n=csArray.prototype.slice.call(arguments,0);csArray.prototype.push.call(window.heapReadyCb,{name:t,fn:function(){window.heap[t]&&window.heap[t].apply(window.heap,n)}})}},u=0;u<e.length;u++)window.heap[e[u]]=s(e[u])},null===(t=null===window||void 0===window?void 0:window.heap)||void 0===t||t.load(null===(n=this.j.heapEnvironment)||void 0===n?void 0:n.env_id,{disableTextCapture:this.hh.shouldUseAnonymization(),enableSecureCookies:this.j.secureCookiesEnabled,disablePageviewAutocapture:!0});var r="CS_PV_ADAPTER";window.heap.addAdapter({name:r,fn:function(t){var n,e;try{t.addPageviewProperties(i.Bv()),null===(e=null===(n=null===window||void 0===window?void 0:window.heap)||void 0===n?void 0:n.setPath)||void 0===e||e.call(n,i.ot.getAnonymizedPath(),"onNextPageviewOnly")}catch(t){wn.error(t)}finally{t.markAdapterAsResolved(r)}}},{isBlocking:!0,blockDurationInMs:3500,rerunOnNewPageview:!1})},t.prototype.jv=function(){var t;null===(t=null===window||void 0===window?void 0:window.heap)||void 0===t||t.trackPageview({properties:this.Bv(),url:this.ot.getAnonymizedUrl()})},t.prototype.qv=function(){var t;null===(t=null===window||void 0===window?void 0:window.heap)||void 0===t||t.clearPageviewProperties()},t.prototype.Hv=function(){var t;null===(t=null===window||void 0===window?void 0:window.heap)||void 0===t||t.stopTracking(!0)},t.prototype.Bv=function(){var t=this.wn.getAllValidCustomVars();return csArray.prototype.reduce.call(Object.keys(t),(function(n,i){var r=t[i],e=r[0],s=r[1];return n[e]=s,n}),{})},X([yn("CsSideloadsHeapBridge: init")],t.prototype,"init",null),X([yn("CsSideloadsHeapBridge: onBeforeArtificialPageView")],t.prototype,"onBeforeArtificialPageView",null),X([yn("CsSideloadsHeapBridge: onAfterArtificialPageView")],t.prototype,"onAfterArtificialPageView",null),X([yn("CsSideloadsHeapBridge: onBeforeVisitorRenewal")],t.prototype,"onBeforeVisitorRenewal",null),X([yn("CsSideloadsHeapBridge: onOptout")],t.prototype,"onOptout",null),t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(ih||(ih={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(rh||(rh={}));var Mh,Dh,Lh=function(){function t(t,n,i,r){this.Bf=t,this.j=n,this.ot=i,this.Vv=r}return t.prototype.init=function(){this.Fv()},t.prototype.shouldUseAnonymization=function(){if(this.Bf.isReplayUnanonymizedAllowedByConsent()){switch(this.j.anonymisationMethod){case null:case ih.replayRecordingMaskedUrlRegex:return!(!this.j.replayRecordingMaskedUrlRegex||!this.j.replayRecordingMaskedUrlRegex.test(this.ot.getAnonymizedUrl()));case ih.replayRecordingMaskedUrlRegexRules:return this.Vv.evaluateUrl(this.ot.getAnonymizedUrl())}return!1}switch(this.j.anonymisationMethod){case null:case ih.replayRecordingUnmaskedUrlRegex:return!(this.j.replayRecordingUnmaskedUrlRegex&&this.j.replayRecordingUnmaskedUrlRegex.test(this.ot.getAnonymizedUrl()));case ih.replayRecordingUnmaskedUrlRegexRules:return!this.Vv.evaluateUrl(this.ot.getAnonymizedUrl())}return!0},t.prototype.Fv=function(){this.j.anonymisationMethod===ih.replayRecordingMaskedUrlRegexRules&&this.j.replayRecordingMaskedUrlRegexRules?this.Vv.setRegexRules(this.j.replayRecordingMaskedUrlRegexRules):this.j.anonymisationMethod===ih.replayRecordingUnmaskedUrlRegexRules&&this.j.replayRecordingUnmaskedUrlRegexRules&&this.Vv.setRegexRules(this.j.replayRecordingUnmaskedUrlRegexRules)},t}(),Uh=function(){function t(){this.Gv=[]}return t.prototype.setRegexRules=function(t){var n=this;this.Gv=csArray.prototype.map.call(t,(function(t){return n.zv(t)}))},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this.Gv,(function(i){var r,e,s=n.Jv(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(s)):null===(e=i.regex)||void 0===e?void 0:e.test(s)}))},t.prototype.Jv=function(t,n){var i=un(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.$v=function(t){return t.ignoreCaseSensitivity?"i":""},t.prototype.zv=function(t){switch(t.operator){case rh.NOT_START:t.notOperator=!0;case rh.START:t.regex=new RegExp("^".concat(t.value),this.$v(t));break;case rh.NOT_END:t.notOperator=!0;case rh.END:t.regex=new RegExp("".concat(t.value,"$"),this.$v(t));break;case rh.NOT_CONTAIN:t.notOperator=!0;case rh.CONTAIN:t.regex=new RegExp("".concat(t.value),this.$v(t));break;case rh.NOT_EXACT:t.notOperator=!0;case rh.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.$v(t));break;default:wn.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},t}(),jh=function(){function t(){this.Wv=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml"]}return t.prototype.setCollectionOptions=function(t){this.Xv=t},t.prototype.isValidBodyType=function(t){var n=t["content-type"];if(!n)return!1;var i=csString.prototype.toLocaleLowerCase.call(n);return Jn(this.Wv,(function(t){return nt(i,t)}))},t.prototype.canCollect=function(t,n){return this.Yv(t,n)&&this.Kv(n)},t.prototype.Yv=function(t,n){return t>=400||t>=200&&t<300&&this.Xv.statusCodes.has(t)&&this.Zv(n)},t.prototype.Zv=function(t){return Jn(this.Xv.urls,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},t.prototype.Kv=function(t){return function(t,n){for(var i=t.length,r=0;r<i;r++)if(!n(t[r],r))return!1;return!0}(this.Xv.excludedDomains,(function(n){return-1===csString.prototype.indexOf.call(t,n)}))},t}(),qh=function(t){function n(){var n=t.call(this)||this;return n.Qv=csSymbol("ApiCall"),n._i=!1,n.td=null,n.nd=null,n.rd=null,n.sd=function(t){var i=t.context,r=t.args,e=t.callerName;return n.interceptOpen(i,r,e)},n.ud=function(t){var i=t.context,r=t.args;return n.interceptSetRequestHeader(i,r)},n.od=function(t){var i=t.context,r=t.args;return n.interceptSend(i,r)},n}return J(n,t),n.prototype.onEvent=function(t){this.As=t},n.prototype.start=function(){this._i||(this.ad(),this.td&&this.td.activate(),this.nd&&this.nd.activate(),this.rd&&this.rd.activate(),this._i=!0)},n.prototype.stop=function(){this._i&&(this.td&&this.td.deactivate(),this.nd&&this.nd.deactivate(),this._i=!1)},n.prototype.ad=function(){this.td||(this.td=Hi({target:XMLHttpRequest.prototype,methodName:"open",hook:this.sd,options:{withCallerName:!0}})),this.nd||(this.nd=Hi({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.ud})),this.rd||(this.rd=Hi({target:XMLHttpRequest.prototype,methodName:"send",hook:this.od}))},n.prototype.interceptOpen=function(t,n,i){var r=this;if(n[1]&&jt(n[1])){var e=csString.prototype.split.call(n[1],"?"),s=e[0],u=e[1];t[this.Qv]={library:i,requestTime:Ct(),method:n[0],url:tn(s),queryParameters:u,statusCode:0,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",(function(){return r.readyStateChangeListener(t)}))}},n.prototype.readyStateChangeListener=function(n){n[this.Qv]&&n.readyState===XMLHttpRequest.DONE&&this.canCollect(n.status,n[this.Qv].url)&&(n[this.Qv].responseTime=Ct(),n[this.Qv].statusCode=n.status,n[this.Qv].responseHeaders=this.ld(n.getAllResponseHeaders()),!t.prototype.isValidBodyType.call(this,n[this.Qv].responseHeaders)||""!==n.responseType&&"text"!==n.responseType||(n[this.Qv].responseBody=n.responseText),this.As(n[this.Qv]))},n.prototype.interceptSetRequestHeader=function(t,n){if(t[this.Qv]){var i=n[0],r=csString.prototype.valueOf.call(new csString(n[1]));"string"==typeof i&&0!==r.length&&(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.Qv].requestHeaders[i]?t[this.Qv].requestHeaders[i]+=", ".concat(r):t[this.Qv].requestHeaders[i]=r)}},n.prototype.interceptSend=function(n,i){n[this.Qv]&&t.prototype.isValidBodyType.call(this,n[this.Qv].requestHeaders)&&"string"==typeof i[0]&&(n[this.Qv].requestBody=i[0])},n.prototype.ld=function(t){var n={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),(function(t){var i=csString.prototype.split.call(t,/:\s*/),r=i[0],e=i[1];e&&(n[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(e))})),n},X([yn("XhrRequestTracker.interceptOpen")],n.prototype,"interceptOpen",null),X([yn("XhrRequestTracker.readyStateChangeListener")],n.prototype,"readyStateChangeListener",null),X([yn("XhrRequestTracker.interceptSetRequestHeader")],n.prototype,"interceptSetRequestHeader",null),X([yn("XhrRequestTracker.interceptSend")],n.prototype,"interceptSend",null),n}(jh),Hh=function(t){function n(){var n=t.call(this)||this;return n._i=!1,n.vd=null,n.dd=function(t){var i=t.result,r=t.args,e=t.callerName;n.interceptFetch(i,r,e)},n}return J(n,t),n.prototype.onEvent=function(t){this.As=t},n.prototype.start=function(){this._i||this.wd()&&(this.pd(),this.vd&&this.vd.activate(),this._i=!0)},n.prototype.stop=function(){this._i&&(this.vd&&this.vd.deactivate(),this._i=!1)},n.prototype.wd=function(){return!!window.fetch&&"function"==typeof window.fetch},n.prototype.yd=function(t){if(t[0]&&"function"==typeof t[0].clone){var n=Bn(t);return n[0]=t[0].clone(),n}return t},n.prototype.pd=function(){this.vd||(this.vd=Hi({target:window,methodName:"fetch",hook:this.dd,hookPrepareArgs:this.yd,options:{withCallerName:!0}}))},n.prototype.interceptFetch=function(n,i,r){return Y(this,void 0,void 0,(function(){var e,s,u,o,c,h,a,f,l,v,d,w,p;return K(this,(function(y){switch(y.label){case 0:if(e=i[0],s=i[1],!jt((u=new Request(e,s)).url))return[2];o=Ct(),y.label=1;case 1:return y.trys.push([1,3,,4]),[4,n];case 2:return c=y.sent(),[3,4];case 3:if(h=y.sent(),this.md(h)||this.gd(h)||this.Sd(h))return[2];throw h;case 4:return a=csString.prototype.split.call(u.url,"?"),f=a[0],l=a[1],v=tn(f),t.prototype.canCollect.call(this,c.status,v)?(d={library:r,method:u.method,url:v,queryParameters:l,requestTime:o,responseTime:Ct(),statusCode:c.status,requestBody:"",responseBody:"",requestHeaders:this.bd(u.headers),responseHeaders:this.bd(c.headers)},c.bodyUsed||!t.prototype.isValidBodyType.call(this,d.responseHeaders)?[3,6]:(w=d,[4,c.clone().text()])):[3,9];case 5:w.responseBody=y.sent(),y.label=6;case 6:return t.prototype.isValidBodyType.call(this,d.requestHeaders)?(p=d,[4,u.text()]):[3,8];case 7:p.requestBody=y.sent(),y.label=8;case 8:this.As(d),y.label=9;case 9:return[2]}}))}))},n.prototype.md=function(t){return t instanceof TypeError},n.prototype.gd=function(t){return t instanceof DOMException&&"AbortError"===t.name},n.prototype.Sd=function(t){return t instanceof DOMException&&csArray.prototype.some.call(n.Ad,(function(n){return n===t.name}))},n.prototype.bd=function(t){var n={};return t.forEach((function(t,i){t&&(n[csString.prototype.toLowerCase.call(i)]=csString.prototype.trim.call(t))})),n},n.Ad=["NoModificationAllowedError","InvalidStateError","OperationError"],X([yn("FetchRequestTracker.interceptFetch")],n.prototype,"interceptFetch",null),n}(jh),Bh=function(){function t(){this.Ed=64e3,this.Rd=5e3,this.Td=2e3,this.Od=8e3,this.Ku=!!self.TextEncoder,this.Ku&&(this.Nd=new TextEncoder)}return t.prototype.kd=function(t){return this.Nd.encode(t).byteLength},t.prototype.Cd=function(n,i,r){var e=0;n[i]&&(e+=this.kd(n[i]))>this.Od&&(e=0,n[i]=os.ELLIPSIS),n[r]&&(e+=this.kd(csJSON.stringify(n[r])))>this.Od&&(n[r]=t.truncatedObjectMarker)},t.prototype.Id=function(t){t.queryParameters&&this.kd(t.queryParameters)>this.Td&&(t.queryParameters=os.ELLIPSIS)},t.prototype._d=function(t){t.requestBody&&this.kd(t.requestBody)>this.Ed&&(t.requestBody=os.ELLIPSIS),t.responseBody&&this.kd(t.responseBody)>this.Rd&&(t.responseBody=os.ELLIPSIS)},t.prototype.truncate=function(t){this.Ku?(this.Id(t),this._d(t),this.Cd(t,"customResponseHeaders","plainCustomResponseHeaders"),this.Cd(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})},t.truncatedObjectMarker=((Mh={})[os.ELLIPSIS]=os.ELLIPSIS,Mh),t}();!function(t){t.isValidJSONPath=function(t){if(!t)return!0;if(!function(t){for(var n=[],i=0;i<t.length;++i)if("["===t[i])csArray.prototype.push.call(n,t[i]);else if("]"===t[i]){if(!(csString.prototype.indexOf.call(t,"[")>-1))return!1;csArray.prototype.pop.call(n)}return 0===n.length}(t))return!1;var n=csString.prototype.split.call(t,/[\[\]]/);return csArray.prototype.every.call(n,(function(t){var n=t[0],i=t[t.length-1];if(("'"===n||'"'===n)&&n!==i)return!1;var r=csString.prototype.split.call(t,".");return 0===r[0].length&&csArray.prototype.shift.call(r),csArray.prototype.every.call(r,(function(t){var n=/^\-?\d+$/.exec(t);return n?parseInt(n[0],10)>=0:"$"===t||/\w+/.test(t)}))}))},t.getJSONPathValue=function(t,n){if(t){var i=csString.prototype.split.call(t,/[\$\[\]]/),r=[];csArray.prototype.forEach.call(i,(function(t){var n;"'"!==t[0]&&'"'!==t[0]?(n=csArray.prototype.push).call.apply(n,Ni([r],csArray.prototype.filter.call(csString.prototype.split.call(t,"."),(function(t){return t.length>0})),!1)):csArray.prototype.push.call(r,csString.prototype.substring.call(t,1,t.length-1))})),"$"===r[0]&&csArray.prototype.shift.call(r);for(var e=n,s=0,u=r;s<u.length;s++){var o=u[s];if(void 0===e[o])return;e=e[o]}return e}}}(Dh||(Dh={}));var Vh,Fh=function(){function t(){this.Pd=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}return t.prototype.isValidStandardHeader=function(t){return this.Pd.has(t)},t}(),Gh=function(){function t(){this.xd=64e3,this.Md=100,this.Dd={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.Ld=new Fh}return t.prototype.Ud=function(t){return t.length<=this.xd},t.prototype.jd=function(t){var n=t["content-type"];return void 0!==n&&(xt(n,"application/json")||xt(n,"application/graphql"))},t.prototype.qd=function(t,n){return t&&this.Ud(t)&&this.jd(n)},t.prototype.Hd=function(t,n,i,r){var e="request"===r?this.Bd:this.Vd;if(void 0!==e||this.qd(n,i)){if(void 0===e)try{e=csJSON.parse(n),"request"===r?this.Bd=e:this.Vd=e}catch(t){return}var s=Dh.getJSONPathValue(t,e);if(void 0!==s&&(null===s||!qt(s))){var u=jt(s)?s:csJSON.stringify(s);return os.truncate(u,this.Md,os.ELLIPSIS)}}},t.prototype.isBodyAttributeValueFound=function(t,n){var i,r;return"request-response"!==n.type&&"response"!==n.type||(i=this.Hd(n.path,t.responseBody,t.responseHeaders,"response")),"request-response"!==n.type&&"request"!==n.type||(r=this.Hd(n.path,t.requestBody,t.requestHeaders,"request")),Ht(i)||Ht(r)},t.prototype.collectBodyAttribute=function(t,n,i){var r;"request-response"!==n.type&&"response"!==n.type||(r=this.Hd(n.path,t.responseBody,t.responseHeaders,"response"))&&(n.encrypted?this.Dd.responseBodyAttributes[n.path]=r:(r=i(r),this.Dd.plainResponseBodyAttributes[n.path]=r)),"request-response"!==n.type&&"request"!==n.type||(r=this.Hd(n.path,t.requestBody,t.requestHeaders,"request"))&&(n.encrypted?r&&(this.Dd.requestBodyAttributes[n.path]=r):(r=i(r),this.Dd.plainRequestBodyAttributes[n.path]=r))},t.prototype.isBodyContentMatching=function(t,n){return!!t.responseBody&&!!new RegExp(n,"i").test(t.responseBody)},t.prototype.collectBodyContent=function(t){-1===csArray.prototype.indexOf.call(this.Dd.matchingBodyContents,t)&&csArray.prototype.push.call(this.Dd.matchingBodyContents,t)},t.prototype.collectCustomHeaders=function(t,n,i){var r=csString.prototype.toLocaleLowerCase.call(n.headerName);!t.responseHeaders[r]||"request-response"!==n.type&&"response"!==n.type||(n.encrypted?this.Dd.customResponseHeaders[r]=t.responseHeaders[r]:this.Dd.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),!t.requestHeaders[r]||"request-response"!==n.type&&"request"!==n.type||(n.encrypted?this.Dd.customRequestHeaders[r]=t.requestHeaders[r]:this.Dd.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))},t.prototype.collectStandardHeaders=function(t){if(!(Object.keys(this.Dd.standardRequestHeaders).length>0||Object.keys(this.Dd.standardResponseHeaders).length>0)){for(var n=0,i=Object.entries(t.requestHeaders);n<i.length;n++){var r=i[n],e=r[0],s=r[1];this.Ld.isValidStandardHeader(e)&&(this.Dd.standardRequestHeaders[e]=s)}for(var u=0,o=Object.entries(t.responseHeaders);u<o.length;u++){var c=o[u],h=c[0];s=c[1];this.Ld.isValidStandardHeader(h)&&(this.Dd.standardResponseHeaders[h]=s)}}},t.prototype.setCollectQueryParam=function(t){t&&(this.Dd.collectQueryParam=!0)},t.prototype.setCollectResponseBody=function(t){t&&(this.Dd.collectResponseBody=!0)},t.prototype.setCollectRequestBody=function(t){t&&(this.Dd.collectRequestBody=!0)},t.prototype.getCollectedDataPoints=function(){return this.Dd},t}();!function(t){t.CONTENTSQUARE="contentsquare.net",t.CLICKTALE="clicktale.net",t.FAKE_TRACKER="fake-tracker.content-square.fr"}(Vh||(Vh={}));var zh,Jh=function(){function t(){}return t.prototype.computeApiErrorCollectionOptions=function(){var t=new Set,n=[];if(this.rules)for(var i=0,r=this.rules;i<r.length;i++){var e=r[i];void 0!==e.statusCode&&t.add(e.statusCode),void 0!==e.url&&-1===csArray.prototype.indexOf.call(n,e.url)&&csArray.prototype.push.call(n,e.url)}var s=[Vh.CONTENTSQUARE,Vh.CLICKTALE];return csArray.prototype.push.call(s,Vh.FAKE_TRACKER),{statusCodes:t,urls:n,excludedDomains:s}},t}(),$h=function(t){function n(n,i){var r=t.call(this)||this;return r.Fd=n,r.q=i,r.rules=n.collectionRules,r}return J(n,t),n.prototype.collectDataPoints=function(t,n){this.Dd=new Gh;var i=!1;if(this.Fd.collectionRules)for(var r=0,e=this.Fd.collectionRules;r<e.length;r++){var s=e[r];this.Gd(s,t)&&this.zd(s,t)&&this.Jd(s,t)&&(i=!0,this.$d(t,s,n))}return i||(i=this.Wd(t)),i&&n&&this.Fd.collectStandardHeaders&&this.Dd.collectStandardHeaders(t),i?this.Dd.getCollectedDataPoints():null},n.prototype.computeApiErrorCollectionOptions=function(){for(var t=this.Fd.collectionRules||[],n=new Set,i=[],r=0,e=t;r<e.length;r++){var s=e[r];void 0!==s.statusCode&&n.add(s.statusCode),void 0!==s.url&&-1===csArray.prototype.indexOf.call(i,s.url)&&csArray.prototype.push.call(i,s.url)}var u=[Vh.CONTENTSQUARE,Vh.CLICKTALE];return csArray.prototype.push.call(u,Vh.FAKE_TRACKER),{statusCodes:n,urls:i,excludedDomains:u}},n.prototype.Gd=function(t,n){return(!t.statusCode&&n.statusCode>=400||void 0!==t.statusCode&&t.statusCode===n.statusCode)&&(!t.url||-1!==csString.prototype.indexOf.call(n.url,t.url))},n.prototype.zd=function(t,n){return!t.bodyContent||this.Dd.isBodyContentMatching(n,t.bodyContent)},n.prototype.Jd=function(t,n){var i=csArray.prototype.find.call(t.bodyAttributePaths,(function(t){return t.primary}));return void 0===i||this.Dd.isBodyAttributeValueFound(n,i)},n.prototype.Wd=function(t){return t.statusCode>=400},n.prototype.$d=function(t,n,i){var r=this;n.bodyContent&&this.Dd.collectBodyContent(n.bodyContent);var e=zn(n.bodyAttributePaths,(function(t){return 1===t.primary}));if(e&&this.Dd.collectBodyAttribute(t,e,(function(t){return r.q.anonymizePII(t)})),i){this.Dd.setCollectQueryParam(n.collectQueryParam),this.Dd.setCollectResponseBody(n.collectResponseBody),this.Dd.setCollectRequestBody(n.collectRequestBody);for(var s=0,u=n.customHeaders;s<u.length;s++){var o=u[s];this.Dd.collectCustomHeaders(t,o,(function(t){return r.q.anonymizePII(t)}))}for(var c=0,h=$n(n.bodyAttributePaths,(function(t){return!t.primary}));c<h.length;c++){var a=h[c];this.Dd.collectBodyAttribute(t,a,(function(t){return r.q.anonymizePII(t)}))}}},n}(Jh),Wh=function(t){function n(n,i){var r=t.call(this)||this;return r.Fd=n,r.q=i,r.rules=n.configurableApiErrorRules,r}return J(n,t),n.prototype.collectDataPoints=function(t,n){this.Dd=new Gh;var i=this.Xd(t,this.Fd.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.Dd.collectBodyContent(i.matchingBodyContents[0]),n&&this.Yd(t),this.Dd.getCollectedDataPoints()):null},n.prototype.computeApiErrorCollectionOptions=function(){for(var t=this.Fd.configurableApiErrorRules||[],n=new Set,i=[],r=0,e=t;r<e.length;r++){var s=e[r];void 0!==s.statusCode&&n.add(s.statusCode),void 0!==s.url&&-1===csArray.prototype.indexOf.call(i,s.url)&&csArray.prototype.push.call(i,s.url)}var u=[Vh.CONTENTSQUARE,Vh.CLICKTALE];return csArray.prototype.push.call(u,Vh.FAKE_TRACKER),{statusCodes:n,urls:i,excludedDomains:u}},n.prototype.Xd=function(t,n){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(n)for(var i=0,r=n;i<r.length;i++){var e=r[i];if(this.Kd(t,e))return{isMatching:!0,matchingBodyContents:e.bodyContent?[e.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}},n.prototype.Kd=function(t,n){return!(t.statusCode!==n.statusCode||-1===csString.prototype.indexOf.call(t.url,n.url)||n.bodyContent&&!this.Dd.isBodyContentMatching(t,n.bodyContent))},n.prototype.Yd=function(t){this.Fd.collectStandardHeaders&&this.Dd.collectStandardHeaders(t),this.Fd.validCustomHeaders&&this.Zd(t,this.Fd.validCustomHeaders,Number(!0)),this.Fd.plainCustomHeaders&&this.Zd(t,this.Fd.plainCustomHeaders,Number(!1)),this.Zv(t.url,this.Fd.validUrls)&&(this.Fd.collectQueryParam&&this.Dd.setCollectQueryParam(Number(this.Fd.collectQueryParam)),this.Fd.collectResponseBody&&this.Dd.setCollectResponseBody(Number(this.Fd.collectResponseBody)),this.Fd.collectRequestBody&&this.Dd.setCollectRequestBody(Number(this.Fd.collectRequestBody)))},n.prototype.Zd=function(t,n,i){for(var r=this,e=0,s=n;e<s.length;e++){var u=s[e];this.Dd.collectCustomHeaders(t,{headerName:u,encrypted:i,type:"request-response"},(function(t){return r.q.anonymizePII(t)}))}},n.prototype.Zv=function(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return-1!==csString.prototype.indexOf.call(t,n)}))},n}(Jh),Xh=function(t){function n(n){var i=t.call(this)||this;return i.rc=null,i.Qd=null,i.Xn=null,i.Xu=null,i.tw=0,i.nw=["value","checked","src","data","alt"],i.iw={state:gr.SensitiveState.Child},i.rw=function(t){for(var n=0,r=t;n<r.length;n++){var e=r[n];if(gr.isSensitive(e.target)||gr.isSensitiveChild(e.target))for(var s=0;s<e.addedNodes.length;s+=1){var u=e.addedNodes[s];gr.isSensitive(u)||gr.isSensitiveChild(u)||f(u)&&i.ew(u)}for(s=0;s<e.removedNodes.length;s+=1){var o=e.removedNodes[s];Me.isConnected(o)||i.uw(o)}}},i.ow=n,i}return lr(n,t),n.prototype.setSensitiveSettings=function(t){this.Ol=t},n.prototype.start=function(){this.tw++,this.isStarted||(this.isStarted=!0,this.onStart())},n.prototype.stop=function(){this.isStarted&&(this.tw--,0===this.tw&&(this.isStarted=!1,this.onStop()))},n.prototype.onStart=function(){var t,n,i,r,e=this,s=this.Ol,u=s.elementSelector,o=s.attrSelector,c=s.attrSelectors;null!==(t=this.Xu)&&void 0!==t||(this.Xu=this.hw()),0!==u.length&&(null!==(n=this.rc)&&void 0!==n||(this.rc=this.aw()),this.rc.observe(u)),0!==o.length&&(null!==(i=this.Qd)&&void 0!==i||(this.Qd=this.fw(c)),this.Qd.observe(o)),null!==(r=this.Xn)&&void 0!==r||(this.Xn=new Kr(this.rw,(function(t,n){return"added"===n&&e.lw(t)}))),this.Xn.observe(),csSetTimeout(this.ow)},n.prototype.onStop=function(){var t,n,i;this.rc&&(this.uw(document),this.rc.disconnect()),null===(t=this.Qd)||void 0===t||t.disconnect(),null===(n=this.Xn)||void 0===n||n.disconnect(),null===(i=this.Xu)||void 0===i||i.disconnect()},n.prototype.hw=function(){var t=this;return window.ResizeObserver?new ResizeObserver((function(n){csArray.prototype.forEach.call(n,(function(n){t.resizeObserverCallback(n)}))})):null},n.prototype.aw=function(){var t=this;return new Zr((function(n){csArray.prototype.forEach.call(n,(function(n){t.pw(n)?t.ew(n):(t.yw(n),t.mw(n))}))}))},n.prototype.fw=function(t){var n=this;return new Zr((function(i){csArray.prototype.forEach.call(i,(function(i){return n.gw(i,t)}))}))},n.prototype.resizeObserverCallback=function(t){var n=t.target.getBoundingClientRect(),i=gr.getSensitiveDetails(t.target);if(i.state===gr.SensitiveState.Parent&&(n.width!==i.width||n.height!==i.height)){var r={state:gr.SensitiveState.Parent,width:n.width,height:n.height};gr.setSensitiveProperty(t.target,r),this.produceEvent({type:"ResizeSensitiveElement",target:ar(t.target),width:n.width,height:n.height})}},n.prototype.mw=function(t){this.Xu&&f(t)&&!g(t)&&this.Xu.observe(t)},n.prototype.pw=function(t){var n=csNodeparentNode.apply(t);return n?gr.isSensitive(n)||gr.isSensitiveChild(n):!!R(t)&&(gr.isSensitive(t.host)||gr.isSensitiveChild(t.host))},n.prototype.lw=function(t){(gr.isSensitive(t.host)||gr.isSensitiveChild(t.host))&&gr.setSensitiveProperty(t,this.iw)},n.prototype.uw=function(t){_i(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){gr.unsetSensitiveProperty(t)}))},n.prototype.yw=function(t){var n=this,i=t.getBoundingClientRect(),r={state:gr.SensitiveState.Parent,width:i.width,height:i.height};gr.setSensitiveProperty(t,r),this.Sw(t),_i(t).visitAll((function(i){return i!=t&&gr.setSensitiveProperty(i,n.iw)}))},n.prototype.ew=function(t){var n=this;gr.setSensitiveProperty(t,this.iw),_i(t).visitAll((function(i){return i!=t&&gr.setSensitiveProperty(i,n.iw)}))},n.prototype.Sw=function(t){for(var n,i=null!==(n=ur.getProperty(t,gr.sensitiveAttributeProp))&&void 0!==n?n:{attributes:[]},r=0;r<this.nw.length;r+=1){var e=this.nw[r];-1===csArray.prototype.indexOf.call(i.attributes,e)&&csArray.prototype.push.call(i.attributes,e)}0!==i.attributes.length&&gr.setSensitiveAttributeProperty(t,i)},n.prototype.gw=function(t,n){for(var i,r=null!==(i=ur.getProperty(t,gr.sensitiveAttributeProp))&&void 0!==i?i:{attributes:[]},e=function(i){var e=t.attributes[i].name;-1===csArray.prototype.indexOf.call(r.attributes,e)&&csArray.prototype.some.call(n,(function(n){return csString.prototype.indexOf.call(n.attrName,e)>-1&&br.call(t,n.selector)}))&&csArray.prototype.push.call(r.attributes,e)},s=0;s<t.attributes.length;s+=1)e(s);0!==r.attributes.length&&gr.setSensitiveAttributeProperty(t,r)},dr([yn()],n.prototype,"resizeObserverCallback",null),n}(es),Yh=["setPIISelectors"],Kh=function(){function t(t,n,i,r){this.nh=t,this.bw=n,this.Rc=i,this.ge=r}return t.prototype.init=function(){var t=this;this.nh.register(Yh,(function(n){t.ge.setSensitiveSettingsFromCommand(n),t.Rc.emitRecordingStatusChange()}))},t.prototype.onStartTracking=function(){this.bw.start()},t}(),Zh=["identify"],Qh=["getIdentity"],ta=["resetIdentity"],na=function(){function t(t){this.nh=t}return t.prototype.init=function(){this.nh.register(Zh,(function(t){var n;return null===(n=window.heap)||void 0===n?void 0:n.identify(t)})),this.nh.register(ta,(function(){var t;return null===(t=window.heap)||void 0===t?void 0:t.resetIdentity()})),this.nh.register(Qh,(function(){var t;return null===(t=window.heap)||void 0===t?void 0:t.getIdentity()}))},t}(),ia=function(){function t(t,n){this.Ae=t,this.ge=n}return t.prototype.start=function(){this.Ae.setSensitiveSettings(this.ge.getSensitiveSettings())},t}(),ra=["hidePageTitle"],ea=["resetHidePageTitle"],sa=function(){function t(t,n){this.Vf=t,this.nh=n}return t.prototype.init=function(){var t=this;this.nh.register(ra,(function(n){var i="onNextPageviewOnly"===n;t.Vf.setHidePageTitle(i)})),this.nh.register(ea,(function(){return t.Vf.resetHidePageTitle()}))},t.prototype.onAfterNaturalPageView=function(){this.Vf.updateStateOnAfterPageview()},t.prototype.onAfterArtificialPageView=function(){this.Vf.updateStateOnAfterPageview()},t}(),ua=function(){function t(){this.Aw=255,this.Ew="****",this.Rw="data-cs-hide-title",this.Tw="data-heap-redact-text",this.Ow={value:!1,onNextPageviewOnly:!1}}return t.prototype.getRequestParameters=function(){return{t:this.Ow.value||this.Nw()?this.Ew:this.kw(window.document.title)}},t.prototype.setHidePageTitle=function(t){this.Ow={value:!0,onNextPageviewOnly:t}},t.prototype.resetHidePageTitle=function(){this.Ow={value:!1,onNextPageviewOnly:!1}},t.prototype.updateStateOnAfterPageview=function(){this.Ow.onNextPageviewOnly&&this.resetHidePageTitle()},t.prototype.Nw=function(){var t=window.csquerySelector[document.nodeType].call(document,"head > title");return null!==t&&(null!==t.getAttribute(this.Rw)||null!==t.getAttribute(this.Tw))},t.prototype.kw=function(t){return t.length>this.Aw?csString.prototype.substring.call(t,0,this.Aw):t},t}(),oa=function(){function t(t,n,i,r,e,s,u,o,c,h,a,f,l,v,d,w,p,y,m,g,S,b,A,E,R,T,O){var N=this;this.jc=t,this.Zh=n,this.K=i,this.Z=r,this.Rc=e,this.nh=s,this.Cw=u,this.j=o,this.Iw=c,this._w=h,this.Pw=a,this.Bf=f,this.q=l,this.tf=v,this.oh=d,this.ot=w,this.xw=p,this.hl=y,this.Fh=m,this.wn=g,this.Mw=S,this.eh=b,this.Dw=A,this.Lw=E,this.uh=R,this.yn=T,this.Uw=O,this.jw=function(t){void 0===t&&(t=!1),N.qw.start(t),N.Hw.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,u,o,c,h,a,f,l,v,d,w,p=this;(this.Iw.init(),this._w.init(),this._w.isActive())||(this.Lw.schedule((function(){l=new Wc(p.Z,p.K),w=new Ph(l),f=new qc(p.tf),t=new Tc(p.j,p.jc,p.K,p.tf,f,p.nh,l,new Sh(wn),p.Fh,p.uh,p.hl),n=new Qu(p.nh,p.Z,p.j,p.jc,p.Zh,p.q),v=new lh(p.j),d=new Xh((function(){})),a=new Eh;var y=new wh(p.j);(h=new dh(p.j,y,a,p.Fh)).init();var m=new _h;i=new Wu(p.K,p.Z,p.nh,p.Fh,y,p.j,m,a),r=new co(p.j,p.jc,p.K,p.nh,p.q,l,p.ot),p.Bw()&&(p.Vf=new ua,p.Vw=new sa(p.Vf,p.nh),p.Rc.addListener(p.Vw),p.Vw.init()),p.qw=new jc(p.j,p.nh,p.Rc,p.jc,p.K,p.Z,p.Bf,p.wn,p.oh,p.ot,p.eh,m,p.Vf),e=new $c(p.j,p.K,p.Z,p.nh),s=new Qc(p.j,p.Z,p.ot,p.nh,p.jw,v),u=new ch(p.j,p.nh,p.Zh,p.jc,p.hl),o=new vh(p.nh),c=new Ah(p.j,new Dt(p.j,p.q),p.uh),p.Hw=new Hc})),this.j.apiErrors.enabled&&this.Lw.schedule((function(){var t,n;n=(null===(t=p.j.apiErrors.collectionRules)||void 0===t?void 0:t.length)?new $h(p.j.apiErrors,p.q):new Wh(p.j.apiErrors,p.q),p.ve=new yh(new qh,new Hh,n),p.de=new mh(p.oh),p.Oe=new Bh;var i=new Nh(p.ve,p.de,p.j,p.jc,p.Fh,p.nh,p.uh);i.init(),p.Rc.addListener(i)})),this.j.jsErrorsEnabled&&this.Lw.schedule((function(){p.Cv=new ah,p.le=new gh(p.q,p.ot);var t=new Ih(p.Cv,p.le,p.j,p.jc,p.Fh,p.nh,p.hl,p.ot,p.uh);t.init(),p.Rc.addListener(t)})),this.Lw.schedule((function(){p.Pw.init()})),this.Lw.schedule((function(){i.init()})),this.Lw.schedule((function(){n.init()})),this.Lw.schedule((function(){r.init()})),this.Lw.schedule((function(){p.Mw.init()})),this.Lw.schedule((function(){p.qw.init()})),this.Lw.schedule((function(){e.init()})),this.Lw.schedule((function(){s.init()})),this.Lw.schedule((function(){u.init()})),this.Lw.schedule((function(){p.xw.init()})),this.Lw.schedule((function(){o.init()})),this.Lw.schedule((function(){c.init()})),this.Lw.schedule((function(){p.Dw.init()})),this.Fw()&&(this.Lw.schedule((function(){p.Gw=new xh(p.j,p.zw(),p.wn,p.ot,d)})),this.Lw.schedule((function(){p.Jw=new na(p.nh),p.Jw.init()}))),this.Lw.schedule((function(){p.Rc.addListener(e),p.Rc.addListener(p.Cw),p.Rc.addListener(t),p.Rc.addListener(p.Pw),p.Rc.addListener(i),p.Fw()&&p.Rc.addListener(p.Gw),p.Rc.addListener(p.Mw),p.Rc.addListener(p.qw),p.Rc.addListener(s),p.Rc.addListener(u),p.Rc.addListener(n),p.Rc.addListener(h),p.Rc.addListener(c),p.Rc.addListener(w)})),this.Lw.schedule((function(){var t=new ia(d,v),n=new Kh(p.nh,t,p.Rc,v);n.init(),p.Rc.addListener(n)})),Rh.isRecordingSupported()&&this.Lw.schedule((function(){var t=new Mu(a,p.Z,p.j,p.jc,p.nh,p.q,l,v,d,p.le,p.ve,p.de,p.Rc,p.hl,p.Fh,p.eh,p.uh,p.oh,p.Oe,p.zw());t.init(),p.Rc.addListener(t),i.setRecordingService(t.recordingService)})),this.Lw.schedule((function(){t.init()})),this.Fw(),this.Lw.schedule((function(){l.onSessionExpired((function(){p.Rc.emitBeforeSessionRenewal(),p.$w(!0),p.Rc.emitAfterSessionRenewal()})),p.$w()})))},t.prototype.$w=function(t){var n,i=this;void 0===t&&(t=!1),this.nh.start(),this.Hw.onLoad((function(){i.Rc.emitStartTracking(t)})),(Xc(this.j)||this.Ww()||this.Fw())&&!t||this.jw(t),this.Fw()&&(null===(n=this.Gw)||void 0===n||n.init())},t.prototype.Ww=function(){var t;null===(t=window.heap)||void 0===t||t.getUserId;return!1},t.prototype.Fw=function(){return!1},t.prototype.Bw=function(){return!1},t.prototype.zw=function(){if(this.hh)return this.hh;var t=new Uh;return this.hh=new Lh(this.Bf,this.j,this.ot,t),this.hh.init(),this.hh},t}(),ca=function(){function t(t,n,i,r,e,s,u,o){this.j=t,this.K=n,this.dn=i,this.Xw=r,this.Yw=e,this.Kw=s,this.Zw=u,this.Qw=o}return t.prototype.compute=function(t){var n,i,r=this;this.j.crossDomainTracking&&!this.j.cookielessTrackingEnabled?this.j.crossDomainSingleIframeTracking?null===(n=this.Zw)||void 0===n||n.start((function(){return r.tp(t)})):null===(i=this.Kw)||void 0===i||i.applyUpToDate((function(){return r.tp(t)})):this.tp(t)},t.prototype.tp=function(t){this.Yw.handle(),this.Xw.clear(),this.np()?(this.Xw.restoreClearedVisitor(),t(!0)):(this.dn.exclude(this.j),t(!1))},t.prototype.np=function(){var t=et.boolean(this.j.sampleRate);return this.Qw.isForceIncluded()||!this.dn.isExcluded()&&this.K.doesVisitorExist()||!this.dn.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(zh||(zh={}));var ha,aa=function(){function t(t,n,i,r){this.j=t,this.ip=n,this.Z=i,this.Rc=r,this.rp=1e4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.ep(),this.Z.removeSession()),this.sp(t),this.setVisitor(t)},t.prototype.ep=function(){return{id:zh.generate(),visitsCount:0,appliedTrackingDraw:this.j.lastTrackingDraw,creationTimestamp:It(),lastVisitTimestamp:0,hitTimestamp:0,expires:Ct()+this.j.visitorCookieTimeout,allowSubdomains:this.j.allowSubdomains}},t.prototype.sp=function(t){var n=It();this.Z.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.j.lastTrackingDraw,this.up=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.ip.get()},t.prototype.setVisitor=function(t){this.ip.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.ip.get()},t.prototype.resetVisitor=function(){this.op(),this.Rc.emitAfterVisitorCleared()},t.prototype.removeVisitor=function(){this.ip.remove()},t.prototype.hasAllowSubdomainsChanged=function(){var t=this.getVisitor();return!!t&&t.allowSubdomains!==this.j.allowSubdomains},t.prototype.handleSubdomainChange=function(){this.ip.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.up&&t.visitsCount!==this.up},t.prototype.cp=function(){return!Ht(this.hp)||Ct()-this.hp>this.rp},t.prototype.renewVisitor=function(){this.cp()?(this.hp=Ct(),this.op(),this.Rc.emitAfterVisitorRenewal()):wn.warn("session:start:newVisitor is trying to renew visitor under time limit")},t.prototype.op=function(){this.Rc.emitBeforeVisitorRenewal(),this.removeVisitor()},t}();!function(t){t[t.NO=0]="NO",t[t.WITHDRAWN=1]="WITHDRAWN",t[t.GRANTED=2]="GRANTED"}(ha||(ha={}));var fa,la=function(){function t(t,n){this.ap=t,this.fp=n,this.lp=null,this.vp=0,this.dp=ha.NO}return t.prototype.setDynamicVariablesService=function(t){this.wp=t},t.prototype.createOrUpdateSession=function(){this.pp(),this.yp=Ct(),this.vp=0;var t=this.mp();null===t?(t=this.gp(),this.Sp(t),this.bp(t)):(t=this.fp.sanitizeSessionRecordingState(t),this.Sp(t),t.recordingState=this.fp.updateRecordingState(t)),this.setSession(t)},t.prototype.grantReplayRecording=function(t){t.recordingState=this.fp.getDisabledRecordingState(),t.recordingState=this.fp.computeInitialRecordingStateFromRecordingConsentGranted(t),this.setSession(t)},t.prototype.grantReplayRecordingBeforeSessionStart=function(){this.dp=ha.GRANTED},t.prototype.withdrawnReplayRecording=function(t){t.recordingState=this.fp.getConsentWithdrawnRecordingState(),this.setSession(t)},t.prototype.withdrawnReplayRecordingBeforeSessionStart=function(){this.dp=ha.WITHDRAWN},t.prototype.bp=function(t){this.dp===ha.WITHDRAWN?(t.recordingState=this.fp.getConsentWithdrawnRecordingState(),this.setSession(t)):this.dp===ha.GRANTED?t.recordingState=this.fp.computeInitialRecordingStateFromRecordingConsentGranted(t):t.recordingState=this.fp.computeInitialRecordingState(t),this.dp=ha.NO},t.prototype.gp=function(){return{pageNumber:0,recordingState:this.fp.getDisabledRecordingState(),etrState:Kn.ETR_OFF}},t.prototype.Sp=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.fp.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===Yn.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.fp.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber)),t},t.prototype.getSession=function(){return this.ap.get()},t.prototype.mp=function(){return this.ap.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.ap.get()},t.prototype.setSession=function(t){this.ap.set(t)},t.prototype.refreshSession=function(){var t=this.mp();t&&this.setSession(t)},t.prototype.removeSession=function(){this.ap.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==Yn.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===Kn.ETR_ON&&csArray.prototype.push.call(n,Yn.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.ap.getRawSession();return this.ap.isValid(t)},t.prototype.handleSubdomainChange=function(){this.ap.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(t){void 0===t&&(t=!0);var n=this.ap.isCacheRefreshed();return n&&t&&this.ap.resetCacheRefreshed(),n},t.prototype.extendSessionPeriodically=function(){this.lp||this.Ap()},t.prototype.extendSession=function(){var t=this.getSession();return null===t?(wn.warn("extendSession is trying to extend an expired session"),this.pp(),!1):(this.ap.set(t,oi),!0)},t.prototype.Ap=function(){this.Ep()?this.pp():this.extendSession()&&(this.Rp(),this.Tp())},t.prototype.Tp=function(){var t=this;this.lp=window.csSetTimeout((function(){t.Ap()}),174e4)},t.prototype.Ep=function(){return 1434e4-(Ct()+oi-this.yp)<0},t.prototype.pp=function(){this.lp&&(window.csClearTimeout(this.lp),this.lp=null)},t.prototype.Rp=function(){this.vp+=1,this.wp.trackDynamicVariable("session_expiry_update",this.vp)},t}(),va=function(){function t(t,n,i){this.j=t,this.K=n,this.dn=i}return t.prototype.clear=function(){this.Op()&&(this.Np=this.K.getVisitor(),this.K.removeVisitor()),this.kp()&&this.dn.removeExclusion()},t.prototype.Op=function(){return this.K.doesVisitorExist()&&this.K.getVisitor().appliedTrackingDraw!==this.j.lastTrackingDraw},t.prototype.kp=function(){return this.dn.getAppliedTrackingDraw()!==this.j.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Np&&this.K.setVisitor(this.Np)},t}(),da=function(){function t(t,n,i){this.K=t,this.Z=n,this.Cp=i}return t.prototype.handle=function(){this.K.hasAllowSubdomainsChanged()&&(this.K.handleSubdomainChange(),this.Z.handleSubdomainChange(),this.Cp.handleSubdomainChange())},t}(),wa=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),pa=function(t){function n(n){var i=t.call(this)||this;return i.Lw=n,i}return J(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.Lw.schedule((function(){return n.onStartTracking(t)}))},i=this,r=0,e=this.listeners;r<e.length;r++){n(e[r])}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){wn.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitReplayUnanonymizationConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentGranted&&i.onReplayUnanonymizationConsentGranted()}},n.prototype.emitReplayUnanonymizationConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentWithdrawn&&i.onReplayUnanonymizationConsentWithdrawn()}},n.prototype.emitAfterReplayRecordingConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentGranted&&i.onAfterReplayRecordingConsentGranted()}},n.prototype.emitAfterReplayRecordingConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentWithdrawn&&i.onAfterReplayRecordingConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onRecordingStateChange&&e.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},n.prototype.emitAfterVisitorCleared=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorCleared&&i.onAfterVisitorCleared()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},X([Pn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(wa),ya="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(fa||(fa={}));var ma,ga=function(){function t(t,n,i){this.j=t,this.yn=n,this.Uw=i}return t.prototype.get=function(){var t;return null===(t=this.j.cookielessTrackingEnabled?this.Uw.getItem(ya):this.yn.get(ya))?t:Number(t)},t.prototype.set=function(t){this.j.cookielessTrackingEnabled?this.Uw.setItem(ya,csString(t)):this.yn.set(ya,csString(t),rt)},t.prototype.remove=function(){this.j.cookielessTrackingEnabled?this.Uw.removeItem(ya):this.yn.delete(ya)},t.prototype.handleSubdomainChange=function(){this.j.cookielessTrackingEnabled||(this.j.allowSubdomains?this.yn.delete(ya,xn.CURRENT_DOMAIN):this.yn.delete(ya,this.yn.getRootDomain()))},t}(),Sa=function(){function t(t,n,i){this.j=t,this.Z=n,this.Rc=i}return t.prototype.grantReplayConsent=function(){if(Tu.isReplayConsentNeeded(this.j)){var t=this.Z.getSession();t?Tu.isRecordingBlockedByConsent(t)&&(this.Z.grantReplayRecording(t),this.Rc.emitAfterReplayRecordingConsentGranted()):this.Z.grantReplayRecordingBeforeSessionStart()}},t.prototype.withdrawReplayConsent=function(){if(Tu.isReplayConsentNeeded(this.j)){var t=this.Z.getSession();t?Tu.isRecordingWithDrawn(t)||(this.Z.withdrawnReplayRecording(t),this.Rc.emitAfterReplayRecordingConsentWithdrawn()):this.Z.withdrawnReplayRecordingBeforeSessionStart()}},t}(),ba=["replay:consent:unanonymized:granted","trackConsentGranted"],Aa=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Ea=["replay:consent:startForSession:granted"],Ra=["replay:consent:startForSession:withdrawn"],Ta=function(){function t(t,n,i,r,e){this.j=t,this.nh=n,this.Bf=i,this.Z=r,this.Rc=e}return t.prototype.init=function(){this.Ip=new Sa(this.j,this.Z,this.Rc),this.Bf.setInitialConsent(),this.kv()},t.prototype.kv=function(){var t=this;this.nh.register(ba,(function(){t.Bf.grantReplayAnonymizationConsent()})),this.nh.register(Aa,(function(){t.Bf.withdrawReplayAnonymizationConsent()})),this.nh.register(Ea,(function(){t.Ip.grantReplayConsent()})),this.nh.register(Ra,(function(){t.Ip.withdrawReplayConsent()}))},t.prototype.onOptout=function(){this.Bf.removeAllConsents()},t.prototype.onBeforeVisitorRenewal=function(){this.Bf.removeAllConsents()},t.prototype.onAfterVisitorRenewal=function(){this.Bf.setInitialConsent()},t.prototype.onAfterVisitorCleared=function(){this.Bf.setInitialConsent()},t}(),Oa=function(){function t(t,n,i){this.j=t,this.ip=n,this.Rc=i}return t.prototype.setInitialConsent=function(){var t=this.ip.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.j.consentRequired;return n&&t===fa.NOT_REQUIRED||!n&&t!==fa.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.ip.handleSubdomainChange()},t.prototype.setDefaultReplayAnonymization=function(){var t=this.j.consentRequired?fa.NOT_EXPRESSED:fa.NOT_REQUIRED;this.ip.set(t)},t.prototype.grantReplayAnonymizationConsent=function(){this.j.consentRequired&&(this.ip.set(fa.GRANTED),this.Rc.emitReplayUnanonymizationConsentGranted())},t.prototype.withdrawReplayAnonymizationConsent=function(){this.j.consentRequired&&(this.ip.set(fa.WITHDRAWN),this.Rc.emitReplayUnanonymizationConsentWithdrawn())},t.prototype.removeAllConsents=function(){this.ip.remove()},t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.j.consentRequired||this.ip.get()===fa.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.ip.get())}},t}(),Na=function(){function t(t,n,i,r,e,s,u){this.Rc=t,this.nh=n,this.Cw=i,this.Iw=r,this._w=e,this._p=s,this.Pw=u}return t.prototype.start=function(){this.Rc.addListener(this._p),this.Rc.addListener(this.Pw),this.Rc.addListener(this.Cw),this.Pw.init(),this.Iw.init(),this._w.init(),this._w.isActive()||this.nh.start()},t}(),ka=function(){function t(t,n){this.Pn=t,this.ip=n}return t.prototype.exclude=function(t){this.ip.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.ip.remove()},t.prototype.isExcluded=function(){return this.Pp()||this.xp()},t.prototype.Pp=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.ip.get()},t.prototype.xp=function(){return csString.prototype.indexOf.call(this.Pn.href,vi)>0},t}(),Ca=function(){function t(t){this.ta=t}return t.prototype.onOptout=function(){this.ta.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(ma||(ma={}));var Ia=function(){function t(t){this.ot=t,this.Mp=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Mp=new RegExp(t)},t.prototype.Dp=function(){return this.Mp.test(this.ot.getAnonymizedUrl())?ma.SessionReplay:ma.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Dp()===ma.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Dp()}},t}(),_a=["excludeURLforReplay"],Pa=function(){function t(t,n){this.ta=t,this.nh=n}return t.prototype.init=function(){var t=this;this.nh.register(_a,(function(n){jt(n)&&t.ta.setExcludeUrlForSessionReplay(n)}))},t}(),xa="_cs_inc",Ma=function(){function t(t,n){this.Pn=t,this.yn=n}return t.prototype.isForceIncluded=function(){return this.Lp()||this.jp()},t.prototype.isForceReplayRecorded=function(){return this.qp(Yn.GLOBAL_SAMPLING)},t.prototype.Lp=function(){return null!==this.yn.get(xa)},t.prototype.qp=function(t){return this.yn.get(xa)===t},t.prototype.jp=function(){return csString.prototype.indexOf.call(this.Pn.href,xa)>0},t}(),Da="_cs_optout",La=function(){function t(t,n,i){this.j=t,this.yn=n,this.Uw=i}return t.prototype.get=function(){return this.j.cookielessTrackingEnabled?this.Uw.getItem(Da):this.yn.get(Da)},t.prototype.set=function(t){this.j.cookielessTrackingEnabled?this.Uw.setItem(Da,t):this.yn.set(Da,t,rt)},t}(),Ua=function(){function t(t,n,i){this.Rc=t,this.Pn=n,this.ip=i}return t.prototype.init=function(){!this.isActive()&&this.Hp()&&this.activate()},t.prototype.isActive=function(){return"1"===this.ip.get()},t.prototype.activate=function(){this.Rc.emitOptout(),this.ip.set("1")},t.prototype.Hp=function(){return csString.prototype.indexOf.call(this.Pn.href,Da)>0},t}(),ja=["optout"],qa=["optin"],Ha=function(){function t(t,n){this.nh=t,this._w=n}return t.prototype.init=function(){var t=this;this.nh.register(ja,(function(){t._w.activate()}))},t}(),Ba=function(){function t(t,n){this.nh=t,this.Fh=n}return t.prototype.init=function(){this.Fh.addListener(this.nh)},t.prototype.onOptout=function(){this.nh.stop()},t.prototype.onBeforeSessionRenewal=function(){this.nh.stop()},t}();var Va;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(Va||(Va={}));var Fa,Ga=function(t){function n(n){var i=t.call(this)||this;return i.Bp=n,i.Vp={},i}return J(n,t),n.prototype.register=function(t,n,i){for(var r=0,e=t;r<e.length;r++){var s=e[r];this.Vp[s]={callback:n,configuration:i},this.Vp}},n.prototype.onStart=function(){this.Fp(),this.Gp()},n.prototype.onStop=function(){for(var t=0,n=this.Bp;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.applyFromIntegration=function(t,n,i){this.zp(t,n,"Commands.apply.from.integration: ".concat(i))},n.prototype.applyFromImplementation=function(t,n,i){this.zp(t,n,"Commands.apply.from.implementation: ".concat(i))},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.Jp(r.name,r.params,t.iframePath)}},n.prototype.zp=function(t,n,i){var r=this;this.isStarted?wn.tryToExecute(i,(function(){var i;if(r.Vp[t])return(i=r.Vp[t]).callback.apply(i,n)}))():window._uxa.push(Z([t],n,!0))},n.prototype.Jp=function(t,n,i){var r=this;wn.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.Vp[t])return(i=r.Vp[t]).callback.apply(i,n)}))()},n.prototype.Fp=function(){for(var t=this,n=0,i=this.Bp;n<i.length;n++){var r=i[n];window[r].forEach((function(n){var i=n[0],r=n.slice(1);return t.$p(i,r,!1)}))}},n.prototype.Gp=function(){for(var t=this,n=0,i=this.Bp;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.$p(i,r,!0)}}}},n.prototype.$p=function(t,n,i){var r,e,s;if(this.Vp[t]){if((null===(e=this.Vp[t].configuration)||void 0===e?void 0:e.disableApplyPending)&&!i||(null===(s=this.Vp[t].configuration)||void 0===s?void 0:s.disableApplyImmediate)&&i)return;try{return(r=this.Vp[t]).callback.apply(r,n)}catch(i){wn.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(Pr);function za(t,n){return n.visitor.visitsCount!==t.visitor.visitsCount?n.visitor.visitsCount-t.visitor.visitsCount:t.session?n.session?n.session.pageNumber-t.session.pageNumber:-1:1}!function(t){t.select=function(t,n){var i=function(t,n){return csArray.prototype.filter.call(t,(function(t){return t.exclusion===n}))[0]}(t,n),r=function(t,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(t,(function(t){return function(t,n){return t.visitor&&t.visitor.appliedTrackingDraw===n}(t,n)})),za)[0]}(t,n);return i||r}}(Fa||(Fa={}));var Ja,$a="contentsquare.net";!function(t){t.Set="set",t.Remove="remove"}(Ja||(Ja={}));var Wa,Xa=function(){function t(t,n,i,r,e,s){this.j=t,this.yn=n,this.ap=i,this.Wp=r,this.Xp=e,this.Yp=s,this.Kp=In.None,this.Zp=!1,this.Qp=[],this.ty=[]}return t.prototype.init=function(){this.Kp=this.yn.isSameSiteSupported()?In.None:In.NotSet,this.ny()},t.prototype.setStates=function(t,n){this.iy=t,this.ey=n},t.prototype.start=function(t){var n=this;this.ey.init(this.sy(),(function(i,r){var e=[n.iy.get()];r&&csArray.prototype.push.call(e,i);var s=Fa.select(e,n.j.lastTrackingDraw);n.Zp=!0,n.iy.apply(s),t()})),this.uy=this.ey.openIframe()},t.prototype.setCookie=function(t,n,i){if(this.Zp){var r={name:t,value:n,samesite:this.Kp,secure:_n.Yes};i&&(r.expires=kn.toExpireDate(i).getTime()),this.oy(r)}},t.prototype.removeCookie=function(t){this.Zp&&this.hy(t)},t.prototype.hy=function(t){this.ty=csArray.prototype.filter.call(this.ty,(function(n){return n!==t})),this.Qp=csArray.prototype.filter.call(this.Qp,(function(n){return n.name!==t})),csArray.prototype.push.call(this.ty,t),this.setBatchReadyCall()},t.prototype.oy=function(t){this.ty=csArray.prototype.filter.call(this.ty,(function(n){return n!==t.name})),this.Qp=csArray.prototype.filter.call(this.Qp,(function(n){return n.name!==t.name})),csArray.prototype.push.call(this.Qp,t),this.setBatchReadyCall()},t.prototype.setBatchReadyCall=function(){this.ly()},t.prototype.ly=function(){if(this.Qp.length>0){var t=this.vy(Ja.Set,this.Qp);this.wy(t),this.Qp=[]}if(this.ty.length>0){var n=this.vy(Ja.Remove,this.ty);this.wy(n),this.ty=[]}},t.prototype.vy=function(t,n){return{command:t,cookies:n,domain:null,pid:this.j.projectId}},t.prototype.wy=function(t){var n,i="https://".concat(this.sy());(null===(n=this.uy)||void 0===n?void 0:n.contentWindow)&&this.uy.contentWindow.postMessage(t,i)},t.prototype.sy=function(){return this.j.dualCollectionTagDomain&&this.j.dualCollectionTagDomain!==$a?"cdnssl.".concat(this.j.dualCollectionTagDomain):"csxd.".concat($a)},t.prototype.ny=function(){var t=this;this.ap.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.Wp.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.Xp.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.Yp.onCookieToSet((function(n,i,r){t.setCookie(n,i,r)})),this.ap.onCookieToRemove((function(n){t.removeCookie(n)})),this.Wp.onCookieToRemove((function(n){t.removeCookie(n)})),this.Xp.onCookieToRemove((function(n){t.removeCookie(n)})),this.Yp.onCookieToRemove((function(n){t.removeCookie(n)}))},X([Eu(),yn("send xdframe-single-iframe batch")],t.prototype,"setBatchReadyCall",null),t}(),Ya=function(){function t(t,n){this.j=t,this._n=n}return t.prototype.init=function(t,n){this.py="https://".concat(t),this.xn=n},t.prototype.openIframe=function(){var t=this;this._n.onMessage((function(n){t.Ln(n)})),this._n.onTimeout((function(){t.Un()})),this._n.start();var n=this.yy(this.py);return this._n.open(n)},t.prototype.Ln=function(t){if(this.jn(t)){var n=t.data,i=!0;if(this.my(t))return void wn.warn("Error xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));if(!li.isRawDomainState(n))return void wn.warn("Unknown message format from xdframe single domain: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin));li.isValid(n)||(wn.warn("Invalid xdframe single domain state: ".concat(csJSON.stringify(t.data)," from ").concat(t.origin)),i=!1),this._n.stop(),this.xn(i?ai.fromRaw(n):{},i)}},t.prototype.Un=function(){wn.warn("xdframe single domain: timeout: ".concat(this.yy(this.py))),this._n.stop(),this.xn({},!1)},t.prototype.jn=function(t){return t.origin===this.py&&qt(t.data)},t.prototype.my=function(t){return!!t.data.error},t.prototype.yy=function(t){var n=this.j.projectId;return"".concat(t,"/uxa/xdframe-single-domain-").concat("1.2.0",".html?pid=").concat(n)},t}(),Ka=function(){function t(t,n,i,r){this.j=t,this.K=n,this.Z=i,this.gy=r}return t.prototype.getRequestParameters=function(){var t,n,i,r,e,s=$($({},kt()),this.j.getRequestParameters()),u=this.Z.getSession();u&&(s.pn="".concat(u.pageNumber));var o=this.K.getVisitor();if(o&&(s.sn="".concat(o.visitsCount),s.uu="".concat(o.id)),(null===(t=this.gy)||void 0===t?void 0:t.hasSubProjectId())&&(s.subProjectID="".concat(this.gy.getSubProjectId())),window.heap)try{s.happid=window.heap.appid,s.hsid=null===(i=(n=window.heap).getSessionId)||void 0===i?void 0:i.call(n),s.huu=(null===(e=(r=window.heap).getUserId)||void 0===e?void 0:e.call(r))||window.heap.userId}catch(t){delete s.happid,delete s.hsid,delete s.huu}return s},t}(),Za=function(){function t(t,n){this.nh=t,this.P=n}return t.prototype.init=function(){var t=this;this.nh.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.P.updateDynamicFields("emitDebugEvents",n)}))},t}();function Qa(t,n,i){if(!Ht(n)&&!Ht(i))return t.href;var r=Ht(n)?tf(n):t.pathname,e=Ht(i)?function(t){return nt(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(e)}function tf(t){return nt(t,"/")?t:"/".concat(t)}!function(t){t[t.page=1]="page",t[t.onNextPageviewOnly=2]="onNextPageviewOnly"}(Wa||(Wa={}));var nf,rf=function(){function t(t,n){this.Pn=t,this.oh=n,this.Sy=10}return t.prototype.overridePath=function(t,n){if(""!==t){var i=this.by(n);i&&(this.Ay=i),this.Ey=n?this.Ry(t,n):t}else this.Ey=void 0},t.prototype.overrideQuery=function(t,n){var i=this.by(n);i&&(this.Ty=i),this.Oy=n?this.Ry(t,n):t},t.prototype.computeOverriddenUrl=function(t){return this.Ny(t)?this.getAnonymizedUrl():t},t.prototype.ky=function(t){return("string"==typeof t||"number"==typeof t)&&t in Wa},t.prototype.Ny=function(t){var n=this.Cy(this.Pn.href);return this.Cy(t)===n},t.prototype.Cy=function(t){return it(t,"/")?csString.prototype.slice.call(t,0,-1):t},t.prototype.by=function(t){return Ht(null==t?void 0:t.lifespan)&&this.ky(null==t?void 0:t.lifespan)?null==t?void 0:t.lifespan:null},t.prototype.Iy=function(){return this.Ay&&this.Ay in Wa},t.prototype._y=function(){return this.Ty&&this.Ty in Wa},t.prototype.cleanupOverrideLifespan=function(){this.Iy()&&(this.Ey=void 0,this.Ay=void 0),this._y()&&(this.Oy=void 0,this.Ty=void 0)},t.prototype.getAnonymizedUrl=function(){var t=Qa(this.Pn,this.Ey,this.Oy);return this.oh.anonymizeUrl(t,[])},t.prototype.getAnonymizedPath=function(){var t=Ht(this.Ey)?tf(this.Ey):location.pathname;return this.oh.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.Pn.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t.prototype.Ry=function(t,n){return this.Py(n)?this.xy(t):this.My(n)?this.Dy(t):t},t.prototype.My=function(t){return Boolean(t.decodeURI)},t.prototype.Dy=function(t){return this.Ly(t,1,!1)},t.prototype.Py=function(t){return Boolean(t.decodeURIDeep)},t.prototype.xy=function(t){return this.Ly(t,this.Sy,!0)},t.prototype.Ly=function(t,n,i){for(var r=t,e=0;e<n;e++)try{var s=window.decodeURI(r);if(s===r)return r;r=s}catch(t){return r}return i&&wn.warn("decodeURIDeep limit reached: ".concat(r)),r},t}(),ef=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onEventTriggerRecording&&e.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n.prototype.emitExternalEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onExternalEvent&&r.onExternalEvent({type:Hu.EXTERNAL_EVENT,name:t,ts:0})}},n}(wa),sf=function(){function t(t,n,i,r,e){this.configuration=t,this.Uy=n,this.Rc=i,this.Qw=r,this.ot=e,this.jy=[]}return t.prototype.init=function(){this.qy()},t.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===Yn.TEMPORARILY_RECORDED&&(t.recordingState=Yn.NOT_RECORDED),t},t.prototype.computeInitialRecordingState=function(t){return Tu.isReplayConsentNeeded(this.configuration)?Yn.BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.bp(t)},t.prototype.computeInitialRecordingStateFromRecordingConsentGranted=function(t){return this.bp(t)},t.prototype.bp=function(t){return Rh.isRecordingSupported()?(this.jy=[],et.percentage()<this.configuration.replayRecordingRate||this.Qw.isForceReplayRecorded()?csArray.prototype.push.call(this.jy,Yn.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.jy,Yn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.jy,Yn.ETR_SAMPLING),this.jy.length>0?(this.Hy(t),Yn.TEMPORARILY_RECORDED):Yn.NOT_RECORDED):Yn.NOT_RECORDED},t.prototype.updateRecordingState=function(t){return Rh.isRecordingSupported()?Tu.isRecordingBlockedByConsent(t)?t.recordingState===Yn.BLOCKED_BY_CONSENT_WITHDRAWN?Yn.BLOCKED_BY_CONSENT_WITHDRAWN:Yn.BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.recordingState===Yn.GLOBAL_SAMPLING?Yn.GLOBAL_SAMPLING:(this.jy=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.jy,Yn.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.jy,Yn.ETR_SAMPLING)),this.jy.length>0?(this.Hy(t),Yn.TEMPORARILY_RECORDED):Yn.NOT_RECORDED):Yn.NOT_RECORDED},t.prototype.Hy=function(t){var n,i=null===(n=this.K)||void 0===n?void 0:n.getVisitor();this.Uy.send({recordingTypes:csArray.prototype.map.call(this.jy,Number),url:this.ot.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},t.prototype.abortQuotaServiceRequest=function(){this.Uy.abort()},t.prototype.isReplayRecorded=function(t){return!Tu.isRecordingBlockedByConsent(t)&&(t.recordingState===Yn.TEMPORARILY_RECORDED||t.recordingState===Yn.GLOBAL_SAMPLING||t.recordingState===Yn.URL_SAMPLING||t.etrState===Kn.ETR_ON)},t.prototype.qy=function(){var t=this;this.Uy.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.Uy.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.Uy.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},t.prototype.quotaServiceErrorHandler=function(t){this.By("error - ".concat(t))},t.prototype.quotaServiceTimeoutHandler=function(){this.By("timeout")},t.prototype.By=function(t){var n=Yn.NOT_RECORDED;this.Vy(this.jy)?(n=Yn.GLOBAL_SAMPLING,wn.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):wn.warn("Quota Service: request ".concat(t)),this.Rc.emitRecordingStateChange(n,Kn.ETR_OFF)},t.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=Kn.ETR_OFF,e=Yn.NOT_RECORDED;this.Vy(i)?e=Yn.GLOBAL_SAMPLING:this.Fy(i)&&(e=Yn.URL_SAMPLING),this.Gy(i)&&(r=Kn.ETR_ON),this.Rc.emitRecordingStateChange(e,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},t.prototype.Vy=function(t){return csArray.prototype.some.call(t,(function(t){return t===Yn.GLOBAL_SAMPLING}))},t.prototype.Fy=function(t){return csArray.prototype.some.call(t,(function(t){return t===Yn.URL_SAMPLING}))},t.prototype.Gy=function(t){return csArray.prototype.some.call(t,(function(t){return t===Yn.ETR_SAMPLING}))},t.prototype.setVisitorService=function(t){this.K=t},t.prototype.getDisabledRecordingState=function(){return Yn.NOT_RECORDED},t.prototype.getConsentWithdrawnRecordingState=function(){return Yn.BLOCKED_BY_CONSENT_WITHDRAWN},X([yn("Quota Service: onerror")],t.prototype,"quotaServiceErrorHandler",null),X([yn("Quota Service: ontimeout")],t.prototype,"quotaServiceTimeoutHandler",null),X([yn("Quota Service: onload")],t.prototype,"quotaServiceLoadHandler",null),t}(),uf="|iframe|",of=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.zy=n,s.Jy=i,s.$y=r,s.Wy=e,s}return J(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.Xy(n)&&null===t)wn.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case hn.ChildLogMessage:this.Yy(i);break;case hn.AnalysisEvent:var r=i,e=this.zy.transformEvent(t,r);e.isUserEvent?this.Ky(e.event):this.Zy(e.event);break;case hn.RecordingEvent:var s=i,u=this.Wy.transformEvents(t,s);if(0===u.events.length)return;u.containsUserEvent?this.Qy(u.events):this.tm(u.events);break;case hn.JavascriptError:this.nm(i);break;case hn.ApiError:this.im(i);break;case hn.DetailedApiError:this.rm(i);break;case hn.CustomError:this.sm(i);break;case hn.EmerchandisingMessage:var o=this.$y.transformEvent(t,i);this.um(o);break;case hn.Commands:var c=this.Jy.transformEvent(t,i);this.om(c);break;case hn.IntegrationCallback:this.hm(i);break;case hn.StaticResource:this.am(i);break;case hn.TrackingContextRequestMessage:this.fm(i);break;default:wn.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.Xy=function(t){var n=[hn.AnalysisEvent,hn.RecordingEvent,hn.EmerchandisingMessage,hn.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.Yy=function(t){var n=t.message,i=t.errorCode;switch(t.level){case ut.debug:wn.debug(n,i);break;case ut.warn:wn.warn(n,i);break;case ut.error:wn.error(n,i);break;case ut.critical:wn.critical(n,i)}},n.prototype.Ky=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisUserEvent&&r.onIframeAnalysisUserEvent(t)}},n.prototype.Zy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisBrowserEvent&&r.onIframeAnalysisBrowserEvent(t)}},n.prototype.Qy=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.tm=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.nm=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.im=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.rm=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.um=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.om=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.hm=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.am=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeStaticResource&&r.onIframeStaticResource(t)}},n.prototype.fm=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n.prototype.sm=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCustomError&&r.onIframeCustomError(t)}},n}(wa);!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(nf||(nf={}));var cf=function(){function t(){}return t.init=function(t){this.lm&&void 0===t||this.initFlags(t)},t.initFlags=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.lm=new Map,i)for(var r=csString.prototype.split.call(i,"."),e=0;e<r.length;e++){var s=csString.prototype.split.call(r[e],"="),u=s[0],o=s[1];this.lm.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return this.init(),null===(n=this.lm)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(nf.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,e){var s,u=r.toString(),o="".concat(null===(s=i.constructor)||void 0===s?void 0:s.name,".").concat(u),c=e.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,Z([o],t,!1)),c.bind(this).apply(void 0,t)})}},t}();function hf(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,e=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=new Array(576);t(h);var a=new Array(60);t(a);var f=new Array(512);t(f);var l=new Array(256);t(l);var v=new Array(29);t(v);var d,w,p,y=new Array(r);function m(t,n,i,r,e){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=e,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(y);var S=function(t){return t<256?f[t]:f[256+(t>>>7)]},b=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},A=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},E=function(t,n,i){A(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},T=function(t,n,i){var r,s,u=new Array(16),o=0;for(r=1;r<=e;r++)u[r]=o=o+i[r-1]<<1;for(s=0;s<=n;s++){var c=t[2*s+1];0!==c&&(t[2*s]=R(u[c]++,c))}},O=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},N=function(t){t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=function(t,n,i,r){var e=2*n,s=2*i;return t[e]<t[s]||t[e]===t[s]&&r[n]<=r[i]},C=function(t,n,i){for(var r=t.heap[i],e=i<<1;e<=t.heap_len&&(e<t.heap_len&&k(n,t.heap[e+1],t.heap[e],t.depth)&&e++,!k(n,r,t.heap[e],t.depth));)t.heap[i]=t.heap[e],i=e,e<<=1;t.heap[i]=r},I=function(t,i,r){var e,o,c,h,a=0;if(0!==t.last_lit)do{e=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===e?E(t,o,i):(c=l[o],E(t,c+n+1,i),0!==(h=s[c])&&(o-=v[c],A(t,o,h)),e--,c=S(e),E(t,c,r),0!==(h=u[c])&&(e-=y[c],A(t,e,h)))}while(a<t.last_lit);E(t,256,i)},_=function(t,n){var i,r,s,u=n.dyn_tree,o=n.stat_desc.static_tree,c=n.stat_desc.has_stree,h=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<h;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(s=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[s]=0,t.opt_len--,c&&(t.static_len-=o[2*s+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)C(t,u,i);s=h;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*s]=u[2*i]+u[2*r],t.depth[s]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=s,t.heap[1]=s++,C(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,s,u,o,c,h=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,l=n.stat_desc.has_stree,v=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,p=0;for(u=0;u<=e;u++)t.bl_count[u]=0;for(h[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=h[2*h[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,p++),h[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=v[r-d]),c=h[2*r],t.opt_len+=c*(u+o),l&&(t.static_len+=c*(f[2*r+1]+o)));if(0!==p){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,p-=2}while(p>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(s=t.heap[--i])>a||(h[2*s+1]!==u&&(t.opt_len+=(u-h[2*s+1])*h[2*s],h[2*s+1]=u),r--)}}(t,n),T(u,a,t.bl_count)},P=function(t,n,i){var r,e,s=-1,u=n[1],o=0,c=7,h=4;for(0===u&&(c=138,h=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)e=u,u=n[2*(r+1)+1],++o<c&&e===u||(o<h?t.bl_tree[2*e]+=o:0!==e?(e!==s&&t.bl_tree[2*e]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=e,0===u?(c=138,h=3):e===u?(c=6,h=3):(c=7,h=4))},x=function(t,n,i){var r,e,s=-1,u=n[1],o=0,c=7,h=4;for(0===u&&(c=138,h=3),r=0;r<=i;r++)if(e=u,u=n[2*(r+1)+1],!(++o<c&&e===u)){if(o<h)do{E(t,e,t.bl_tree)}while(0!=--o);else 0!==e?(e!==s&&(E(t,e,t.bl_tree),o--),E(t,16,t.bl_tree),A(t,o-3,2)):o<=10?(E(t,17,t.bl_tree),A(t,o-3,3)):(E(t,18,t.bl_tree),A(t,o-11,7));o=0,s=e,0===u?(c=138,h=3):e===u?(c=6,h=3):(c=7,h=4)}},M=!1,D=function(t,n,i,r){A(t,0+(r?1:0),3),function(t,n,i,r){N(t),r&&(b(t,i),b(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},L=function(t){M||(!function(){var t,n,c,g,S,b=new Array(16);for(c=0,g=0;g<28;g++)for(v[g]=c,t=0;t<1<<s[g];t++)l[c++]=g;for(l[c-1]=g,S=0,g=0;g<16;g++)for(y[g]=S,t=0;t<1<<u[g];t++)f[S++]=g;for(S>>=7;g<r;g++)for(y[g]=S<<7,t=0;t<1<<u[g]-7;t++)f[256+S++]=g;for(n=0;n<=e;n++)b[n]=0;for(t=0;t<=143;)h[2*t+1]=8,t++,b[8]++;for(;t<=255;)h[2*t+1]=9,t++,b[9]++;for(;t<=279;)h[2*t+1]=7,t++,b[7]++;for(;t<=287;)h[2*t+1]=8,t++,b[8]++;for(T(h,287,b),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=R(t,5);d=new m(h,s,257,i,e),w=new m(a,u,0,r,e),p=new m(new Array(0),o,0,19,7)}(),M=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,p),t.bi_buf=0,t.bi_valid=0,O(t)},U=function(t,i,r,e){var s,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),_(t,t.l_desc),_(t,t.d_desc),o=function(t){var n;for(P(t,t.dyn_ltree,t.l_desc.max_code),P(t,t.dyn_dtree,t.d_desc.max_code),_(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*c[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),s=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=s&&(s=u)):s=u=r+5,r+4<=s&&-1!==i?D(t,i,r,e):4===t.strategy||u===s?(A(t,2+(e?1:0),3),I(t,h,a)):(A(t,4+(e?1:0),3),function(t,n,i,r){var e;for(A(t,n-257,5),A(t,i-1,5),A(t,r-4,4),e=0;e<r;e++)A(t,t.bl_tree[2*c[e]+1],3);x(t,t.dyn_ltree,n-1),x(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),I(t,t.dyn_ltree,t.dyn_dtree)),O(t),e&&N(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(l[r]+n+1)]++,t.dyn_dtree[2*S(i)]++),t.last_lit===t.lit_bufsize-1},q=function(t){A(t,2,3),E(t,256,h),function(t){16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},H={_tr_init:L,_tr_stored_block:D,_tr_flush_block:U,_tr_tally:j,_tr_align:q},B=function(t,n,i,r){for(var e=65535&t,s=t>>>16&65535,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{s=s+(e=e+n[r++]|0)|0}while(--u);e%=65521,s%=65521}return e|s<<16},V=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),F=function(t,n,i,r){var e=V,s=r+i;t^=-1;for(var u=r;u<s;u++)t=t>>>8^e[255&(t^n[u])];return~t},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},z=0,J=2,$=3,W=4,X=0,Y=1,K=-1,Z=0,Q=8,tt=H._tr_init,nt=H._tr_stored_block,it=H._tr_flush_block,rt=H._tr_tally,et=H._tr_align,st=z,ut=1,ot=$,ct=W,ht=5,at=X,ft=Y,lt=-2,vt=-3,dt=-5,wt=K,pt=1,yt=2,mt=3,gt=4,St=Z,bt=2,At=Q,Et=258,Rt=262,Tt=103,Ot=113,Nt=666,kt=function(t,n){return t.msg=G[n],n},Ct=function(t){return(t<<1)-(t>4?9:0)},It=function(t){for(var n=t.length;--n>=0;)t[n]=0},_t=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},Pt=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},xt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,Pt(t.strm)},Mt=function(t,n){t.pending_buf[t.pending++]=n},Dt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Lt=function(t,n){var i,r,e=t.max_chain_length,s=t.strstart,u=t.prev_length,o=t.nice_match,c=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,h=t.window,a=t.w_mask,f=t.prev,l=t.strstart+Et,v=h[s+u-1],d=h[s+u];t.prev_length>=t.good_match&&(e>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(i=n)+u]===d&&h[i+u-1]===v&&h[i]===h[s]&&h[++i]===h[s+1]){s+=2,i++;do{}while(h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&s<l);if(r=Et-(l-s),s=l-Et,r>u){if(t.match_start=n,u=r,r>=o)break;v=h[s+u-1],d=h[s+u]}}}while((n=f[n&a])>c&&0!=--e);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,e,s,u,o,c,h,a,f=t.w_size;do{if(e=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);e+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,c=t.strstart+t.lookahead,h=e,a=void 0,(a=u.avail_in)>h&&(a=h),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),c),1===u.state.wrap?u.adler=B(u.adler,o,a,c):2===u.state.wrap&&(u.adler=F(u.adler,o,a,c)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=_t(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Lt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ct?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2},qt=function(t,n){for(var i,r,e;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Lt(t,i),t.match_length<=5&&(t.strategy===pt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){e=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=e&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(xt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&xt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ct?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2};function Ht(t,n,i,r,e){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=e}var Bt=[new Ht(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===st)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,xt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ct?(xt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(xt(t,!1),t.strm.avail_out),1)})),new Ht(4,4,8,4,jt),new Ht(4,5,16,8,jt),new Ht(4,6,32,32,jt),new Ht(4,4,16,16,qt),new Ht(8,16,32,32,qt),new Ht(8,16,128,128,qt),new Ht(8,32,128,256,qt),new Ht(32,128,258,1024,qt),new Ht(32,258,258,4096,qt)];function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=At,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),It(this.dyn_ltree),It(this.dyn_dtree),It(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),It(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),It(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ft=function(t){if(!t||!t.state)return kt(t,lt);t.total_in=t.total_out=0,t.data_type=bt;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Ot,t.adler=2===n.wrap?0:1,n.last_flush=st,tt(n),at},Gt=function(t){var n=Ft(t);return n===at&&function(t){t.window_size=2*t.w_size,It(t.head),t.max_lazy_match=Bt[t.level].max_lazy,t.good_match=Bt[t.level].good_length,t.nice_match=Bt[t.level].nice_length,t.max_chain_length=Bt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},zt=function(t,n,i,r,e,s){if(!t)return lt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),e<1||e>9||i!==At||r<8||r>15||n<0||n>9||s<0||s>gt)return kt(t,lt);8===r&&(r=9);var o=new Vt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=e+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<e+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=s,o.method=i,Gt(t)},Jt=function(t,n){var i,r;if(!t||!t.state||n>ht||n<0)return t?kt(t,lt):lt;var e=t.state;if(!t.output||!t.input&&0!==t.avail_in||e.status===Nt&&n!==ct)return kt(t,0===t.avail_out?dt:lt);e.strm=t;var s=e.last_flush;if(e.last_flush=n,42===e.status)if(2===e.wrap)t.adler=0,Mt(e,31),Mt(e,139),Mt(e,8),e.gzhead?(Mt(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Mt(e,255&e.gzhead.time),Mt(e,e.gzhead.time>>8&255),Mt(e,e.gzhead.time>>16&255),Mt(e,e.gzhead.time>>24&255),Mt(e,9===e.level?2:e.strategy>=yt||e.level<2?4:0),Mt(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(Mt(e,255&e.gzhead.extra.length),Mt(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=F(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69):(Mt(e,0),Mt(e,0),Mt(e,0),Mt(e,0),Mt(e,0),Mt(e,9===e.level?2:e.strategy>=yt||e.level<2?4:0),Mt(e,3),e.status=Ot);else{var u=At+(e.w_bits-8<<4)<<8;u|=(e.strategy>=yt||e.level<2?0:e.level<6?1:6===e.level?2:3)<<6,0!==e.strstart&&(u|=32),u+=31-u%31,e.status=Ot,Dt(e,u),0!==e.strstart&&(Dt(e,t.adler>>>16),Dt(e,65535&t.adler)),t.adler=1}if(69===e.status)if(e.gzhead.extra){for(i=e.pending;e.gzindex<(65535&e.gzhead.extra.length)&&(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending!==e.pending_buf_size));)Mt(e,255&e.gzhead.extra[e.gzindex]),e.gzindex++;e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===e.status)if(e.gzhead.name){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,Mt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,Mt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.status=Tt)}else e.status=Tt;if(e.status===Tt&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&Pt(t),e.pending+2<=e.pending_buf_size&&(Mt(e,255&t.adler),Mt(e,t.adler>>8&255),t.adler=0,e.status=Ot)):e.status=Ot),0!==e.pending){if(Pt(t),0===t.avail_out)return e.last_flush=-1,at}else if(0===t.avail_in&&Ct(n)<=Ct(s)&&n!==ct)return kt(t,dt);if(e.status===Nt&&0!==t.avail_in)return kt(t,dt);if(0!==t.avail_in||0!==e.lookahead||n!==st&&e.status!==Nt){var o=e.strategy===yt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===st)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ct?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2}(e,n):e.strategy===mt?function(t,n){for(var i,r,e,s,u=t.window;;){if(t.lookahead<=Et){if(Ut(t),t.lookahead<=Et&&n===st)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[e=t.strstart-1])===u[++e]&&r===u[++e]&&r===u[++e]){s=t.strstart+Et;do{}while(r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&e<s);t.match_length=Et-(s-e),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ct?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2}(e,n):Bt[e.level].func(e,n);if(3!==o&&4!==o||(e.status=Nt),1===o||3===o)return 0===t.avail_out&&(e.last_flush=-1),at;if(2===o&&(n===ut?et(e):n!==ht&&(nt(e,0,0,!1),n===ot&&(It(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),Pt(t),0===t.avail_out))return e.last_flush=-1,at}return n!==ct?at:e.wrap<=0?ft:(2===e.wrap?(Mt(e,255&t.adler),Mt(e,t.adler>>8&255),Mt(e,t.adler>>16&255),Mt(e,t.adler>>24&255),Mt(e,255&t.total_in),Mt(e,t.total_in>>8&255),Mt(e,t.total_in>>16&255),Mt(e,t.total_in>>24&255)):(Dt(e,t.adler>>>16),Dt(e,65535&t.adler)),Pt(t),e.wrap>0&&(e.wrap=-e.wrap),0!==e.pending?at:ft)},$t=function(t,n){var i=n.length;if(!t||!t.state)return lt;var r=t.state,e=r.wrap;if(2===e||1===e&&42!==r.status||r.lookahead)return lt;if(1===e&&(t.adler=B(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===e&&(It(r.head),r.strstart=0,r.block_start=0,r.insert=0);var s=new Uint8Array(r.w_size);s.set(n.subarray(i-r.w_size,i),0),n=s,i=r.w_size}var u=t.avail_in,o=t.next_in,c=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var h=r.strstart,a=r.lookahead-2;do{r.ins_h=_t(r,r.ins_h,r.window[h+3-1]),r.prev[h&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=h,h++}while(--a);r.strstart=h,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=c,t.avail_in=u,r.wrap=e,at},Wt={deflateInit:function(t,n){return zt(t,n,At,15,8,St)},deflateInit2:zt,deflateReset:Gt,deflateResetKeep:Ft,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?lt:(t.state.gzhead=n,at):lt},deflate:Jt,deflateEnd:function(t){if(!t||!t.state)return lt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Tt&&n!==Ot&&n!==Nt?kt(t,lt):(t.state=null,n===Ot?kt(t,vt):at)},deflateSetDictionary:$t,deflateInfo:"pako deflate (from Nodeca project)"},Xt=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Yt={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)Xt(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var e=new Uint8Array(n),s=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];e.set(u,s),s+=u.length}return e}},Kt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Kt=!1}for(var Zt=new Uint8Array(256),Qt=0;Qt<256;Qt++)Zt[Qt]=Qt>=252?6:Qt>=248?5:Qt>=240?4:Qt>=224?3:Qt>=192?2:1;Zt[254]=Zt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&Kt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,e,s,u=t.length,o=0;for(e=0;e<u;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),s=0,e=0;s<o;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),i<128?n[s++]=i:i<2048?(n[s++]=192|i>>>6,n[s++]=128|63&i):i<65536?(n[s++]=224|i>>>12,n[s++]=128|i>>>6&63,n[s++]=128|63&i):(n[s++]=240|i>>>18,n[s++]=128|i>>>12&63,n[s++]=128|i>>>6&63,n[s++]=128|63&i);return n},buf2string:function(t,n){var i,r,e=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var s=new Array(2*e);for(r=0,i=0;i<e;){var u=t[i++];if(u<128)s[r++]=u;else{var o=Zt[u];if(o>4)s[r++]=65533,i+=o-1;else{for(u&=2===o?31:3===o?15:7;o>1&&i<e;)u=u<<6|63&t[i++],o--;o>1?s[r++]=65533:u<65536?s[r++]=u:(u-=65536,s[r++]=55296|u>>10&1023,s[r++]=56320|1023&u)}}}return tn(s,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Zt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,sn=z,un=J,on=$,cn=W,hn=X,an=Y,fn=K,ln=Z,vn=Q;function dn(t){this.options=Yt.assign({level:fn,method:vn,chunkSize:16384,windowBits:15,memLevel:8,strategy:ln},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,this.strm.avail_out=0;var i=Wt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==hn)throw new Error(G[i]);if(n.header&&Wt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Wt.deflateSetDictionary(this.strm,r))!==hn)throw new Error(G[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||G[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,e=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?cn:sn,"string"==typeof t?e.input=nn.string2buf(t):"[object ArrayBuffer]"===en.call(t)?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(0===e.avail_out&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),(r===un||r===on)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if((i=Wt.deflate(e,r))===an)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Wt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===hn;if(0!==e.avail_out){if(r>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(0===e.avail_in)break}else this.onData(e.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===hn&&(this.result=Yt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}var af=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=Ln.GZIP,i.vm=hf(),i.dm=function(t,n,r){r(i.vm(t,n))},i.compress=ff(),"undefined"!=typeof CompressionStream&&rr||(i.compress=i.dm,i.getCompressorSourceCode=function(){return hf.toString()}),i}return J(n,t),n.prototype.compressSync=function(t,n){return this.vm(t,n)},n.prototype.getCompressorSourceCode=function(){return ff.toString()},n}(Hn);function ff(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),e=new Response(r).arrayBuffer();"base64"!==n?e.then((function(t){return i(t)})):e.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var lf=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=Ln.UNCOMPRESSED,n}return J(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(Hn),vf=function(){function t(){}return t.create=function(t,n){return void 0===n&&(n=!0),this.instance?this.instance:n&&!cf.isCompressionEnabled()?new lf(t):this.instance=new af(t)},t}(),df=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),wf=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),pf=["visit",2],yf=["page",3],mf=["nextPageOnly",4],gf=function(){function t(t,n){this.q=t,this.ip=n,this.wm={},this.pm={}}return t.prototype.set=function(t,n,i,r){var e,s;if(t>0&&Bt(n)&&Bt(i)&&!Vt(n)&&!Vt(i)){var u=this.q.anonymizePII(csString(n)),o=this.q.anonymizePII(csString(i));if(e=[csString.prototype.slice.call(u,0,512),csString.prototype.slice.call(o,0,255)],s=""!==i,!Ht(r)||csArray.prototype.indexOf.call(pf,r)>=0){var c=this.getCustomVariablesSession();s?c[t]=e:delete c[t],this.setCustomVariableSession(c)}(!Ht(r)||csArray.prototype.indexOf.call(yf,r)>=0)&&(s?this.wm[t]=e:delete this.wm[t]),Ht(r)&&csArray.prototype.indexOf.call(mf,r)>=0&&(s?this.pm[t]=e:delete this.pm[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.ip.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&qt(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.ip.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.ip.remove()},t.prototype.removeCustomVariablesPage=function(){this.wm={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this.pm)this.pm.hasOwnProperty(n)&&(this.wm[n]=this.pm[n]);for(var n in this.wm)this.wm.hasOwnProperty(n)&&(t[n]=this.wm[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.ym(t)};return this.wm&&window.csJSON.stringify(this.wm).length>2&&(i.cvarp=this.ym(this.wm)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this.pm).length>0)for(var t in this.pm)this.pm[t]===this.wm[t]&&(delete this.wm[t],delete this.pm[t])},t.prototype.gm=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],e=r[0],s=r[1];o=1,c=20,(!(Ut(u=i)&&u>=o&&u<=c)||e.length>512||s.length>255)&&delete t[n]}var u,o,c},t.prototype.ym=function(t){this.gm(t);var n=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(n)},t.prototype.getAllValidCustomVars=function(){var t=this.getCustomVariablesSession();for(var n in this.pm)this.pm.hasOwnProperty(n)&&(this.wm[n]=this.pm[n]);for(var n in this.wm)this.wm.hasOwnProperty(n)&&(t[n]=this.wm[n]);return this.gm(t),t},t}(),Sf=["setCustomVariable"],bf=function(){function t(t,n){this.nh=t,this.wn=n}return t.prototype.init=function(){var t=this;this.nh.register(Sf,(function(n,i,r,e){t.wn.set(n,i,r,e)}))},t.prototype.onAfterArtificialPageView=function(){this.wn.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.wn.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.wn.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.wn.removeCustomVariablesSession(),this.wn.removeCustomVariablesPage()},t}(),Af=function(){function t(t){this.q=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,e=csString.prototype.split.call(n,"/");r<e.length;r++){var s=e[r];nt(s,t.Sm)?csArray.prototype.push.call(i,{key:s,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(s,1)))}):csArray.prototype.push.call(i,{key:s,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.q.anonymizePII(t);return i=this.q.anonymizeJwt(i),n.length>0?this.bm(i,n):i},t.prototype.removeQueryString=function(t){var n=this.Am(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.Am=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.bm=function(t,n){for(var i=this.Am(t),r=i.path,e=i.queryString,s=csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var c=o[u],h=this.Em(s,c);if(null!==h)return"".concat(h).concat(e)}return t},t.prototype.Em=function(n,i){if(n.length<i.length)return null;for(var r="",e=0;e<n.length;e+=1)if(e>=i.length)r+="".concat(n[e],"/");else if(nt(i[e].key,t.Sm))r+="".concat(i[e].value,"/");else{if(n[e]!==i[e].key)return null;r+="".concat(n[e],"/")}return csString.prototype.slice.call(r,0,-1)},t.Sm=":",t}(),Ef=function(){function t(t,n){this.aa=t,this.j=n}return t.prototype.getEventTargetPath=function(t){var n=nr(t);return this.aa.getElementPath(n,$({dynamicIdRegex:this.j.dynamicIdRegex},this.j.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=nr(t),i=this.aa.getElementPathAndFirstAnchorParent(n,$({dynamicIdRegex:this.j.dynamicIdRegex},this.j.pathComputationRules)),r=i.path,e=i.firstAnchorParent;return{path:r,targetLink:this.Rm(e)?e.href:""}},t.prototype.hasValidEventTarget=function(t){var n=nr(t);return this.aa.isValidElement(n)},t.prototype.getElementPath=function(t){return this.aa.getElementPath(t,$({dynamicIdRegex:this.j.dynamicIdRegex},this.j.pathComputationRules))},t.prototype.Rm=function(t){var n;return null!==t&&t.hasAttribute("href")&&!nt(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),Rf=function(){function t(t){this.tf=t}return t.prototype.transformEvent=function(t,n){this.Tm(t,n.event);var i=this.tf.getElementPath(t);return this.Om(i,n.event),n},t.prototype.Tm=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+Pe.windowOffsetX()),n.y=Math.round(i.top+n.y+Pe.windowOffsetY())}},t.prototype.Om=function(t,n){ao(n)&&(n.tgt="".concat(t).concat(uf).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(uf).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(uf).concat(n.tgtLk))},t}(),Tf=function(){function t(t){this.tf=t}return t.prototype.transformEvent=function(t,n){var i=this.tf.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(uf).concat(n.iframePath):i,commands:n.commands}},t}(),Of=function(){function t(t){this.tf=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.tf.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return $($({},t),{targetPath:"".concat(i).concat(uf).concat(t.targetPath)})}));return $($({},n),{products:r})},t}(),Nf=function(){function t(){this.Nm={clientX:2,clientY:3},this.km={clientX:1,clientY:2},this.Cm=[Wi.POINTER_DOWN,Wi.POINTER_MOVE,Wi.POINTER_UP],this.Im=[Wi.TOUCH_START,Wi.TOUCH_MOVE,Wi.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!Me.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==Wi.VISIBILITY_CHANGE})),0===n.events.length||(wn.warn("IframeRecordingEventsTransformer received event ".concat(hn.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=ar(t),e=null;csArray.prototype.some.call(n.events,(function(t){return i._m(t)||i.Pm(t)}))&&(e=t.getBoundingClientRect());for(var s=0,u=n.events;s<u.length;s++){var o=u[s];this._m(o)?this.xm(e,o):this.Pm(o)&&this.Mm(e,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},t.prototype.Mm=function(t,n){this.Dm(this.km,t,n)},t.prototype.xm=function(t,n){this.Dm(this.Nm,t,n)},t.prototype.Dm=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype._m=function(t){return-1!==csArray.prototype.indexOf.call(this.Cm,t.type)},t.prototype.Pm=function(t){return-1!==csArray.prototype.indexOf.call(this.Im,t.type)},t}(),kf=function(){function t(t){this.Lm=t}return t.prototype.start=function(){var t=this;this.Lm.onEvent((function(n){return t.Je(n)})),this.Lm.start()},t.prototype.stop=function(){this.Lm.stop()},t.prototype.Je=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);wn.warn(n)},t}(),Cf=function(){function t(){var t=this;this.Ju={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){Gi(this.Ju)},t.prototype.stop=function(){zi(this.Ju)},t.prototype.onEvent=function(t){this.As=t},t.prototype.Um=function(n){if(!n)return!1;var i=n.disposition;return jt(n.sourceFile)&&csArray.prototype.some.call(t.jm,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.Um(t)&&this.As({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.jm=["contentsquare","cdnssl.clicktale.net"],X([yn("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),If=function(){function t(){}return t.prototype.init=function(){this.qm=new kf(new Cf),this.qm.start()},t.prototype.onOptout=function(){this.qm.stop()},t}(),_f=1/0,Pf=Object.prototype.toString;var xf=function(t){return"symbol"==typeof t||"object"==typeof t&&null!=t&&"[object Symbol]"===(null==(n=t)?void 0===n?"[object Undefined]":"[object Null]":Pf.call(n));var n};function Mf(t){if("string"==typeof t||xf(t))return t;var n="".concat(t);return"number"==typeof t?"0"===n&&1/t==-_f?"-0":n:t instanceof Number&&"0"===n&&1/t.valueOf()==-_f?"-0":n}var Df=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lf=/^\w*$/;function Uf(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError("Expected a function");var i=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var s=n?n.apply(this,r):r[0],u=i.cache;if(u.has(s))return u.get(s);var o=t.apply(this,r);return i.cache=u.set(s,o)||u,o};return i.cache=new(Uf.Cache||Map),i}Uf.Cache=Map;var jf,qf,Hf=".".charCodeAt(0),Bf=/\\(\\)?/g,Vf=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),Ff=(jf=function(t){var n=[];return csString.prototype.charCodeAt.call(t,0)===Hf&&csArray.prototype.push.call(n,""),csString.prototype.replace.call(t,Vf,(function(t,i,r,e){var s=t;return r?s=csString.prototype.replace.call(e,Bf,"$1"):i&&(s=csString.prototype.trim.call(i)),csArray.prototype.push.call(n,s),t})),n},qf=Uf(jf,(function(t){var n=qf.cache;return 500===n.size&&n.clear(),t})));function Gf(t,n){return csArray.isArray(t)?t:function(t,n){return!csArray.isArray(t)&&(!("number"!=typeof t&&"boolean"!=typeof t&&null!=t&&!xf(t))||Lf.test(t)||!Df.test(t)||null!=n&&t in Object(n))}(t,n)?[t]:Ff(t)}function zf(t,n,i){var r=null==t?void 0:function(t,n){for(var i=Gf(n,t),r=t,e=0,s=i.length;null!=r&&e<s;)r=r[Mf(i[e])],e+=1;return e&&e===s?r:void 0}(t,n);return void 0===r?i:r}var Jf=/\b__p \+= '';/g,$f=/\b(__p \+=) '' \+/g,Wf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xf=/['\n\r\u2028\u2029\\]/g,Yf=/[&<>"']/g,Kf=RegExp(Yf.source),Zf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qf=/($^)/,tl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nl=/[()=,{}[\]/\s]/,il=/<%=([\s\S]+?)%>/g,rl=Object.prototype.hasOwnProperty;function el(t){return"\\".concat(tl[t])}var sl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ul={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:il,variable:"",imports:{_:{template:ol,escape:function(t){return t&&Kf.test(t)?csString.prototype.replace.call(t,Yf,(function(t){return sl[t]})):null!=t?t:""}}}};function ol(t,n){var i,r,e=$($({},ul),n),s=Object.keys(e.imports||{}),u=csArray.prototype.map.call(s,(function(t){return null==e?void 0:e.imports[t]})),o=0,c=e.interpolate||Qf,h="__p += '",a=RegExp("".concat((e.escape||Qf).source,"|").concat(c.source,"|").concat((c===il?Zf:Qf).source,"|").concat((e.evaluate||Qf).source,"|$"),"g"),f="//# sourceURL=".concat(rl.call(e,"sourceURL")?csString.prototype.replace.call("".concat(e.sourceURL),/\s/g," "):void 0,"\n");null==t||csString.prototype.replace.call(t,a,(function(n,e,s,u,c,a){var f=s||u;return h+=csString.prototype.replace.call(csString.prototype.slice.call(t,o,a),Xf,el),e&&(i=!0,h+="' +\n__e(".concat(e,") +\n'")),c&&(r=!0,h+="';\n".concat(c,";\n__p += '")),f&&(h+="' +\n((__t = (".concat(f,")) == null ? '' : __t) +\n'")),o=a+n.length,n})),h+="';\n";var l,v=rl.call(e,"variable")&&e.variable;if(v){if(nl.test(v))throw new Error("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n".concat(h,"\n}\n");h=csString.prototype.replace.call(csString.prototype.replace.call(r?csString.prototype.replace.call(h,Jf,""):h,$f,"$1"),Wf,"$1;"),h="function(".concat(v||"obj",") {\n").concat(v?"":"obj || (obj = {});\n","var __t, __p = ''").concat(i?", __e = _.escape":"").concat(r?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n").concat(h,"return __p\n}");try{l=Function.apply(void 0,Z(Z([],s,!1),["".concat(f,"return ").concat(h)],!1)).apply(void 0,u)}catch(t){l=t}if(l.source=h,l instanceof Error)throw l;return l}var cl=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,hl=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.textContent$/;function al(t){if(!cl.test(t))throw new Error("whitelisted function is wrongly used")}var fl={"window.location.hash.replace(":function(t,n){return al(csString.prototype.substring.call(t,29,t.length-1)),ol("${".concat(t,"}"))(n)},"window.sessionStorage.getItem(":function(t,n){return al(csString.prototype.substring.call(t,30,t.length-1)),ol("${".concat(t,"}"))(n)},"document.querySelector(":function(t,n){if(hl.test(t))return ol("${".concat(t,"}"))(n)},"new Date().getTime()":function(t,n){return(new csDate).getTime().toString()}};var ll,vl,dl=/\$\{(.+?)\}/g,wl=function(t){return function(n,i,r){var e="";return csArray.prototype.forEach.call(csString.prototype.split.call(i,"+"),(function(n){var i,r=csString.prototype.trim.call(n),s=zf(t,r);if(void 0===s)if(xt(i=r,"'")&&Mt(i,"'"))s=csString.prototype.substring.call(r,1,r.length-1);else{var u=function(t){var n=zn(Object.keys(fl),(function(n){return xt(t,n)}));if(n)return fl[n]}(r);if(u&&(s=u(r,t)),void 0===s)throw new Error("undefined not allowed")}e+=s})),e}};function pl(t,n){try{return csString.prototype.replace.call(t,dl,wl(n))}catch(t){return null}}function yl(t,n){for(var i={},r=0,e=Object.keys(t);r<e.length;r++){var s=e[r],u=t[s];if(jt(u)){var o=pl(u,n);if(null===o)return null;i[s]=o}else i[s]=u}return i}function ml(t,n){var i=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),(function(t){return pl(t,n)})),(function(t){return null!==t&&Rr(t)})),",");return Rr(i)?i:null}function gl(t,n){try{var i=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(t);if(!i)return null;var r=i[1],e=i[2],s=zf(n,(o=r,csArray.isArray(o)?csArray.prototype.map.call(o,Mf):xf(o)?[o]:csArray.from(Ff(o))));if("object"!=typeof s||null===s)return null;var u=[];return csArray.prototype.forEach.call(Object.keys(s),(function(t){var n=s[t];"object"==typeof n&&null!==n&&!csArray.isArray(n)&&e in n&&csArray.prototype.push.call(u,n)})),u}catch(t){return null}var o}function Sl(t,n){var i=csString.prototype.split.call(t,"|");if(i.length>2)return null;var r=gl(csString.prototype.trim.call(i[0]),n);return 2===i.length?null===r?null:function(t,n){var i=/^\[([0-9]+):([0-9+])\]$/.exec(t);if(!i)return null;var r=parseInt(i[1],10),e=parseInt(i[2],10);return e<=r||e>n.length?null:csArray.prototype.slice.call(n,r,e)}(csString.prototype.trim.call(i[1]),r):r}function bl(t,n){return function(t,n){switch(t){case vl.EXIST:case vl.NOT_EXIST:return function(t,n){var i=n[0];if(!Rr(i))return!1;switch(t){case vl.EXIST:return null!==window.csquerySelector[document.nodeType].call(document,i);case vl.NOT_EXIST:return null===window.csquerySelector[document.nodeType].call(document,i);default:return!1}}(t,n);default:return function(t,n){var i=n,r=i[0],e=i[1],s=t in ll;if(!(s||jt(r)&&jt(e)))return!1;switch(t){case ll.AND:return!!csArray.prototype.reduce.call(n,(function(t,n){return t&&n}));case ll.OR:return!!csArray.prototype.reduce.call(n,(function(t,n){return t||n}));case vl.STARTS_WITH:return xt(r,e);case vl.EQUALS:return r===e;case vl.NOT_EQUALS:return r!==e;case vl.CONTAINS:return csString.prototype.indexOf.call(r,e)>-1;case vl.MATCHES:var u=function(t){var n=/^\/(.*)\/([gimy]*)$/.exec(t),i=null;if(n){var r=n[1],e=n[2];try{i=new RegExp(r,e)}catch(t){i=null}}return i}(e);return null!==u&&u.test(r);default:return!1}}(t,n)}}(t.operator,function(t,n){return csArray.prototype.map.call(t,(function(t){return function(t){return!!(t&&t.operator&&t.args)}(t)?bl(t,n):jt(t)?pl(t,n):t}))}(t.args,n))}function Al(t){switch(t){case"no decoding":default:return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0}}}function El(t){return"on next pageview only"===(null==t?void 0:t[0])?{lifespan:"onNextPageviewOnly"}:null}!function(t){t.AND="AND",t.OR="OR"}(ll||(ll={})),function(t){t.STARTS_WITH="startsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.CONTAINS="contains",t.MATCHES="matches",t.EXIST="exist",t.NOT_EXIST="notExist"}(vl||(vl={}));var Rl,Tl=function(t,n){this.commandsService=t,this.args=n},Ol=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n}(Tl),Nl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){if(t.path){var n=[t.path],i=Al(t.decodeURI),r=El(t.lifespan),e=$($({},i),r);Object.keys(e).length&&n.push(e),this.Hm(n)}else this.Hm([])},n.prototype.Hm=function(t){this.commandsService.applyFromImplementation(Pc[0],t,"ArtificialPageviewTemplate")},n}(Tl),kl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t,n){var i=pl(t.message,n);if(null!==i){for(var r={},e=0,s=t.attributes;e<s.length;e++){var u=s[e],o=pl(u.value,n);null!==o&&(r[u.key]=o)}this.commandsService.applyFromImplementation(Ch[0],[i,r],"CustomErrorTemplate")}},n}(Ol),Cl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(Sf[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")},n}(Tl),Il=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(Iu[0],[t.selector],"DataCsEncryptTemplate")},n}(Tl),_l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){if(Rr(t.selector)){var n=window.csquerySelector[document.nodeType].call(document,t.selector);n&&n.setAttribute("data-cs-override-id",t.value)}},n}(Tl),Pl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t,n){var i=yl(t,n);null!==i?this.Hm(i):this.Bm(t,n)()},n.prototype.Bm=function(t,n){var i=this;return function(){var r=0,e=window.setInterval((function(){r+=1;var s=yl(t,n);if(null!==s)return window.clearInterval(e),e=void 0,r=0,void i.Hm(s);r>=20&&(window.clearInterval(e),e=void 0,r=0)}),100)}},n.prototype.Hm=function(t){var n=t.value;if("Integer"===t.type){var i=Number.parseInt(t.value,10);Number.isNaN(i)||(n=i)}this.commandsService.applyFromImplementation(Zu[0],[{key:t.key,value:n}],"DynamicVariableTemplate")},n}(Ol),xl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.Vm({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.Fm({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Gm()},n.prototype.Vm=function(t){this.commandsService.applyFromImplementation(so[0],[t],"EcTransactionAllTemplate")},n.prototype.Fm=function(t){this.commandsService.applyFromImplementation(uo[0],[t],"EcTransactionAllTemplate")},n.prototype.Gm=function(){this.commandsService.applyFromImplementation(oo[0],[],"EcTransactionAllTemplate")},n}(Tl),Ml=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(so[0],[t],"EcTransactionCreateTemplate")},n}(Tl),Dl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(uo[0],[t],"EcTransactionItemsAddTemplate")},n}(Tl),Ll=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(){this.commandsService.applyFromImplementation(oo[0],[],"EcTransactionSendTemplate")},n}(Tl),Ul=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(Cu[0],[t.selector],"ElementUnmaskingTemplate")},n}(Tl),jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(oh[0],["@ETP@".concat(t.eventName)],"EventTriggerRecordingPageTemplate")},n}(Tl),ql=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(oh[0],["@ETS@".concat(t.eventName)],"EventTriggerRecordingSessionTemplate")},n}(Tl),Hl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(uh[0],[t.eventName],"PageEventTemplate")},n}(Tl),Bl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t,n){var i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,(function(t){return ml(t,n)})),(function(t){return!!t})),r=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,(function(t){return{attrName:pl(t.attrName,n),selector:ml(t.selector,n)}})),(function(t){return!!t.attrName&&!!t.selector})),e={PIISelectors:Z([],i,!0),Attributes:Z([],r,!0)};this.commandsService.applyFromImplementation(Yh[0],[e],"PIIMaskingTemplate")},n}(Ol),Vl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){this.commandsService.applyFromImplementation(oh[0],["".concat(t.eventName)],"RecordingEventTriggerTemplate")},n}(Tl),Fl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){var n=[t.path],i=Al(t.decodeURI),r=El(t.lifespan),e=$($({},i),r);Object.keys(e).length&&n.push(e),this.commandsService.applyFromImplementation(xc[0],n,"SetPathTemplate")},n}(Tl),Gl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){var n=[t.query],i=Al(t.decodeURI),r=El(t.lifespan),e=$($({},i),r);Object.keys(e).length&&n.push(e),this.commandsService.applyFromImplementation(Mc[0],n,"SetQueryTemplate")},n}(Tl),zl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(){this.commandsService.applyFromImplementation(Pu[0],[],"SrmOnlineAssetsTemplate")},n}(Tl),Jl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.execute=function(t){if(Rr(t.selector)){var n=window.csquerySelector[document.nodeType].call(document,t.selector);n&&this.commandsService.applyFromImplementation(Rc[0],[t.status,n],"SubmitTemplate")}},n}(Tl),$l=function(){function t(t,n,i){this.commandsService=t,this.args=n,this.condition=i,this.isStarted=!1,this.zm=!1}return t.prototype.onEvent=function(t){this.onEventCallback=t},t.prototype.start=function(){this.zm||(this.onInit(),this.zm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)},t.prototype.stop=function(){this.isStarted&&(this.onStop(),this.isStarted=!1)},X([yn()],t.prototype,"start",null),X([yn()],t.prototype,"stop",null),t}(),Wl=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Jm=!0,n}return J(n,t),n.prototype.onInit=function(){var t=this;Rr(this.args.selector)?(this.$m=!this.args.frequency||"once per pageview"===this.args.frequency,this.hr=new Zr((function(n,i){return t.xn(n,i)}))):this.Jm=!1},n.prototype.onStart=function(){this.Jm&&this.hr.observe(this.args.selector)},n.prototype.onStop=function(){this.Jm&&(this.hr.processPendingMutations(),this.hr.disconnect())},n.prototype.xn=function(t,n){var i=this;"added"===n&&(this.$m?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach((function(t){return i.onEventCallback({element:t})})))},n}($l),Xl=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Jm=!0,n.Wm=!1,n}return J(n,t),n.prototype.onInit=function(){var t=this;Rr(this.args.selector)?this.hr=new Zr((function(n,i){t.xn(n,i)})):this.Jm=!1},n.prototype.onStart=function(){this.Jm&&(this.hr.observe(this.args.selector),this.Wm=!0)},n.prototype.onStop=function(){this.Jm&&(this.hr.processPendingMutations(),this.hr.disconnect())},n.prototype.xn=function(t,n){var i=this;this.Wm?"added"===n&&new Set(t).forEach((function(t){return i.onEventCallback({element:t})})):this.onEventCallback({element:t[0]})},n}($l),Yl=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Jm=!0,n}return J(n,t),n.prototype.onInit=function(){var t=this;Rr(this.args.selector)?(this.rc=new Zr((function(n){return t.Xm(n)})),this.Xn=new Kr((function(n){return t.Ym(n)}))):this.Jm=!1},n.prototype.onStart=function(){this.Jm&&(this.Km=csSymbol("MatchingElement"),this.rc.observe(this.args.selector),this.Xn.observe())},n.prototype.onStop=function(){this.Jm&&(this.rc.disconnect(),this.Xn.processPendingMutations(),this.Xn.disconnect())},n.prototype.Xm=function(t){var n=this;new Set(t).forEach((function(t){return n.Zm(t)}))},n.prototype.Ym=function(t){for(var n,i=this,r=[],e=0,s=Fn(t,(function(t){return t.removedNodes}));e<s.length;e++){var u=s[e];(n=csArray.prototype.push).call.apply(n,Z([r],this.Qm(u),!1))}new Set(r).forEach((function(t){return i.onEventCallback({element:t})}))},n.prototype.Zm=function(t){t[this.Km]=!0},n.prototype.Qm=function(t){var n=this,i=[];return _i(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){t[n.Km]&&(Me.isConnected(t)&&br.call(t,n.args.selector)||delete t[n.Km],csArray.prototype.push.call(i,t))})),i},n}($l),Kl=function(){function t(t){this.xn=t}var n;return t.Vo=function(t){this.callbacks.has(t)||(this.callbacks.add(t),1===this.callbacks.size&&Gi(this.eventHandler,!1))},t.Fo=function(t){this.callbacks.delete(t),0===this.callbacks.size&&zi(this.eventHandler,!1)},t.prototype.observe=function(){n.Vo(this.xn)},t.prototype.disconnect=function(){n.Fo(this.xn)},n=t,t.callbacks=new Set,t.readyStateChangeListener=function(t){return n.callbacks.forEach((function(n){return n(t)}))},t.eventHandler={boundElement:document,type:"readystatechange",listener:n.readyStateChangeListener},t}(),Zl=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.onInit=function(){var t=this;try{this.$i=this.args.state.toLowerCase()}catch(t){this.$i="any",wn.error("Implementations: PageStateTrigger has wrong argument.")}this.hr=new Kl((function(){t.tg(t.$i,document.readyState)&&(t.onEventCallback(),t.hr.disconnect())}))},n.prototype.onStart=function(){this.tg(this.$i,document.readyState)?this.onEventCallback():this.hr.observe()},n.prototype.onStop=function(){this.hr.disconnect()},n.prototype.tg=function(t,i){var r=n.ng[i];return n.ng[t]<=r},n.ng={complete:3,interactive:2,loading:1,any:0},n}($l),Ql=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.ig=function(){this.isStarted&&this.onEventCallback()},n.prototype.onInit=function(){var t=this;this.commandsService.applyFromImplementation(Gu[0],[function(){return t.ig()}],"AfterPageViewTrigger")},n.prototype.onStart=function(){},n.prototype.onStop=function(){},n}($l),tv=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Jm=!0,n.hc=!0,n.rg={boundElement:document,type:"click",listener:function(t){return n.clickListener(t)}},n}return J(n,t),n.prototype.clickListener=function(t){var n=t.target;Bt(n)&&Ft(n)&&br.call(n,this.args.selector)&&this.onEventCallback({element:n})},n.prototype.onInit=function(){Rr(this.args.selector)||(this.Jm=!1)},n.prototype.onStart=function(){this.Jm&&Gi(this.rg,this.hc)},n.prototype.onStop=function(){this.Jm&&zi(this.rg,this.hc)},X([yn("clickListener")],n.prototype,"clickListener",null),n}($l),nv=function(){function t(t){this.xn=t}return t.eg=function(){var t,n,i,r;if("history"in window){var e=Object.getOwnPropertyDescriptors(history);if((null===(t=e.pushState)||void 0===t?void 0:t.writable)&&(null===(n=e.replaceState)||void 0===n?void 0:n.writable))return history}if(History.prototype){var s=Object.getOwnPropertyDescriptors(History.prototype);if((null===(i=s.pushState)||void 0===i?void 0:i.writable)&&(null===(r=s.replaceState)||void 0===r?void 0:r.writable))return History.prototype}pn.warn("Unable to override pushState, replaceState","HistoryChangeObserver")},t.ad=function(){var n=t.eg();null===t.sg&&Vt(null==n?void 0:n.pushState)&&(t.sg=Hi({target:n,methodName:"pushState",hook:function(n){var i=n.args;t.ug("pushstate",i)}})),null===t.og&&Vt(null==n?void 0:n.replaceState)&&(t.og=Hi({target:n,methodName:"replaceState",hook:function(n){var i=n.args;t.ug("replacestate",i)}}))},t.Jn=function(n){var i,r;t.$n.add(n),1===t.$n.size&&(null!==t.sg&&null!==t.og||t.ad(),null===(i=t.sg)||void 0===i||i.activate(),null===(r=t.og)||void 0===r||r.activate(),Gi(t.Ju))},t.Qn=function(n){var i,r;t.$n.delete(n),0===t.$n.size&&(null===(i=t.sg)||void 0===i||i.deactivate(),null===(r=t.og)||void 0===r||r.deactivate(),zi(t.Ju))},t.ug=function(n,i){var r={type:n,state:i[0]};jt(i[2])&&(r.url=i[2]),t.eo(r)},t.popstateListener=function(n){t.eo({type:"popstate",state:n.state})},t.eo=function(n){t.$n.forEach((function(t){t(n)}))},t.prototype.observe=function(){t.Jn(this.xn)},t.prototype.disconnect=function(){t.Qn(this.xn)},t.sg=null,t.og=null,t.Ju={boundElement:window,type:"popstate",listener:function(n){return t.popstateListener(n)}},t.$n=new Set,Ri([yn("popstateListener")],t,"popstateListener",null),t}(),iv=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.onInit=function(){var t=this;"yes"===this.args.useDebounce?this.xi=Au((function(){t.onEventCallback()}),this.args.window):this.xi=this.onEventCallback,this.hr=new nv((function(n){return t.cg(n)}))},n.prototype.hg=function(){return window.location.href},n.prototype.cg=function(t){if("replacestate"!==t.type||"popstate, pushState"!==this.args.listeners){var n=this.hg();this.ag!==n&&(this.ag=n,this.xi())}},n.prototype.onStart=function(){this.ag=this.hg(),this.hr.observe()},n.prototype.onStop=function(){this.hr.disconnect()},n}($l),rv=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Jm=!0,n.hc=!0,n.rg={boundElement:document,type:"submit",listener:function(t){return n.submitListener(t)}},n}return J(n,t),n.prototype.submitListener=function(t){var n=t.target;Bt(n)&&Ft(n)&&br.call(n,this.args.selector)&&this.onEventCallback({element:n})},n.prototype.onInit=function(){Rr(this.args.selector)||(this.Jm=!1)},n.prototype.onStart=function(){this.Jm&&Gi(this.rg,this.hc)},n.prototype.onStop=function(){this.Jm&&zi(this.rg,this.hc)},X([yn("submitListener")],n.prototype,"submitListener",null),n}($l),ev=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Jm=!0,n.fg={boundElement:document,type:"mouseover",listener:function(t){return n.mouseoverListener(t)}},n.lg={boundElement:document,type:"mouseleave",listener:function(t){return n.mouseleaveListener(t)}},n}return J(n,t),n.prototype.onInit=function(){Rr(this.args.selector)||(this.Jm=!1)},n.prototype.mouseleaveListener=function(t){var n=t.target;Bt(n)&&Ft(n)&&n[this.vg]&&delete n[this.vg]},n.prototype.mouseoverListener=function(t){var n=t.target;if(Bt(n)&&Ft(n)){var i=Tr(n,this.args.selector);null===i||i[this.vg]||(i[this.vg]=!0,this.onEventCallback({element:i}))}},n.prototype.onStart=function(){this.Jm&&(this.vg=csSymbol("Hovered"),Gi(this.lg,!0),Gi(this.fg,!0))},n.prototype.onStop=function(){this.Jm&&(zi(this.fg),zi(this.lg))},X([yn("mouseleaveListener")],n.prototype,"mouseleaveListener",null),X([yn("mouseoverListener")],n.prototype,"mouseoverListener",null),n}($l),sv=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.rg={boundElement:window,type:"hashchange",listener:function(t){return n.hashChangedListener(t)}},n}return J(n,t),n.prototype.hashChangedListener=function(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()},n.prototype.onInit=function(){},n.prototype.onStart=function(){Gi(this.rg)},n.prototype.onStop=function(){zi(this.rg)},X([yn("hashChangedListener")],n.prototype,"hashChangedListener",null),n}($l),uv=function(){function t(){}return t.create=function(n,i){if(!t.isSupported())throw new Error("IntersectionObserver is not supported");if(i&&i.delay&&i.delay<100)throw new Error("Visibility delay should be > 100ms");return(null==i?void 0:i.trackVisibility)&&(n=t.dg(n)),new IntersectionObserver(n,i)},t.isSupported=function(){return!!window.IntersectionObserver&&!!window.IntersectionObserverEntry},t.dg=function(t){return function(n,i){return t(Vn(n,ov),i)}},t}();function ov(t){return t.isVisible||!Me.isVisibleInViewportInForeground(t.target)?t:{boundingClientRect:t.boundingClientRect,intersectionRatio:t.intersectionRatio,intersectionRect:t.intersectionRect,isIntersecting:t.isIntersecting,rootBounds:t.rootBounds,target:t.target,time:t.time,isVisible:!0}}var cv=function(){return function(t,n,i){var r,e,s,u,o;i.value=(r=i.value,e=csSymbol("oncePerTickSymbol"),s=null,u={},o=function(){var t,n=null!==(t=this)&&void 0!==t?t:u;s=arguments,n[e]||(n[e]=!0,hv((function(){n[e]=!1,r.apply(n,s)})))},o.oncePerTickSymbol=e,o)}},hv=null!==(Rl=window.csQueueMicrotask)&&void 0!==Rl?Rl:csSetTimeout;cv.isScheduled=function(t,n){return t[n.oncePerTickSymbol]};var av,fv=function(){function t(t){var n=this;this.xn=t,this.wg=new Map,this.pg=function(t){var i=t.target;if(n.wg.has(i))return!0;var r=!1;return n.wg.forEach((function(t,e){!r&&n.wg.get(e).subtree&&(r=e.contains(i))})),r},zr.general.nbOfMutationObservers.increase(),this.Xn=new csMutationObserver((function(i){cv.isScheduled(n,n.garbageCollect)&&(i=$n(i,n.pg)),i.length&&Ce((function(){return t(i,n)}))}))}return t.prototype.disconnect=function(){zr.general.nbOfMutationObservers.decrease(),this.Xn.disconnect(),this.wg=new Map},t.prototype.takeRecords=function(){return this.Xn.takeRecords()},t.prototype.observe=function(t,n){return zr.mutations.elementMutationObserved.increase(),this.wg.set(t,n),this.Xn.observe(t,n)},t.prototype.unobserve=function(t){this.wg.has(t)&&(zr.mutations.elementMutationObserved.decrease(),this.wg.delete(t),this.garbageCollect())},t.prototype.garbageCollect=function(){var t=this;zr.mutations.unobserveGarbageCollection.measure((function(){var n=$n(t.takeRecords(),t.pg);n.length&&t.xn(n,t),t.Xn.disconnect(),t.wg.forEach((function(n,i){return t.Xn.observe(i,n)}))}))},Ri([cv()],t.prototype,"garbageCollect",null),t}(),lv=function(){function t(t){this.xn=t,this.yg=[],this.mg=new Set}return t.prototype.observe=function(t,n){var i=this;if(!Me.getRootNode(t))throw new Error("Node has no root node");if(!this.mg.has(t)){this.mg.add(t);var r=!!(null==n?void 0:n.subtree),e=t.parentElement||Me.getRootNode(t),s=Me.getAncestors(t,r),u=new Set(s);zr.general.nbOfMutationObservers.increase();var o=mn("NodeDisconnectedObserver:MutationCallback",(function(n){for(var r=0,e=n;r<e.length;r++){var s=e[r];if(u.has(s.target)&&Jn(s.removedNodes,(function(t){return u.has(t)})))return i.xn(t),c.disconnect(),i.mg.delete(t),void zr.general.nbOfMutationObservers.decrease()}})),c=new csMutationObserver((function(t){csSetTimeout((function(){return o(t)}))}));if(r)for(var h=0,a=s;h<a.length;h++){var f=a[h];csArray.prototype.includes.call([11,9],f.nodeType)&&c.observe(f,{childList:!0,subtree:!0})}else c.observe(e,{childList:!0});csArray.prototype.push.call(this.yg,(function(){c.disconnect()}))}},t.prototype.disconnect=function(){Gn(this.yg,(function(t){return t()})),this.yg=[],this.mg.clear()},Ri([yn()],t.prototype,"observe",null),Ri([yn()],t.prototype,"disconnect",null),t}(),vv=function(){function t(t){var n=this;this.gg=new Set,this.Sg=new lv((function(t){return n.bg(t)})),this.Wn=!1,this.nr=t?Ei(Ei({},pv),t):pv}return t.prototype.stop=function(){var t,n;this.Wn=!1,null===(t=this.Ag)||void 0===t||t.disconnect(),null===(n=this.Xn)||void 0===n||n.disconnect()},t.prototype.start=function(t){var n=this;if(this.Wn)throw new Error("VisibilityObserver is already started");this.xn=mn("VisibilityObserver:callback",(function(n,i){return t(n,i)}));var i={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:300};this.Ag=uv.create((function(t){return n.handleIntersection(t)}),i),this.Xn=new fv((function(t){return csSetTimeout((function(){Gn(t,(function(t){return n.bg(t.target)}))}))})),this.mu(),this.Wn=!0},t.prototype.observe=function(t){if(!this.Wn)throw new Error("Observer is stopped.");!1===this.nr.reobserve&&t[this.Eg]||(zr.visibilityObserver.nbElements.increase(),t[this.Eg]=!0,this.watchIntersection(t))},t.prototype.mu=function(){this.Rg=csSymbol("isVisible"),this.Eg=csSymbol("ObservedElement"),this.Tg=csSymbol("LinkedElement"),this.Og=csSymbol("Tracked")},t.prototype.bg=function(t){this.gg.add(t);for(var n=0,i=this.Ng(t);n<i.length;n++){var r=i[n];this.gg.add(r)}this.recheckCssVisibilityAll()},t.prototype.recheckCssVisibilityAll=function(){var t=this;Gn(this.gg.keys(),(function(n){n.isConnected&&!Me.areAncestorsHiddenByCSS(n)&&n[t.Eg]&&t.watchIntersection(n)})),this.gg.clear()},t.prototype.watchIntersection=function(t){this.Xn.unobserve(t),this.Ag.unobserve(t);var n=Me.getTopAncestorHiddenByCSS(t);n?(n!==t&&(this.kg(n,t),this.watchMutation(n)),this.watchMutation(t)):this.Ag.observe(t)},t.prototype.watchMutation=function(t,n){void 0===n&&(n=!0),n&&delete t[this.Rg],this.Ag.unobserve(t);this.Xn.observe(t,{attributeFilter:["style","class","hidden"]})},t.prototype.handleIntersection=function(t){for(var n=this,i=0,r=t;i<r.length;i++){var e=r[i],s=e.target;if(e.isVisible){var u=!e.target[this.Rg];e.target[this.Rg]=!0,u&&!this.nr.delay&&this.onVisibilityChanged(e.target,av.VisibleInViewPort)}else{Me.isVisibleInDocument(s)||this.Cg(s)}}this.nr.delay&&csSetTimeout((function(){for(var i=0,r=t;i<r.length;i++){var e=r[i],s=e.isIntersecting&&e.isVisible;e.target[n.Rg]&&s&&n.onVisibilityChanged(e.target,av.VisibleInViewPort)}}),this.nr.delay)},t.prototype.Cg=function(t){zr.visibilityObserver.hiddenElements.increase();var n=Me.getTopElement(t);this.watchMutation(t),n&&(this.Sg.observe(n),this.kg(n,t),this.watchMutation(n,!1))},t.prototype.kg=function(t,n){var i;(t[this.Tg]=null!==(i=t[this.Tg])&&void 0!==i?i:new Set).add(n)},t.prototype.Ng=function(t){var n,i,r=[];return Gn(null!==(i=null===(n=t[this.Tg])||void 0===n?void 0:n.values())&&void 0!==i?i:[],(function(t){return csArray.prototype.push.call(r,t)})),r},t.prototype.onVisibilityChanged=function(t,n){if(n===av.VisibleInViewPort&&this.nr.trackOnce){if(this.Ag.unobserve(t),this.Xn.unobserve(t),t[this.Og])return;t[this.Og]=!0}this.xn(t,n)},t.isSupported=function(){return uv.isSupported()},Ri([yn()],t.prototype,"observe",null),Ri([tr({wait:50}),yn()],t.prototype,"recheckCssVisibilityAll",null),Ri([yn()],t.prototype,"watchIntersection",null),Ri([yn()],t.prototype,"watchMutation",null),Ri([yn()],t.prototype,"handleIntersection",null),Ri([yn()],t.prototype,"onVisibilityChanged",null),t}();!function(t){t.VisibleInViewPort="VisibleInViewPort",t.HiddenByAnother="HiddenByAnother",t.Hidden="Hidden"}(av||(av={}));var dv,wv,pv={delay:1e3,trackOnce:!0,reobserve:!1},yv=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.Ig=!0,n}return J(n,t),n.prototype.onInit=function(){var t=this;Rr(this.args.selector)&&vv.isSupported()?(this._g=new vv({delay:0,trackOnce:!0,reobserve:!0}),this.rc=new Zr((function(n){return t.Pg(n)}),{closest:!0})):this.Ig=!1},n.prototype.Pg=function(t){for(var n=this,i=0,r=t;i<r.length;i++){_i(r[i],NodeFilter.SHOW_ELEMENT).visitAll((function(t){n._g.observe(t)}))}},n.prototype.xg=function(t,n){if(this.isStarted&&n===av.VisibleInViewPort){var i=Tr(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.Ig=!1)}},n.prototype.onStart=function(){var t=this;this.Ig&&(this._g.start((function(n,i){return t.xg(n,i)})),this.rc.observe(this.args.selector))},n.prototype.onStop=function(){this.Ig&&(this._g.stop(),this.rc.disconnect())},n}($l),mv=function(){function t(t){this.nh=t,this.Mg={ArtificialPageview:Nl,CustomError:kl,CustomVariable:Cl,DataCsEncrypt:Il,DataCsOverride:_l,DynamicVariable:Pl,EcTransactionAll:xl,EcTransactionCreate:Ml,EcTransactionItemsAdd:Dl,EcTransactionSend:Ll,ElementUnmasking:Ul,EventTriggerRecordingPage:jl,EventTriggerRecordingSession:ql,PageEvent:Hl,PiiMasking:Bl,RecordingEventTrigger:Vl,SetPath:Fl,SetQuery:Gl,SrmOnlineAssets:zl,Submit:Jl},this.Dg={AfterPageView:Ql,ElementAdded:Wl,ElementExist:Xl,ElementRemoved:Yl,ElementVisibility:yv,ElementClick:tv,FormSubmit:rv,HashChange:sv,HistoryChange:iv,Mouseover:ev,PageState:Zl}}return t.prototype.Lg=function(t){var n=this.Mg[t.name];return n?new n(this.nh,t.args):(wn.error("Implementations: template ".concat(t.name," does not exist")),null)},t.prototype.Ug=function(t){var n=this.Dg[t.name];return n?new n(this.nh,t.args,t.condition):(wn.error("Implementations: trigger ".concat(t.name," does not exist")),null)},t.prototype.parse=function(t){for(var n=[],i=0,r=t;i<r.length;i++){var e=r[i],s=e.triggers,u=e.template,o=this.Lg(u);if(o)for(var c=0,h=s;c<h.length;c++){var a=h[c],f=this.Ug(a);f&&csArray.prototype.push.call(n,{trigger:f,template:o})}}return n},t}(),gv=function(){function t(t,n,i){this.jg=t,this.Lw=i,this.yu={window:window,document:document,location:location,cookies:{}},this.Dg=new Set,this.qg=new mv(n)}return t.prototype.init=function(){var t=this;Object.defineProperty(this.yu,"cookies",{get:function(){return t.Hg()}});for(var n=this.qg.parse(this.jg),i=function(n,i){r.Dg.add(n),n.onEvent((function(n){t.onTriggerEvent(n,i)}))},r=this,e=0,s=n;e<s.length;e++){var u=s[e];i(u.trigger,u.template)}},t.prototype.start=function(t){var n=this;void 0===t&&(t=!1),this.Dg.forEach((function(i){if(i.condition&&!bl(i.condition,n.yu))return;t?n.Lw.schedule((function(){i.start()})):i.start()}))},t.prototype.stop=function(){this.Dg.forEach((function(t){t.stop()}))},t.prototype.Bg=function(){this.stop(),this.start()},t.prototype.onTriggerEvent=function(t,n){var i,r=$($({},this.yu),t),e=[];if("iterable"in n.args&&jt(n.args.iterable)&&n.args.iterable.length>0){var s=Sl(n.args.iterable,r);if(Bt(s)){var u=csArray.prototype.map.call(s,(function(t){return $($({},r),{$:t})}));(i=csArray.prototype.push).call.apply(i,Z([e],u,!1))}}else csArray.prototype.push.call(e,r);if(n instanceof Ol)for(var o=0,c=e;o<c.length;o++){var h=c[o];n.execute(n.args,h)}else for(var a=0,f=e;a<f.length;a++){h=f[a];var l=yl(n.args,h);l&&(n.execute(l),n instanceof Nl&&this.Bg())}},t.prototype.Hg=function(){var t;try{t=document.cookie}catch(n){t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(function(t,n){var i=csString.prototype.split.call(n,"="),r=i[0],e=i[1];return void 0!==e&&(t[r]=e),t}),{})},X([Pn("implementationsService.start")],t.prototype,"start",null),X([yn()],t.prototype,"onTriggerEvent",null),t}(),Sv=function(){function t(t,n,i){this.Vg=new gv(t,n,i)}return t.prototype.init=function(){this.Vg.init()},t.prototype.onInitTracking=function(){this.Vg.start(!0)},t.prototype.onOptout=function(){this.Vg.stop()},t}(),bv=function(){function t(t,n,i,r){this.j=t,this.ht=n,this.H=i,this.Lw=r}return t.prototype.init=function(){var t,n,i,r,e,s,u,o,c,h,a,f,l,v,d,w,p,y,m,g,S,b,A,E,R,T,O,N,k,C,I,_,P,x,M,D=this;Zc.isSupported()&&Zc.setDigestSalt(this.j.projectId.toString()),this.Lw.schedule((function(){t=new pa(D.Lw),n=new Ot,i=new Af(n),e=new rf(window.location,i),(r=new xn(D.j,e,D.ht)).init()})),this.Lw.schedule((function(){s=new df,u=new wf,m=new Ma(window.location,r),(new If).init(),g=vf.create(wn.warn);var n=(y=new ti(g)).create("".concat(D.j.getQuotaServiceUri(),"/quota"),!0);(a=new sf(D.j,n,t,m,e)).init()})),this.Lw.schedule((function(){o=new fi(D.j,r,s),h=new la(o,a)})),this.Lw.schedule((function(){f=new ei(D.j,r,s),l=new aa(D.j,f,h,t),D.H.setContext(l,h),a.setVisitorService(l)})),this.Lw.schedule((function(){x=new Oa(D.j,new ga(D.j,r,u),t),v=new da(l,h,x),d=new pi(D.j,r,s),w=new ka(window.location,d),p=new Ca(w),S=new va(D.j,l,w),_=new Ef(B,D.j),O=new Rf(_),N=new Tf(_),k=new Of(_),C=new Nf,I=new of(O,N,k,C),T=new Ga([Va.UXA]),b=new Ba(T,I),A=new Ia(e),E=new Pa(A,T);var i=new mi(D.j,r,s);P=new gf(n,i),R=new bf(T,P);var a=new ni(l,h,w,P,D.j),y=new Si;new gi(y,window.location);(c=new Xa(D.j,r,o,f,d,i)).init();var m=new Ya(D.j,y);c.setStates(a,m)})),this.Lw.schedule((function(){var s=new ca(D.j,l,w,S,v,undefined,c,m);D.j.implementations&&((M=new Sv(D.j.implementations,T,D.Lw)).init(),t.addListener(M)),s.compute((function(s){D.Lw.schedule((function(){b.init();var o=new ef,c=new Ta(D.j,T,x,h,t),a=new La(D.j,r,u),f=new Ua(t,window.location,a),v=new Ha(T,f),d=new Za(T,D.j);var w=new Ka(D.j,l,h,undefined);s?(t.emitInitTracking(),new oa(w,g,l,h,t,T,b,D.j,v,f,c,x,n,_,i,e,d,o,I,P,R,A,E,D.Lw,y,r,u).start()):new Na(t,T,b,v,f,p,c).start()}))}))}))},t}();!function(t){var n,i={loadBundle:function(t){var s,u,o,h,a=t.source,f=t.data;if(r(f)){n=f.token,c(i.loadBundle),e(t.origin)&&(h=function(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}("{domain}/tag/tag.bundle.js?v={version}",f),s=h,u=function(){return a.postMessage("csBundleLoaded",t.origin)},(o=document.createElement("script")).type="text/javascript",o.async=!0,o.src=s,o.onload=u,o.charset="utf-8",document.head.appendChild(o))}}};function r(t){return t&&"csBundleInjection"===t.type&&e(t.domain)&&u(t.version)&&s(t.token)}function e(n){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(n)||t.hjDomainRegex.test(n)}function s(t){return/^[a-zA-Z0-9]+$/.test(t)}function u(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function o(t){window.addEventListener("message",t,!1)}function c(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=r,t.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/,t.isAuthorizedDomain=e,t.isAuthorizedToken=s,t.isAuthorizedTagVersion=u,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){o(i.loadBundle)},t.listen=o,t.removeListener=c}(dv||(dv={})),function(t){var n,i,r=window.opener||window.parent,e=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,dv.hjDomainRegex],s={ping:function(t){if("ping"===t.data&&u(t.origin)){var r=dv.hjDomainRegex.test(t.origin);n=r?"https://staging-app.contentsquare.com":t.origin,i=r?t.origin:void 0,h(s.ping),c(s.insertMessageScript),o("".concat("utils.js","?cb=").concat((new csDate).getTime()))}},insertMessageScript:a((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(s.insertMessageScript),o(n))}))};function u(t){return csArray.prototype.some.call(e,(function(n){return n.test(t)}))}function o(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var e=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(e,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function c(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function a(t){return function(r){(r.origin===n||i)&&t(r)}}t.getToken=function(){return dv.getToken()},t.isActivable=function(){return window!==r&&window.addEventListener},t.isAuthorizedDomain=u,t.waitForConnection=function(){c(s.ping),dv.waitForBundleInjection()},t.listen=c,t.removeListener=h,t.secureListener=a,t.post=function(t){i?r.postMessage(t,i):n&&r.postMessage(t,n)}}(wv||(wv={}));var Av=window.CSFrameCommunication||wv,Ev=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return J(n,t),n.prototype.emitTrackingContextResultMessage=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextResultCallback&&r.onTrackingContextResultCallback(t)}},n.prototype.emitAfterPageViewCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onAfterPageViewCallback&&r.onAfterPageViewCallback(t)}},n.prototype.emitIntegrationSessionKeyCallback=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIntegrationSessionKeyCallback&&r.onIntegrationSessionKeyCallback(t)}},n.prototype.emitParentRecordingStatusChange=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onParentRecordingStatusChange&&r.onParentRecordingStatusChange(t)}},n.prototype.emitStartAnalytics=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStartAnalytics&&i.onStartAnalytics()}},n.prototype.emitStopAnalytics=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStopAnalytics&&i.onStopAnalytics()}},n.prototype.emitStartRecording=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStartRecording&&i.onStartRecording()}},n.prototype.emitStopRecording=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onStopRecording&&i.onStopRecording()}},n}(wa),Rv=["trackTransaction"],Tv=function(){function t(t){this.Fg=t}return t.prototype.init=function(){this.Fg.register(Zu),this.Fg.register(Sf),this.Fg.register(xc),this.Fg.register(Mc),this.Fg.register(Pc),this.Fg.register(eo),this.Fg.register(so),this.Fg.register(uo),this.Fg.register(oo),this.Fg.register(Rv),this.Fg.register(Vc),this.Fg.register(Fc),this.Fg.register(ja),this.Fg.register(qa),this.Fg.register(zc),this.Fg.register(uh),this.Fg.register(oh),this.Fg.register(Pu),this.Fg.register(ba),this.Fg.register(Aa),this.Fg.register(Ea),this.Fg.register(Ra)},t.prototype.onStartTracking=function(){this.Fg.start()},t.prototype.onOptout=function(){this.Fg.stop()},t}(),Ov=function(t){function n(n,i){var r=t.call(this)||this;return r.nh=n,r.Gg=i,r.Yh=[],r}return J(n,t),n.prototype.onStart=function(){this.commandsBatchReady()},n.prototype.onStop=function(){this.Yh=[]},n.prototype.register=function(t){for(var n=this,i=function(t){r.nh.register([t],(function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n.send(t,i)}))},r=this,e=0,s=t;e<s.length;e++){i(s[e])}},n.prototype.send=function(t,n){csArray.prototype.push.call(this.Yh,{name:t,params:n}),this.isStarted&&this.commandsBatchReady()},n.prototype.commandsBatchReady=function(){if(0!==this.Yh.length){var t={commands:this.Yh};this.Gg.sendToParent(hn.Commands,t),this.Yh=[]}},X([yn("Commands.iframe.commandsBatch.send")],n.prototype,"send",null),X([Eu(),yn("send iframe commands batch")],n.prototype,"commandsBatchReady",null),n}(Pr),Nv=function(){function t(t){void 0===t&&(t=25),this.zg=t,this.Jg=[]}return t.prototype.reset=function(){this.Jg=[]},t.prototype.getMessages=function(){return this.Jg},t.prototype.addMessage=function(t){this.Jg.length<this.zg?csArray.prototype.push.call(this.Jg,t):this.Jg.length===this.zg&&(this.$g(t),csArray.prototype.push.call(this.Jg,t))},t.prototype.$g=function(t){t.type=hn.ChildLogMessage,t.content={message:"Buffer is full, events might be missing.",errorCode:"",level:ut.warn}},t}(),kv=function(t){function n(n){var i=t.call(this)||this;return i.buffer=new Nv(n),i}return J(n,t),n}(Pr),Cv=function(t){function n(n,i,r,e){var s=t.call(this,25)||this;return s.j=n,s.Rc=i,s.Wg=r,s.Xg=e,s.Yg=null,s.Kg={boundElement:window,type:"message",listener:function(t){return s.Ml(t)}},s}return J(n,t),n.prototype.onStart=function(){Gi(this.Kg,!1),this.Zg()},n.prototype.onStop=function(){zi(this.Kg,!1),this.Yg&&(an.closeChannelPort(this.Yg),this.Yg=null)},n.prototype.sendToParent=function(t,n){var i=this.buildChildBaseMessage(t,n);this.wy(i)},n.prototype.Zg=function(){var t=this.buildChildBaseMessage(hn.Discovery);an.sendPostMessage(window.parent,"*",t)},n.prototype.buildChildBaseMessage=function(t,n){var i=an.buildBaseMessage(t,cn.Child,this.j.projectId);return n&&(i.content=n),i},n.prototype.wy=function(t){null!==this.Yg?an.sendChannelMessage(this.Yg,t):this.buffer.addMessage(t)},n.prototype.Qg=function(t,n){var i=this,r=an.getNewChannelMessage();this.Yg=r.port1,this.Yg.onmessage=function(t){i.Kl(t)};var e=this.buildChildBaseMessage(hn.Discovery);e.id=n,an.sendPostMessage(window.parent,t,e,[r.port2]),this.sendAllMessagesFromBuffer()},n.prototype.Kl=function(t){switch(t.data.type){case hn.TrackingContextResultMessage:this.Xg.emitTrackingContextResultMessage(t.data.content);break;case hn.IntegrationCallback:var n=t.data.content;n.initiator===on.AfterPageView?this.Xg.emitAfterPageViewCallback(n):n.initiator===on.GetSessionKey?this.Xg.emitIntegrationSessionKeyCallback(n):wn.warn("Iframe child received unknown IntegrationCallback type from parent : ".concat(csJSON.stringify(t.data)));break;case hn.Stop:this.Rc.emitOptout();break;case hn.RecordingStatus:var i=t.data.content;this.Wg.setRecordingStatus(i),this.Xg.emitParentRecordingStatusChange(i);break;default:wn.warn("Iframe child received unknown channelMessage type from parent : ".concat(csJSON.stringify(t.data)))}},n.prototype.Ml=function(t){if(null===this.Yg&&an.isMessageValid(t,cn.Parent,this.j.projectId,this.j.hostnames))switch(t.data.type){case hn.Stop:this.Rc.emitOptout();break;case hn.Discovery:if(!Ut(t.data.id)||t.data.id<0)return void wn.warn("Iframe child received discovery without valid id from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));this.Qg(t.origin,t.data.id);break;default:wn.warn("Iframe child received unknown postMessage type from parent (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.sendAllMessagesFromBuffer=function(){if(null!==this.Yg){for(var t=0,n=this.buffer.getMessages();t<n.length;t++){var i=n[t];an.sendChannelMessage(this.Yg,i)}this.tS(),this.buffer.reset()}},n.prototype.tS=function(){var t=an.buildBaseMessage(hn.EndOfBufferedMessages,cn.Child,this.j.projectId);an.sendChannelMessage(this.Yg,t)},n}(kv),Iv=function(){function t(t){this.Gg=t}return t.prototype.onStartTracking=function(){this.Gg.start()},t.prototype.onOptout=function(){this.Gg.stop()},t}(),_v=function(){function t(t,n,i,r){this.Hh=t,this.Fh=n,this.Gg=i,this.Wg=r}return t.prototype.init=function(){var t=this;this.Hh.onChildMessage((function(n,i,r){return t.Fh.emitIframeEvent(n,i,r)})),this.Hh.setRecordingStatusCallback((function(){return t.Wg.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.Hh.start()},t.prototype.onOptout=function(){this.Hh.stop()},t.prototype.onIframeRecordingUserEvent=function(t){var n={events:t,containsUserEvent:!0};this.Gg.sendToParent(hn.RecordingEvent,n)},t.prototype.onIframeRecordingBrowserEvent=function(t){var n={events:t,containsUserEvent:!1};this.Gg.sendToParent(hn.RecordingEvent,n)},t.prototype.onIframeAnalysisUserEvent=function(t){var n={event:t,isUserEvent:!0};this.Gg.sendToParent(hn.AnalysisEvent,n)},t.prototype.onIframeAnalysisBrowserEvent=function(t){var n={event:t,isUserEvent:!1};this.Gg.sendToParent(hn.AnalysisEvent,n)},t.prototype.onIframeJavascriptError=function(t){this.Gg.sendToParent(hn.JavascriptError,t)},t.prototype.onIframeApiError=function(t){this.Gg.sendToParent(hn.ApiError,t)},t.prototype.onIframeDetailedApiError=function(t){this.Gg.sendToParent(hn.DetailedApiError,t)},t.prototype.onIframeEmerchandisingMessage=function(t){this.Gg.sendToParent(hn.EmerchandisingMessage,t)},t.prototype.onIframeCommands=function(t){this.Gg.sendToParent(hn.Commands,t)},t.prototype.onIframeIntegrationCallback=function(t){this.Gg.sendToParent(hn.IntegrationCallback,t)},t.prototype.onTrackingContextRequestCallback=function(t){this.Gg.sendToParent(hn.TrackingContextRequestMessage,t)},t.prototype.onIframeStaticResource=function(t){this.Gg.sendToParent(hn.StaticResource,t)},t.prototype.onIframeCustomError=function(t){this.Gg.sendToParent(hn.CustomError,t)},t.prototype.onTrackingContextResultCallback=function(t){this.Hh.sendToChildren(hn.TrackingContextResultMessage,t)},t.prototype.onAfterPageViewCallback=function(t){this.Hh.sendToChildren(hn.IntegrationCallback,t)},t.prototype.onIntegrationSessionKeyCallback=function(t){this.Hh.sendToChildren(hn.IntegrationCallback,t)},t.prototype.onParentRecordingStatusChange=function(t){this.Hh.sendToChildren(hn.RecordingStatus,t)},t}(),Pv=function(t){function n(n,i,r,e,s,u,o,c){var h=t.call(this)||this;return h.Wa=n,h.fa=i,h.Gg=r,h.rf=e,h.ef=s,h.uf=u,h.cf=o,h.hf=c,h}return J(n,t),n.prototype.init=function(){var t,n,i,r,e,s=this;this.Wa.onEvent((function(t){return s.Le(t)})),this.fa.onEvent((function(t){return s.Le(t)})),null===(t=this.rf)||void 0===t||t.onEvent((function(t){return s.Le(t)})),null===(n=this.ef)||void 0===n||n.onEvent((function(t){return s.Le(t)})),null===(i=this.uf)||void 0===i||i.onEvent((function(t){return s.Le(t)})),null===(r=this.cf)||void 0===r||r.onEvent((function(t){return s.ff(t)})),null===(e=this.hf)||void 0===e||e.onEvent((function(t){return s.ff(t)}))},n.prototype.onStart=function(){var t,n,i,r,e;this.Wa.start(),this.fa.start(),null===(t=this.rf)||void 0===t||t.start(),null===(n=this.ef)||void 0===n||n.start(),null===(i=this.uf)||void 0===i||i.start(),null===(r=this.cf)||void 0===r||r.start(),null===(e=this.hf)||void 0===e||e.start()},n.prototype.onStop=function(){var t,n,i,r,e;this.Wa.stop(),this.fa.stop(),null===(t=this.rf)||void 0===t||t.stop(),null===(n=this.ef)||void 0===n||n.stop(),null===(i=this.uf)||void 0===i||i.stop(),null===(r=this.cf)||void 0===r||r.stop(),null===(e=this.hf)||void 0===e||e.stop()},n.prototype.Le=function(t){var n={isUserEvent:!0,event:t};this.Je(n)},n.prototype.ff=function(t){var n={isUserEvent:!1,event:t};this.Je(n)},n.prototype.Je=function(t){this.isStarted&&t.event.type!==Hu.RESIZE&&this.Gg.sendToParent(hn.AnalysisEvent,t)},n}(Pr),xv=["webview:analytics:start"],Mv=["webview:analytics:stop"],Dv=function(){function t(t,n,i,r,e,s,u,o){this.j=t,this.tf=n,this.Sa=i,this.Gg=r,this.Rt=e,this.nS=s,this.nh=u,this.fa=o}return t.prototype.init=function(){var t=new To(this.j,this.tf,this.Sa),n=this.Rt.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},i=new po(this.j,this.tf,this.fa,n);this.iS=new Pv(t,i,this.Gg,undefined,undefined,undefined,undefined,undefined),this.iS.init(),this.Rt.isInWebViewContext()&&this.rS()},t.prototype.onStartTracking=function(){this.iS.start()},t.prototype.onOptout=function(){this.iS.stop()},t.prototype.onStartAnalytics=function(){this.iS.start()},t.prototype.onStopAnalytics=function(){this.iS.stop()},t.prototype.rS=function(){var t=this;this.nh.register(xv,(function(){return t.nS.emitStartAnalytics()}),{disableApplyPending:!0}),this.nh.register(Mv,(function(){t.nS.emitStopRecording(),t.nS.emitStopAnalytics()}),{disableApplyPending:!0})},t}(),Lv=function(t){function n(n,i,r,e,s,u,o,c,h){void 0===c&&(c=[]);var a=t.call(this)||this;return a.j=n,a.ae=i,a.we=r,a.Gg=e,a.ge=s,a.be=u,a.Ae=o,a.Ee=c,a.Te=h,a.eS=!1,a.Ie=new _r,a.oe=[],a.sS=!1,a.Me=function(t){return a.ff(t)},a.De=function(t){return a.Le(t)},a}return J(n,t),n.prototype.init=function(){this.We()},n.prototype.We=function(){var t,n;this.be.onEvent(this.Me,this.De),this.ae.onEvent(this.De),null===(t=this.we)||void 0===t||t.onTextNodeToEncrypt(this.Me),null===(n=this.we)||void 0===n||n.onInputNodeToEncrypt(this.De)},n.prototype.activateOnlineAssetsOnNextStart=function(){this.eS=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.Te?{supported:ps.isSupported(),onlineAssets:{activated:this.Te.isOnlineAssetsActivated(),enableOnNextStart:this.eS}}:null},n.prototype.ff=function(t){this.uS(t),this.oS()},n.prototype.Le=function(t){this.cS(t),this.oS()},n.prototype.cS=function(t){csArray.prototype.push.call(this.oe,t),this.sS=!0},n.prototype.uS=function(t){csArray.prototype.push.call(this.oe,t)},n.prototype.oS=function(){Gn(this.Ee,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)}));var t={containsUserEvent:this.sS,events:this.oe};this.Gg.sendToParent(hn.RecordingEvent,t),this.oe=[],this.sS=!1},n.prototype.onStart=function(){Xr.start(),this.Ae.setSensitiveSettings(this.ge.getSensitiveSettings()),this.Te&&this.eS&&(this.Te.enableOnlineAssets(),this.eS=!1),this.be.start(),this.j.emitDebugEvents&&this.Ie.emit("replayRecordingStarted"),Gn(this.Ee,(function(t){t.start&&t.start()}))},n.prototype.onStop=function(){var t;Xr.stop(),this.be.stop(),this.ae.stop(),null===(t=this.Te)||void 0===t||t.disableOnlineAssets(),Gn(this.Ee,(function(t){t.stop&&t.stop()}))},n.prototype.addInitialDom=function(t){for(var n=0;n<this.oe.length;n+=1){if(this.oe[n].date>=t.date)return csArray.prototype.splice.call(this.oe,n,0,t),this.sS=!0,void this.oS()}this.cS(t),this.oS()},n}(Pr),Uv=function(){function t(t){this.j=t}return t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.j.consentRequired},t}(),jv=function(){function t(){}return t.isWebViewLocalAssetsSupported=function(){return"URL"in window},t}(),qv=["webview:replay:start"],Hv=["webview:replay:stop"],Bv=function(){function t(t,n,i,r,e,s,u,o){this.j=t,this.ge=n,this.nS=i,this.hS=r,this.aS=e,this.fS=s,this.nh=u,this.ot=o,this.lS=!1}return t.prototype.init=function(){var t=this,n=new Uv(this.j),i=new Uh;if(this.eh=new Ia(this.ot),new Pa(this.eh,this.nh).init(),this.hh=new Lh(n,this.j,this.ot,i),this.hh.init(),jv.isWebViewLocalAssetsSupported()){var r=function(n){t.vS(n)},e=function(t){return wn.error("An error occurred while fetching a styleSheet: "+t)},s=new Set,u=function(t){return!s.has(t)},o=function(n){s.add(n.assetId),t.vS([n])};this.hS.onAsset((function(n){t.dS(n)})),this.hS.onStyleSheetFound((function(n){t.fS.getStyleSheetAssets(n.assetId,r,e,u,o)}))}this.wS()},t.prototype.onStartRecording=function(){this.lS=!0,this.eh.isUrlExcludedForSessionReplay()||this.nS.emitParentRecordingStatusChange({isRecording:!0,isMutationTrackerStarted:!0,sensitiveSettings:this.ge.getSensitiveSettings(),capturedElementSelector:Xr.getWhitelistedElementsSelector(),useAnonymization:this.hh.shouldUseAnonymization()})},t.prototype.onStopRecording=function(){this.lS=!1,this.nS.emitParentRecordingStatusChange({isRecording:!1,isMutationTrackerStarted:!1})},t.prototype.onArtificialPageViewEnd=function(){this.nS.emitParentRecordingStatusChange({isRecording:!1})},t.prototype.onAfterArtificialPageView=function(){this._i()&&!this.eh.isUrlExcludedForSessionReplay()&&this.nS.emitParentRecordingStatusChange({isRecording:!0})},t.prototype._i=function(){return this.lS},t.prototype.wS=function(){var t=this;this.nh.register(qv,(function(){t.nS.emitStartAnalytics(),t.nS.emitStartRecording()}),{disableApplyPending:!0}),this.nh.register(Hv,(function(){return t.nS.emitStopRecording()}),{disableApplyPending:!0})},t.prototype.dS=function(t){this.aS.sendToParent(hn.Assets,{assets:[t]})},t.prototype.vS=function(t){0!==t.length&&this.aS.sendToParent(hn.Assets,{assets:t})},t}();var Vv=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Fv(t,n){var i=t.replace(Vv,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],e=t[9]||t[10]||t[11],s=(r||e).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"�":String.fromCodePoint(e)}));return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(s)||s)+")"}));return i}var Gv,zv=function(){function t(t){this.pS=t}return t.prototype.getStyleSheetAssets=function(t,n,i,r,e){var s=this,u=[];if(ne(t)){this.pS.getResourceContentText(t,(function(t,o){var c=s.$s(t,o);csArray.prototype.forEach.call(c,(function(t){csArray.prototype.push.call(u,t),ne(t.assetId)&&r(t.assetId)&&(null==e||e(t),s.getStyleSheetAssets(t.assetId,n,i,r,e))})),n(u)}),(function(t){return i(t)}))}},t.prototype.$s=function(t,n){return this.yS(t,function(t){var n=[];return Fv(t,(function(t){return n.push(t),t})),n}(n))},t.prototype.yS=function(t,n){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(n,(function(t){return!Qr(t)})),(function(t){return!te(t)})),(function(n){return{assetId:nn(n,t),assetBasePath:t,assetRawPath:n}}))},t}(),Jv=function(){function t(){}return t.prototype.getResourceContentText=function(t,n,i){var r=this.mS((function(i){n(t,i.responseText)}),i);r.open("GET",t),r.send()},t.prototype.mS=function(t,n){var i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?t(i):n(i.statusText))},i},t}(),$v=function(t){function n(n,i){var r=t.call(this)||this;return r.Tc=n,r.Gg=i,r}return J(n,t),n.prototype.onStart=function(){},n.prototype.onStop=function(){},n.prototype.init=function(){var t=this;this.Tc.onSendStaticResource((function(n){return t.Gg.sendToParent(hn.StaticResource,n)}))},n}(Pr);!function(t){var n;function i(n){Gn(n,(function(n){_i(n).visitAll((function(n){return ur.setProperty(n,t.nodeProp,!0)}))}))}t.nodeProp="toEncrypt",t.stop=function(){null==n||n.disconnect(),n=null},t.addSelector=function(t){Rr(t)&&(null==n&&(n=new Zr(i)),n.observe(t))},t.shouldEncrypt=function(n){return!0===ur.getProperty(n,t.nodeProp)},t.getSelectors=function(){return null==n?void 0:n.selectors}}(Gv||(Gv={}));var Wv,Xv=function(){function t(t,n,i,r,e,s,u,o,c,h){this.j=t,this.q=n,this.ge=i,this.Rc=r,this.Gg=e,this.Wg=s,this.nh=u,this.Xg=o,this.Rt=c,this.ot=h}return t.prototype.init=function(){var t=this,n=[],i=this.Wg.getRecordingStatus();this.ah=new Us(!!i.useAnonymization,this.fh(),(function(n){return t.q.checkAndAnonymizePII(n,t.j.anonymizeDigits,t.j.anonymizeEmails)}));var r=[];csArray.prototype.push.call(r,new Cs,this.ah);var e=new Rs;csArray.prototype.push.call(n,e),!this.Rt.isInWebViewContext()&&this.j.useStaticResourceManager&&ps.isSupported()&&(this.Te=new ps,csArray.prototype.push.call(r,this.Te),this.Tc=new bu,this.gS=new $v(this.Tc,this.Gg),this.gS.init()),this.ae=new Nr,this.ae.init(),csArray.prototype.push.call(n,new Ss(window.location,this.q));var s=new Xh((function(){})),u=[s,new us,new vu(csArray.prototype.filter.call(n,(function(t){return t}))),new Gs,new Ws,new Zs,new ru(this.we)];var o=new fu(u,r),c=new Su(o,this.Rc,this.Tc);if(this.SS=new Lv(this.j,this.ae,this.we,this.Gg,this.ge,c,s,n,this.Te),this.nh.register(_u,(function(){return t.Wg.getRecordingStatus().isRecording})),this.nh.register(Cu,(function(t){Xr.setWhitelistedElementsSelector(t)})),this.nh.register(Yh,(function(n){t.ge.setSensitiveSettingsFromCommand(n)})),this.nh.register(xu,(function(){return t.SS.getStaticResourceManagerStatus()})),this.SS.init(),this.Rt.isInWebViewContext()){var h=new zv(new Jv);this.bS=new Bv(this.j,this.ge,this.Xg,e,this.Gg,h,this.nh,this.ot),this.Xg.addListener(this.bS),this.Rc.addListener(this.bS),this.bS.init()}},t.prototype.fh=function(){var t=new Set;return csArray.prototype.forEach.call(lu,(function(n){t.add(n)})),csArray.prototype.forEach.call(this.j.whitelistedAttributes,(function(n){t.add(n)})),t},t.prototype.onParentRecordingStatusChange=function(t){var n,i;t.sensitiveSettings&&this.ge.setSensitiveSettingsFromParent(t.sensitiveSettings),t.capturedElementSelector&&Xr.setWhitelistedElementsSelector(t.capturedElementSelector),void 0!==t.useAnonymization&&this.ph(t.useAnonymization),t.encryptionSelectors&&(Gv.addSelector(t.encryptionSelectors),this.we.setEncryptionSelectors(t.encryptionSelectors)),t.activateOnlineAssetsOnNextStart&&this.SS.activateOnlineAssetsOnNextStart(),t.isRecording?(this.SS.start(),null===(n=this.gS)||void 0===n||n.start()):(this.SS.stop(),null===(i=this.gS)||void 0===i||i.stop())},t.prototype.onInitialDomStart=function(){},t.prototype.onInitialDomDone=function(t){this.ae.start(),this.SS.addInitialDom(t)},t.prototype.ph=function(t){var n;this.ah.setAnonymization(t),null===(n=this.Eh)||void 0===n||n.setAnonymization(t)},t.prototype.onOptout=function(){this.SS.stop()},t}(),Yv=function(){function t(t,n){this.aS=t,this.AS=n}return t.prototype.init=function(){var t=this;this.aS.onWebViewEvent((function(n,i){t.AS.emitWebviewEventToBridge(n,i)}))},t.prototype.onStartTracking=function(){this.aS.start()},t.prototype.onOptout=function(){this.aS.stop()},t.prototype.onStartAnalytics=function(){this.aS.setAnalyticsStatus(!0)},t.prototype.onStopAnalytics=function(){this.aS.setAnalyticsStatus(!1)},t.prototype.onParentRecordingStatusChange=function(t){this.AS.setSessionReplayStatus(t.isRecording)},t}();!function(t){t[t.PAGE_VIEW=4]="PAGE_VIEW",t[t.TAP=6]="TAP",t[t.LONG_PRESS=8]="LONG_PRESS",t[t.DRAG=9]="DRAG",t[t.FLICK=10]="FLICK",t[t.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",t[t.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",t[t.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",t[t.API_ERROR=21]="API_ERROR",t[t.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",t[t.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN"}(Wv||(Wv={}));var Kv,Zv=function(){function t(){this.ES=1}return t.prototype.transformEvent=function(t){switch(t.type){case Hu.TAP:return{version:this.ES,type:Wv.TAP,data:{path:t.tgt}};case Hu.DRAG:var n=t;return{version:this.ES,type:Wv.DRAG,data:{path:n.tgt,direction:n.fd,distance:n.distance,velocity:n.velocity}};case Hu.FLICK:var i=t;return{version:this.ES,type:Wv.FLICK,data:{path:i.tgt,direction:i.fd,distance:i.distance,velocity:i.velocity}};default:return null}},t}(),Qv=function(){function t(t,n,i,r){this.ot=t,this.le=n,this.de=i,this.q=r,this.ES=1}return t.prototype.transformEvent=function(t,n){switch(t){case hn.ApiError:case hn.DetailedApiError:var i=this.de.anonymize(n);return{version:this.ES,data:i};case hn.JavascriptError:var r=$($({},n),{pageUrl:this.ot.getAnonymizedUrl()});i=this.le.anonymize(r);return{version:this.ES,data:$($({},i),{date:Ct()})};case hn.CustomError:var e=n;return e.message=this.q.anonymizePII(e.message),{version:this.ES,data:$($({},e),{date:Ct()})};default:return null}},t}();!function(t){var n=5,i=30,r=30;t.buildCustomErrorEvent=function(t,e,s){void 0===s&&(s=!1);var u={message:os.truncate(t,300,os.ELLIPSIS),errorType:"customError"};return(s||function(t){var i=Object.keys(t).length;return i>0&&i<=n}(e))&&(!function(t){for(var n in t){var e=t[n];if(t[n].length>r&&(e=os.truncate(t[n],r,os.ELLIPSIS),t[n]=e),n.length>i){var s=os.truncate(n,i,os.ELLIPSIS);delete t[n],t[s]=e}}}(e),u.attributes=e),u}}(Kv||(Kv={}));var td;!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.getBridgeVersion=function(){if("function"==typeof window.CSJavascriptBridge.getVersion)try{var t=window.CSJavascriptBridge.getVersion();if(Lt(t))return t}catch(t){wn.warn("an error occurred when calling getVersion")}return null},t.notifyIsReadyForTracking=function(){"function"==typeof window.CSJavascriptBridge.onWebviewTrackingReady&&window.CSJavascriptBridge.onWebviewTrackingReady()},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i){window.CSJavascriptBridge.sendTransaction(t,n,i)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,(function(t){return t.assetId})))},t.sendNativeSREvent=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(t))}}(td||(td={}));var nd=function(){function t(t,n,i,r,e,s,u,o){this.RS=t,this.TS=n,this.OS=i,this.NS=r,this.kS=e,this.Rc=s,this.de=u,this.ot=o,this.CS=!1}return t.prototype.emitWebviewEventToBridge=function(t,n){return Y(this,void 0,void 0,(function(){var i,r,e,s,u,o,c,h,a=this;return K(this,(function(f){switch(f.label){case 0:switch(t){case hn.AnalysisEvent:return[3,1];case hn.RecordingEvent:return[3,2];case hn.ChildLogMessage:return[3,3];case hn.Commands:return[3,4];case hn.Assets:return[3,5];case hn.JavascriptError:return[3,7];case hn.ApiError:return[3,8];case hn.DetailedApiError:return[3,9]}return[3,10];case 1:return(i=this.OS.transformEvent(n.event))&&td.sendAnalysisEvent(i),[3,11];case 2:return td.sendSREvent(n),[3,11];case 3:return td.sendLog(n),[3,11];case 4:return wn.tryToExecute("SDKMessageUtils.sendMessage.sendCommandMessage: ".concat(n),(function(){a.IS(n)}))(),[3,11];case 5:return e=(r=n).assets,s=r.serializationId,[4,this.kS.getTransformedAssets(e,s)];case 6:return u=f.sent(),td.sendAssets(u,s),[3,11];case 7:return(o=this.NS.transformEvent(hn.JavascriptError,n))&&(this.CS&&td.sendNativeSREvent($($({},o),{type:Wv.JAVASCRIPT_ERROR_SR})),td.sendAnalysisEvent($($({},o),{type:Wv.JAVASCRIPT_ERROR_AN}))),[3,11];case 8:return(c=this.NS.transformEvent(hn.ApiError,n))&&td.sendAnalysisEvent($($({},c),{type:Wv.API_ERROR})),[3,11];case 9:return(h=this.NS.transformEvent(hn.DetailedApiError,n))&&td.sendNativeSREvent($($({},h),{type:Wv.DETAILED_API_ERROR})),[3,11];case 10:return[3,11];case 11:return[2]}}))}))},t.prototype.setSessionReplayStatus=function(t){this.CS=t},t.prototype.IS=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];switch(!0){case csArray.prototype.indexOf.call(qa,r.name)>=0:td.sendOptIn();break;case csArray.prototype.indexOf.call(ja,r.name)>=0:this.Rc.emitOptout(),td.sendOptOut();break;case csArray.prototype.indexOf.call(Zu,r.name)>=0:this._S(r);break;case csArray.prototype.indexOf.call(Pc,r.name)>=0:this.PS(r);break;case csArray.prototype.indexOf.call(so,r.name)>=0:this.xS(r);break;case csArray.prototype.indexOf.call(uo,r.name)>=0:break;case csArray.prototype.indexOf.call(oo,r.name)>=0:this.Gm();break;case csArray.prototype.indexOf.call(Rv,r.name)>=0:this.xS(r),this.Gm();break;case csArray.prototype.indexOf.call(Oh,r.name)>=0:this.de.addUrlMaskingPattern(r.params[0]);break;case csArray.prototype.indexOf.call(Ch,r.name)>=0:this.MS(r);break;default:wn.warn("WebviewBridgeEventEmitter received an unknown command: ".concat(csJSON.stringify(r)))}}},t.prototype._S=function(t){if(1===t.params.length){var n=t.params[0];if(Xu.isValid(n.key,n.value)){var i=this.RS.anonymizePII(n.key),r=this.RS.anonymizePII(n.value);td.sendDynamicVariable(i,r)}}},t.prototype.PS=function(t){if(1===t.params.length){var n=t.params[0];if(jt(n)){var i={type:Wv.PAGE_VIEW,version:1,data:{url:n}};this.ot.overridePath(n),this.Rc.emitArtificialPageViewEnd(),td.sendAnalysisEvent(i),this.Rc.emitAfterArtificialPageView()}}},t.prototype.xS=function(t){if(1===t.params.length){var n=t.params[0];n.value&&(n.revenue=n.value),this.TS.addTransaction(n)}},t.prototype.Gm=function(){var t=this.TS.getTransaction();to.isValid(t)&&(td.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.TS.clear())},t.prototype.MS=function(t){if(!(t.params.length<1)){var n=t.params[0],i=t.params[1]||{};if(jt(n)&&qt(i)){var r=Kv.buildCustomErrorEvent(n,i),e=this.NS.transformEvent(hn.CustomError,r);e&&(this.CS&&td.sendNativeSREvent($($({},e),{type:Wv.CUSTOM_ERROR_SR})),td.sendAnalysisEvent($($({},e),{type:Wv.CUSTOM_ERROR_AN})))}}},t}(),id="LOCAL_ASSET",rd="NONE",ed="ONLY_LOCAL_ASSETS",sd="ALL",ud=function(){function t(t){var n,i;this.DS=t,this.LS=new Set,this.US=rd;try{var r=null===(i=null===(n=window.CSJavascriptBridge)||void 0===n?void 0:n.getAssetTransformerMode)||void 0===i?void 0:i.call(n);r!==ed&&r!==sd||(this.US=r)}catch(t){}}return t.prototype.setAssetProcessingMode=function(t){this.US=t},t.prototype.getTransformedAssets=function(t,n){return Y(this,void 0,void 0,(function(){var i,r,e,s,u,o,c,h,a;return K(this,(function(f){switch(f.label){case 0:if(this.US===rd)return[2,t];i=[],r=0,e=t,f.label=1;case 1:if(!(r<e.length))return[3,8];if(s=e[r],u=s.assetId,o=this.jS(u),this.US!==sd&&o!==id)return[3,6];if(c=u,this.qS(u,n)&&(c=this.HS(u,n)),this.LS.has(c))return csArray.prototype.push.call(i,s),[3,7];f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.DS.getAssetContent(u)];case 3:return h=f.sent(),this.LS.has(c)?(csArray.prototype.push.call(i,s),[3,7]):(csArray.prototype.push.call(i,$($({},s),{retrievedAssetContent:h})),this.LS.add(s.assetId),[3,5]);case 4:return a=f.sent(),wn.error("an error occurred while getting data for asset: ".concat(c,": ").concat(a)),csArray.prototype.push.call(i,s),[3,5];case 5:return[3,7];case 6:csArray.prototype.push.call(i,s),f.label=7;case 7:return r++,[3,1];case 8:return[2,i]}}))}))},t.prototype.jS=function(t){var n=window.WEBVIEW_SERVER_URL||null;try{return"file:"===new csURL(t).protocol||n&&csString.prototype.startsWith.call(t,n)?id:"REMOTE_ASSET"}catch(n){wn.error("Error constructing URL (".concat(t,'"): ').concat(n.message))}return"UNKNOWN_ASSET_TYPE"},t.prototype.qS=function(t,n){return n&&csString.prototype.endsWith.call(t,".css")||!1},t.prototype.HS=function(t,n){return"".concat(t,"#").concat(n)},t}(),od=function(){function t(){this.BS=52428800,this.VS=31457280,this.FS=0,this.GS=!1,this.zS=new Map,this.yc=[]}return t.prototype.getAssetContent=function(t){return Y(this,void 0,void 0,(function(){var n,i=this;return K(this,(function(r){return(n=this.zS.get(t))?[2,n]:[2,new Promise((function(n,r){csArray.prototype.push.call(i.yc,{assetUrl:t,successCallback:n,errorCallback:r}),i.GS||i.JS()}))]}))}))},t.prototype.JS=function(){return Y(this,void 0,void 0,(function(){var t,n,i=this;return K(this,(function(r){switch(r.label){case 0:this.GS=!0,t=function(){var t,r,e,s,u,o,c,h,a,f,l,v;return K(this,(function(d){switch(d.label){case 0:if(t=csArray.prototype.shift.call(n.yc),r=t.assetUrl,e=t.successCallback,s=t.errorCallback,u=n.zS.get(r))return e(u),[2,"continue"];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,n.$S("GET",r,"blob")];case 2:if(o=d.sent(),200===(c=o.target).status){if(h=c.getResponseHeader("Content-Type"),(a=Number(c.getResponseHeader("Content-Length")))&&Number(a)>n.VS)return v="asset is too big, size = ".concat(a," bytes"),s(v),[2,"continue"];(f=new FileReader).onload=function(){var t={data:csString.prototype.split.call(f.result,"base64,")[1],mimeType:null!=h?h:""};i.FS+=a,i.FS>i.BS&&(i.FS=0,i.zS.clear()),i.zS.set(r,t),e(t)},f.onerror=function(){s("Error converting XHR response to base64")},f.readAsDataURL(c.response)}else s("error downloading ".concat(r,": ").concat(c.statusText));return[3,4];case 3:return l=d.sent(),v="Error downloading resource ".concat(r,": ").concat(l.message),s(v),[3,4];case 4:return[2]}}))},n=this,r.label=1;case 1:return this.yc.length>0?[5,t()]:[3,3];case 2:return r.sent(),[3,1];case 3:return this.GS=!1,[2]}}))}))},t.prototype.$S=function(t,n,i){return new Promise((function(r,e){var s=new XMLHttpRequest;s.open(t,n),s.responseType=i,s.onload=r,s.onerror=e,s.send()}))},t}();function cd(t){if(null==t?void 0:t.length)return Vn(t,(function(t){return function(t){var n=[];try{n=Vn(t.cssRules,(function(t){return t.cssText}))}catch(t){}return{cssRules:n}}(t)}))}var hd=function(){function t(t,n,i){this.Gg=t,this.fS=n,this.hS=i}return t.prototype.handleCommand=function(t){var n=t&&t.withAssets,i=[],r=new Set,e=new Set,s=[];n&&jv.isWebViewLocalAssetsSupported()?(this.hS.onAsset((function(t){r.has(t.assetId)||(r.add(t.assetId),csArray.prototype.push.call(i,t))})),this.hS.onStyleSheetFound((function(t){e.has(t.assetId)||(e.add(t.assetId),csArray.prototype.push.call(s,t))})),this.hS.stop(),this.hS.start()):(this.hS.stop(),jv.isWebViewLocalAssetsSupported()||wn.warn("Local asset is not supported on this browser"));var u,o=(void _i(document).visitAll((function(t){var n;if(R(t)&&(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)>0){var i=cd(t.adoptedStyleSheets);ur.setProperty(t,"styles",i)}})),u=function(t,n){var i;return ts(vr(vr({},n),{async:!1}))(t,(function(t){return i=t})),i}(document),ur.traverse(u,(function(t){if(11===t.nodeType){var n=ur.getProperty(t,"styles");n&&(t.adoptedStyleSheets=n)}})),u),c=csJSON.stringify(o);if(n){var h=zh.generate();return this.WS(i,s,h),csJSON.stringify({serializedDom:c,serializationId:h})}return c},t.prototype.WS=function(t,n,i){var r=this;0===n.length?this.vS(t,i):this.XS(t,n,i,(function(t,n){return r.vS(t,n)}))},t.prototype.XS=function(t,n,i,r){var e=this,s=0,u=0,o=new Set(csArray.prototype.map.call(t,(function(t){return t.assetId}))),c=function(t){return!o.has(t)},h=function(i){o.has(i.assetId)||(o.add(i.assetId),csArray.prototype.push.call(n,i),csArray.prototype.push.call(t,i))},a=function(e){for(var c=0,h=e;c<h.length;c++){var a=h[c];o.has(a.assetId)||(o.add(a.assetId),csArray.prototype.push.call(t,a))}++s+u===n.length&&r(t,i)},f=function(e){u++,wn.error("An error occurred while fetching a styleSheet: "+e),s+u===n.length&&r(t,i)};csArray.prototype.forEach.call(n,(function(t){e.fS.getStyleSheetAssets(t.assetId,a,f,c,h)}))},t.prototype.vS=function(t,n){this.Gg.sendToParent(hn.Assets,{assets:t,serializationId:n})},t}();var ad,fd,ld=function(){function t(t){this.j=t,this.YS=null,this.KS=this.Nh(),this.ZS=this.Ch()}return t.prototype.isSdkTrackingContext=function(t){return Bt(t)&&qt(t)&&jt(t.sessionKey)&&Ut(t.pageNumber)&&jt(t.pageViewType)&&"boolean"==typeof t.isRecording},t.prototype.update=function(t){if(!this.isSdkTrackingContext(t))return wn.warn("webViewTrackingContext.service received wrong sdkTrackingContext, content:".concat(csJSON.stringify(t))),void(this.YS=null);this.YS=$($({},t),{recordingConsentState:Ru.NOT_NEEDED,projectId:this.KS,uxaDomain:this.ZS})},t.prototype.getTrackingContext=function(){return this.YS},t.prototype.Nh=function(){return this.j.projectId},t.prototype.Ch=function(){return this.j.uxaDomain},t}(),vd=function(){function t(t){this.QS=t,this.xh=[]}return t.prototype.handleCommand=function(t){if(Vt(t)){this.Mh(t);var n=this.QS.getTrackingContext();null!==n&&this.Dh(t,n)}},t.prototype.executeRegisteredCallbacks=function(t){var n=this,i=t.trackingContext;i&&csArray.prototype.map.call(this.xh,(function(t){return n.Dh(t,i)}))},t.prototype.Mh=function(t){csArray.prototype.push.call(this.xh,t)},t.prototype.Dh=function(t,n){csSetTimeout((function(){t(n)}))},t}(),dd=function(){function t(t,n){this.Hh=t,this.QS=n}return t.prototype.onIframeIntegrationCallback=function(t){var n=this.QS.getTrackingContext();null!==n&&(t.trackingContext=n,this.Hh.sendToChildren(hn.IntegrationCallback,t))},t}(),wd=function(){function t(t){this.commandsService=t,this.Jh=new Fu}return t.prototype.registerChildCommands=function(){var t=this;this.commandsService.register(Ju,(function(n){return t.Jh.handleCommand(n,t.fp)}))},t.prototype.onParentRecordingStatusChange=function(t){this.fp={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Kn.ETR_OFF},this.Jh.executeCallbacks(this.fp)},X([Eu()],t.prototype,"onParentRecordingStatusChange",null),t}(),pd=["serializeWebView","webview:serializeWebView"],yd=["setAssetTransformerMode","webview:setAssetTransformerMode"],md=["webview:onAfterScreenView"],gd=function(t){function n(n,i,r,e,s,u,o){var c=t.call(this,n)||this;return c.commandsService=n,c.Gg=i,c.Hh=r,c.kS=e,c.tb=s,c.Fh=u,c.j=o,c}return J(n,t),n.prototype.init=function(){this.QS=new ld(this.j),this.nb=new dd(this.Hh,this.QS),this.Fh.addListener(this.nb),this.ib=new vd(this.QS);var t=new zv(new Jv),n=new Rs(!1);this.rb=new hd(this.Gg,t,n),this.kv()},n.prototype.onAfterPageViewCallback=function(t){this.ib.executeRegisteredCallbacks(t)},n.prototype.kv=function(){var n=this;t.prototype.registerChildCommands.call(this),this.commandsService.register(Gu,(function(t){n.ib.handleCommand(t)})),this.commandsService.register(md,(function(t){n.QS.update(t);var i=n.QS.getTrackingContext();null!==i&&n.tb.emitAfterPageViewCallback({initiator:on.AfterPageView,trackingContext:i})})),this.commandsService.register(pd,(function(t){return n.rb.handleCommand(t)})),this.commandsService.register(yd,(function(t){t!==rd&&t!==ed&&t!==sd||n.kS.setAssetProcessingMode(t)}))},n}(wd),Sd=function(){function t(t){this.Gg=t,this.xh={}}return t.prototype.handleCommand=function(t){Vt(t)&&this.Mh(t)},t.prototype.executeRegisteredCallbacks=function(t){var n=t.trackingContext;if(n)if(t.callbackId){var i=this.xh[t.callbackId];i&&this.Dh(i,n)}else for(var r in this.xh)this.Dh(this.xh[r],n)},t.prototype.Mh=function(t){var n=et.integer(),i={callbackId:n,initiator:on.AfterPageView};this.xh[n]=t,this.Gg.sendToParent(hn.IntegrationCallback,i)},t.prototype.Dh=function(t,n){csSetTimeout((function(){t(n)}))},t}(),bd=function(){function t(t){this.Gg=t,this.Lh={}}return t.prototype.handleCommand=function(t){qt(t)&&Vt(t.callback)&&this.jh(t.callback)},t.prototype.executePendingCallbacks=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n){var r=this.Lh[i];r&&(delete this.Lh[i],this.Dh(r,n.sessionKey))}},t.prototype.jh=function(t){var n=et.integer(),i={callbackId:n,initiator:on.GetSessionKey};this.Lh[n]=t,this.Gg.sendToParent(hn.IntegrationCallback,i)},t.prototype.Dh=function(t,n){csSetTimeout((function(){t(n)}))},t}(),Ad=function(){function t(t,n){this.Gg=t,this.Hh=n,this.eb={}}return t.prototype.handleCommand=function(t,n){qt(t)&&Vt(n)&&this.jh(t,n)},t.prototype.executePendingCommand=function(t){var n=t.trackingContext,i=t.callbackId;if(i&&n)if(this.eb[i]){var r=this.eb[i],e=r[0],s=r[1];e&&(delete this.eb[i],this.Dh(n,e,s))}else this.Hh.sendToChildren(hn.TrackingContextResultMessage,t)},t.prototype.jh=function(t,n){var i=et.integer();this.eb[i]=[t,n],this.Gg.sendToParent(hn.TrackingContextRequestMessage,{callbackId:i})},t.prototype.Dh=function(t,n,i){csSetTimeout((function(){var r=qu(t,n);i(r)}))},t}(),Ed=function(t){function n(n,i,r){var e=t.call(this,n)||this;return e.commandsService=n,e.Gg=i,e.Hh=r,e}return J(n,t),n.prototype.init=function(){this.sb=new Sd(this.Gg),this.ub=new bd(this.Gg),this.ob=new Ad(this.Gg,this.Hh),this.kv()},n.prototype.onAfterPageViewCallback=function(t){this.sb.executeRegisteredCallbacks(t)},n.prototype.onIntegrationSessionKeyCallback=function(t){this.ub.executePendingCallbacks(t)},n.prototype.onTrackingContextResultCallback=function(t){this.ob.executePendingCommand(t)},n.prototype.kv=function(){var n=this;t.prototype.registerChildCommands.call(this),this.commandsService.register(Gu,(function(t){n.sb.handleCommand(t)})),this.commandsService.register(zu,(function(t){return n.ub.handleCommand(t)})),this.commandsService.register($u,(function(t,i){n.ob.handleCommand(t,i)}))},n}(wd),Rd=function(){function t(t,n,i,r,e,s,u,o){var c=this;this.nS=t,this.Rc=n,this.j=i,this.Gg=r,this.Wg=e,this.nh=s,this.Rt=u,this.Lw=o,this.jw=function(){c.nh.start(),c.Hw.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,u,o,c,h,a=this;this.Lw.schedule((function(){t=new Ef(B,a.j),n=new qc(t),i=new Ot,c=new Af(i),h=new rf(window.location,c),r=new Dv(a.j,t,n,a.Gg,a.Rt,a.nS,a.nh,new Sh(wn)),a.nS.addListener(r)})),this.Lw.schedule((function(){e=new lh(a.j)})),Rh.isRecordingSupported()&&this.Lw.schedule((function(){var t=new Xv(a.j,i,e,a.Rc,a.Gg,a.Wg,a.nh,a.nS,a.Rt,h);a.Rc.addListener(t),a.nS.addListener(t),t.init()})),this.Lw.schedule((function(){o=new wh(a.j);var n=new Rf(t),i=new Tf(t),r=new Of(t),e=new Nf;u=new of(n,i,r,e),s=new _v(o,u,a.Gg,a.Wg)})),this.Lw.schedule((function(){u.addListener(s),a.nS.addListener(s),a.Rc.addListener(s),a.Rc.addListener(r)})),this.Lw.schedule((function(){var t;if(a.Rt.isInWebViewContext()){var n=new od;a.kS=new ud(n),t=new gd(a.nh,a.Gg,o,a.kS,a.nS,u,a.j)}else t=new Ed(a.nh,a.Gg,o);a.nS.addListener(t),t.init()})),this.Lw.schedule((function(){s.init(),r.init()})),this.Lw.schedule((function(){if(a.Rt.isInWebViewContext()){var t=new Zv,n=new gh(i,h),r=new mh(c),e=new Qv(h,n,r,i),s=new nd(i,new io(i,null,null),t,e,a.kS,a.Rc,r,h),u=new Yv(a.Gg,s);u.init(),a.Rc.addListener(u),a.nS.addListener(u)}else{var o=new Iv(a.Gg);a.Rc.addListener(o)}})),this.Hw=new Hc,this.Lw.schedule((function(){a.Hw.onLoad((function(){a.Rc.emitStartTracking()})),a.jw()}))},t}(),Td=function(t){function n(n,i){void 0===i&&(i=500);var r=t.call(this,2500)||this;return r.nS=n,r.cb=i,r.hb=!1,r.ab=void 0,r.fb=!0,r}return J(n,t),n.prototype.onStart=function(){this.lb()},n.prototype.onStop=function(){this.buffer.reset(),this.wb&&window.clearInterval(this.wb)},n.prototype.sendToParent=function(t,n){var i;if(this.pb())null===(i=this.yb)||void 0===i||i.call(this,t,n);else if(this.mb(t)){var r=this.buildChildBaseMessage(t,n);this.buffer.addMessage(r)}},n.prototype.pb=function(){return this.hb&&this.fb},n.prototype.mb=function(t){return!this.hb||t===hn.Commands},n.prototype.onWebViewEvent=function(t){this.yb=t},n.prototype.setAnalyticsStatus=function(t){this.fb=t,this.fb&&this.gb()},n.prototype.sendAllMessagesFromBuffer=function(){for(var t,n=0,i=this.buffer.getMessages();n<i.length;n++){var r=i[n];null===(t=this.yb)||void 0===t||t.call(this,r.type,r.content)}this.buffer.reset()},n.prototype.gb=function(){var t;if(this.hb){for(var n=0,i=this.buffer.getMessages();n<i.length;n++){var r=i[n];r.type===hn.Commands&&(null===(t=this.yb)||void 0===t||t.call(this,r.type,r.content))}this.buffer.reset()}},n.prototype.buildChildBaseMessage=function(t,n){return{type:t,content:n}},n.prototype.lb=function(){var t=this;this.hb=td.isCSJavascriptBridgeDefined(),this.hb?this.Sb():this.wb=window.setInterval((function(){t.hb=td.isCSJavascriptBridgeDefined(),t.hb&&(t.Sb(),window.clearInterval(t.wb))}),this.cb)},n.prototype.Sb=function(){this.ab=td.getBridgeVersion(),null===this.ab?this.sendAllMessagesFromBuffer():this.ab>=2?(this.bb(),td.notifyIsReadyForTracking()):wn.warn("bridge version ".concat(this.ab," is not supported"))},n.prototype.bb=function(){this.nS.emitStopAnalytics()},n}(kv),Od=function(){function t(){this.Ab=null}return t.prototype.getRecordingStatus=function(){return null===this.Ab?{isRecording:!1}:this.Ab},t.prototype.setRecordingStatus=function(t){this.Ab=t},t}(),Nd=function(t){function n(n,i){var r=t.call(this)||this;return r.ve=n,r.Gg=i,r}return J(n,t),n.prototype.onStart=function(){var t=this;this.ve.subscribe(n.rs,(function(n){return t.Je(n)}))},n.prototype.onStop=function(){this.ve.unsubscribe(n.rs)},n.prototype.Je=function(t){this.isStarted&&this.Gg.sendToParent(hn.ApiError,t)},n.rs="ChildApiErrorsService",n}(Pr),kd=function(t){function n(n,i){var r=t.call(this)||this;return r.ve=n,r.Gg=i,r}return J(n,t),n.prototype.onStart=function(){var t=this;this.ve.subscribe(n.rs,(function(n){return t.Je(n)}),{detailedEvent:!0})},n.prototype.onStop=function(){this.ve.unsubscribe(n.rs)},n.prototype.Je=function(t){this.isStarted&&this.Gg.sendToParent(hn.DetailedApiError,t)},n.rs="ChildDetailedApiErrorsService",n}(Pr),Cd=function(){function t(t,n,i){this.j=t,this.Gg=n,this.Fg=i}return t.prototype.init=function(){var t,n,i=new Ot;n=(null===(t=this.j.apiErrors.collectionRules)||void 0===t?void 0:t.length)?new $h(this.j.apiErrors,i):new Wh(this.j.apiErrors,i),this.ve=new yh(new qh,new Hh,n),this.Eb=new Nd(this.ve,this.Gg),this.Rb=new kd(this.ve,this.Gg),this.ve.init(),this.kv()},t.prototype.kv=function(){this.Fg.register(Oh)},t.prototype.onStartTracking=function(){this.Eb.start()},t.prototype.onParentRecordingStatusChange=function(t){t.isRecording?this.Rb.start():this.Rb.stop()},t.prototype.onOptout=function(){this.Eb.stop(),this.Rb.stop()},t.prototype.onStartAnalytics=function(){this.Eb.start()},t.prototype.onStopAnalytics=function(){this.Eb.stop()},t}(),Id=function(t){function n(n,i){var r=t.call(this)||this;return r.Cv=n,r.Gg=i,r}return J(n,t),n.prototype.onStart=function(){var t=this;this.Cv.subscribe(n.rs,(function(n){return t.Je(n)}))},n.prototype.onStop=function(){this.Cv.unsubscribe(n.rs)},n.prototype.Je=function(t){this.isStarted&&this.Gg.sendToParent(hn.JavascriptError,t)},n.rs="ChildJavaScriptErrorsService",n}(Pr),_d=function(){function t(t,n,i){this.j=t,this.Gg=n,this.Fg=i}return t.prototype.init=function(){var t=new ah;this.Tb=new Id(t,this.Gg),this.kv()},t.prototype.onStartTracking=function(){this.Tb.start()},t.prototype.onOptout=function(){this.Tb.stop()},t.prototype.onStartAnalytics=function(){this.Tb.start()},t.prototype.onStopAnalytics=function(){this.Tb.stop()},t.prototype.kv=function(){this.j.jsCustomErrorsEnabled&&!this.j.customErrors.enabled&&this.Fg.register(Ch)},t}(),Pd=function(){function t(t,n,i){this.j=t,this.Rt=n,this.Lw=i}return t.prototype.init=function(){var t,n,i,r,e,s,u,o,c=this;Zc.isSupported()&&Zc.setDigestSalt(this.j.projectId.toString()),this.Lw.schedule((function(){t=new pa(c.Lw),n=new Ev,i=new Od;var s=[Va.UXA];c.Rt.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(s,Va.WVT),r=new Td(n)):r=new Cv(c.j,t,i,n),e=new Ga(s)})),this.Lw.schedule((function(){s=new Ov(e,r),u=new Tv(s)})),this.Lw.schedule((function(){u.init()})),this.Lw.schedule((function(){c.j.implementations&&((o=new Sv(c.j.implementations,e,c.Lw)).init(),t.addListener(o))})),this.Lw.schedule((function(){if(c.j.apiErrors.enabled){var i=new Cd(c.j,r,s);i.init(),t.addListener(i),n.addListener(i)}if(c.j.jsErrorsEnabled){var e=new _d(c.j,r,s);e.init(),t.addListener(e),n.addListener(e)}})),this.Lw.schedule((function(){t.addListener(u)})),this.Lw.schedule((function(){t.emitInitTracking()})),this.Lw.schedule((function(){new Rd(n,t,c.j,r,i,e,c.Rt,c.Lw).start()}))},t}(),xd=function(){function t(t,n,i){this.j=t,this.Rt=n,this.H=i}return t.prototype.start=function(){var t,n,i,r,e;if(!window.UXAnalytics){window.UXAnalytics={},window.CSCurrentScript=document.currentScript;var s=new Es(!!(null===(t=this.j.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.j.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.j.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new Dn(this.Rt,this.j);u.init();var o=new Un(this.j,u);if(this.Rt.isTopWindowTracker()&&o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&wn.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(e=window.CSProtectnativeFunctionsLogs)||void 0===e?void 0:e.Critical)return void wn.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new bv(this.j,u,this.H,s).init()}else if(!this.Rt.isTopWindowTracker()&&o.canTrackInChild()){new Pd(this.j,this.Rt,s).init()}window.UXAnalytics={Sensitive:{isNodeSensitive:function(t){return gr.isSensitive(t)||gr.isSensitiveChild(t)},isAttributeSensitive:function(t,n){return gr.isSensitiveAttribute(t,n)},getSensitiveAttributes:function(t){return $n(t.attributes,(function(n){return gr.isSensitiveAttribute(t,n.name)}))}}},!window.CSFrameCommunication&&Av.isActivable()&&(window.CSFrameCommunication=Av,Av.waitForConnection())}},X([Pn("main.start"),yn("main.start")],t.prototype,"start",null),t}(),Md=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=ut.warn);var r={message:t,errorCode:n,level:i};td.sendLog(r)},t}();try{var Dd=new ht(window.CS_CONF);window._uxa=window._uxa||[],Dd.processOptionOverrides(window._uxa);var Ld=new at(window,Dd);Ld.init();var Ud=new vn;if(pn=wn,gn=!0,wn.computeIsActive(Dd.validationRate),Ld.isTopWindowTracker()){var jd=new Xt(Dd,Ud);wn.setStrategy(jd)}else if(Ld.isInIframeContext()){var qd=new ln(Dd);wn.setStrategy(qd)}else if(Ld.isInWebViewContext()){var Hd=new Md;wn.setStrategy(Hd)}void 0===ad&&(ad=50),void 0===fd&&(fd=.1),Rn=pn.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Rn&&(An=ad,En=fd),new xd(Dd,Ld,Ud).start()}catch(ki){}}();