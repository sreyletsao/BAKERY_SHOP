(()=>{let e=window.console||{log(){},debug(){}},i=window.JSON||{stringify(){},parse(){}},l=new class{constructor(){this.console=e,this.JSON=i}indexOf(e,i,t){if(null==e)throw TypeError("Array.indexOf called on null or undefined");return e.indexOf?e.indexOf(i,t):this._indexOfPolyfill(e,i,t)}assign(...e){if(Object.assign&&"function"==typeof Object.assign)return Object.assign.apply(null,e);if(null===e[0]||void 0===e[0])throw TypeError("Cannot convert undefined or null to object");return this._assignPolyfill(e)}startsWith(e,i,t){var t=0<t?0|t:0;return e.substring(t,t+i.length)===i}includes(e,i){if(e instanceof RegExp)throw TypeError("First argument must not be a RegExp");return-1!==this.indexOf(e,i=void 0===i?0:i)}keys(e){if(Object.keys)return Object.keys(e);if("function"==typeof e||"object"==typeof e&&null!==e)return this._keysPolyfill(e);throw TypeError("Object.keys called on non-object")}_indexOfPolyfill(e,i,t){let n=e.length>>>0,a=Math.min(0|t,n);if(a<0)a=Math.max(0,n+a);else if(a>=n)return-1;if(void 0===i){for(;a!==n;++a)if(void 0===e[a]&&a in e)return a}else if(i!=i){for(;a!==n;++a)if(e[a]!=e[a])return a}else for(;a!==n;++a)if(e[a]===i)return a;return-1}_assignPolyfill(i){var t=Object(i[0]);for(let e=1;e<i.length;e++){var n=i[e];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}_keysPolyfill(e){let i,t;var{hasOwnProperty:n}=Object.prototype,a=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=o.length,r=[];for(i in e)n.call(e,i)&&r.push(i);if(a)for(t=0;t<s;t++)n.call(e,o[t])&&r.push(o[t]);return r}};class c{static{this.PROTOCOL="https://"}static{this.URL_COMPANY_TARGET_DOMAIN="company-target.com"}static{this.QS_USE_TEST_DOMAIN="db_useTestDomain"}static{this.QS_QUERY_DOMAIN="db_domain"}static{this.QS_ENABLE_LOG="db_logging"}static{this.QS_PREVIEW_TOKEN="db_preview_token"}static{this.DFLT_NON_COMPANY="(Non-Company Visitor)"}static{this.DFLT_AW_EMPTY="(AccountWatch Empty)"}static{this.DFLT_NON_AW="(Non-AccountWatch Visitor)"}static{this.DFLT_EVENT_TYPE="click"}static{this.URL_IP_API=`api.${this.URL_COMPANY_TARGET_DOMAIN}/api/v3/ip.json`}static{this.URL_DOMAIN_API="api.company-target.com/api/v3/domain.json"}static get URL_BW_AD_PIXEL(){return window.Demandbase.Config.tokens?.URL_BW_AD_PIXEL||"match.prod.bidr.io/cookie-sync/demandbase"}static get URL_LR_AD_PIXEL(){return window.Demandbase.Config.tokens?.URL_LR_AD_PIXEL||"id.rlcdn.com/464526.gif"}static get URL_SMART_PIXEL(){return window.Demandbase.Config.ads?.smarPixelURL||`https://s.${this.URL_COMPANY_TARGET_DOMAIN}/s/sync`}static{this.MODIFICATION_ERROR="SCModificationError"}static{this.PARDOT_VISITOR_COOKIE_REGEX=/^visitor_id[\d]+$/}static{this.NON_HUMAN_DEVICES=[/adsbot-google/i,/googlebot/i]}static{let e;this.URL_CURRENT=(e=document.URL,window.Demandbase?.Config?.isInIFrame&&(e=document.referrer),e=encodeURIComponent(e))}static{this.URL_EVENT_API="et."+this.URL_COMPANY_TARGET_DOMAIN}static{this.EVENT_TYPES={EXPERIENCE_FIRED:"experience_fired",EXPERIENCE_CLICKED:"experience_clicked"}}}let s=new class{buildApiParamString(e){let i={referrer:document.referrer,page:document.URL,page_title:document.title};if(window.Demandbase.Config.isInIFrame)try{i.page=window.top.document.URL,i.referrer=window.top.document.referrer,i.page_title=window.top.document.title}catch(e){i.page=document.referrer,i.referrer=null,i.page_title="3rd Party iFrame"}return i=l.assign(i,e),this.buildQueryString(i)}buildApiUrl(e,i){return(e||c.URL_IP_API)+this.buildApiParamString(i||{})}buildQueryString(e,i=!0){let t="?";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+=`${n}=${i?encodeURIComponent(e[n]):e[n]}&`);return t.substring(0,t.length-1)}};class t{constructor(e){this.DEFAULT_CONFIGURATION={},this.configuration={},this._setup=()=>(this.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase?.Config?.[this.constructor.name]),this),this._setup()}isEnabled(){return this.configuration.enabled||!1}mergeConfigs(...i){for(let e=0;e<i.length;e++)this.configuration=l.assign(this.configuration,i[e])}initialize(){this._setup()}}class n{getCookiesByRegex(t,e){let n={};return e.cookie.split(";").forEach(e=>{var e=e.split("="),i=e[0].trim();t.test(i)&&1<e.length&&(n[i]=e[1].trim())}),n}getElementByIdOrName(e){return document.getElementById(e)||document.getElementsByName(e)[0]||null}addEventListener(e,i,t){e.addEventListener?e.addEventListener(i,t):e.attachEvent&&e.attachEvent(i,t)}dig(e,...i){let t=e;for(var n of i){if(void 0===t)return;t="function"==typeof n?n(t):t[n]}return t}set(e,n,i){return Object(e)===e&&((n=Array.isArray(n)?n:n.toString().match(/[^.[\]]+/g)||[]).slice(0,-1).reduce((e,i,t)=>Object(e[i])===e[i]?e[i]:e[i]=Math.abs(n[t+1])>>0==+n[t+1]?[]:{},e)[n[n.length-1]]=i),e}flatten(e){if(e&&"object"==typeof e)for(var i in e){var t=e[i];if("object"==typeof t&&null!==t&&e.hasOwnProperty(i)){for(var n in t)e[i+"_"+n]=t[n];delete e[i]}}return e}getAttributeValue(e,i){if(!1===e[i])return"false";let t=window.Demandbase.Config.nonCompanyDefault||c.DFLT_NON_COMPANY,n=window.Demandbase.Config.emptyWatchDefault||c.DFLT_AW_EMPTY,a={city:"registry_city",state:"registry_state",zip:"registry_zip_code",country:"registry_country_code",country_name:"registry_country",latitude:"registry_latitude",longitude:"registry_longitude"}[i]||"",o=e[i]||e[a]||this.dig(e,"custom_fields",i)||t,s=(e.company_name||t)!==t,r=l.keys(e),d=!1;for(let e=0;e<r.length;e++)if(0===l.indexOf(r[e],"watch_list_")){d=!0;break}return-1!==l.indexOf(i,"watch_list_")&&s&&(d||(n=window.Demandbase.Config.nonWatchDefault||c.DFLT_NON_AW),o=e[i]||n),o}getQueryParam(e,i){var i,t={},i=(i=i||window||{location:{search:"",hash:""}}).location.search.substring(1)||i.location.hash&&i.location.hash.split("?")[1];if(!i)return"";var n=i.split("&");for(let e=0;e<n.length;e++){var a=n[e].split("="),o=a[0],a=a[1];t[o]=a}return t[e]||""}insertScript(e,i,t="https://"){if(e&&(window.Demandbase._loadedScripts=window.Demandbase._loadedScripts||{},!window.Demandbase._loadedScripts[e])){window.Demandbase._loadedScripts[e]=!0;var n=document.createElement("script"),a=document.getElementsByTagName("script")[0];n.async=!0,n.id=i||"",n.src=""+t+e.replace(/(^\/\/)|(^http:\/\/)|(^https:\/\/)/,""),a&&a.parentNode&&a.parentNode.insertBefore(n,a)}}isOldBrowserOrUserAgentUnavailable(){try{return 0<l.indexOf(window.navigator.userAgent,"MSIE ")}catch(e){return!0}}b64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,i){return String.fromCharCode(parseInt("0x"+i,16))}))}generateDeprecationMessage(e,i){return e+" has been deprecated since version "+i}getFirstNonEmptyObject(...e){for(var i of e)if(i&&0<Object.keys(i).length)return i;return null}}let d=new n,g=new class{constructor(){this.logging=!1,this.debug=!1,this.logging=window.Demandbase&&window.Demandbase.Config&&window.Demandbase.Config.logging}alert(e){this.log(e)}log(e){!this.logging&&"true"!==d.getQueryParam(c.QS_ENABLE_LOG)||l.console.log("DB: "+e)}};class a{static{this.FIREFOX_SAFARI_STACK_REGEXP=/(^|@)\S+\:\d+/}static{this.CHROME_IE_STACK_REGEXP=/^\s*at .*(\S+\:\d+|\(native\))/m}static{this.SAFARI_NATIVE_CODE_REGEXP=/^(eval@)?(\[native code\])?$/}parse(e){return void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(a.CHROME_IE_STACK_REGEXP)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):void 0}extractLocation(e){var e;return-1===l.indexOf(e,":")?[e]:[(e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,"")))[1],e[2]||void 0,e[3]||void 0]}_parseInt(e,i=10){if(e)return parseInt(e,i)}parseV8OrIE(e){return e.stack.split("\n").filter(function(e){return!!e.match(a.CHROME_IE_STACK_REGEXP)},this).map(function(e){var e=(e=-1<l.indexOf(e,"(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),i=this.extractLocation(e.pop());return{function:e.join(" ")||void 0,file:-1<l.indexOf(["eval","<anonymous>"],i[0])?void 0:i[0],line:this._parseInt(i[1]),column:this._parseInt(i[2])}},this)}parseFFOrSafari(e){return e.stack.split("\n").filter(function(e){return!e.match(a.SAFARI_NATIVE_CODE_REGEXP)},this).map(function(e){var e,i;return(-1<l.indexOf(e," > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===l.indexOf(e,"@")&&-1===l.indexOf(e,":"))?{function:e}:(e=e.split("@"),i=this.extractLocation(e.pop()),{function:e.join("@")||void 0,file:i[0],line:this._parseInt(i[1]),column:this._parseInt(i[2])})},this)}parseOpera(e){return!e.stacktrace||-1<l.indexOf(e.message,"\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)}parseOpera9(e){var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),a=[];for(let e=2,i=n.length;e<i;e+=2){var o=t.exec(n[e]);o&&a.push({file:o[2],line:this._parseInt(o[1])})}return a}parseOpera10(e){var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),a=[];for(let e=0,i=n.length;e<i;e+=2){var o=t.exec(n[e]);o&&a.push({function:o[3]||void 0,file:o[2],line:this._parseInt(o[1])})}return a}parseOpera11(e){return e.stack.split("\n").filter(function(e){return!!e.match(a.FIREFOX_SAFARI_STACK_REGEXP)&&!e.match(/^Error created at/)},this).map(function(e){let i;var e=e.split("@"),t=this.extractLocation(e.pop()),e=e.shift()||"",n=e.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;return void 0!==(i=e.match(/\(([^\)]*)\)/)?e.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"):i)&&"[arguments not available]"!==i&&i.split(","),{function:n,file:t[0],line:this._parseInt(t[1]),column:this._parseInt(t[2])}},this)}}let o=new a;class r extends t{constructor(e){super(e),this.VERSION="0.0.0",this.PROJECT_ID="141580",this.PROJECT_KEY="9a0a3519e930259f5886a7af53b0ccaa",this.SENTRY_PROJECT_ID="1190150",this.SENTRY_PUBLIC_KEY="3c9d467f8a9d4295b0f8320ae852091d",this.DEFAULT_CONFIGURATION={environment:"production",ignorableErrors:[]},this.configuration={},this.additionalErrorDetails={},this._setup=()=>(super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase?.Config?.ErrorReporter),this),this._setup()}initialize(){super.initialize()}getNewRequest(){let e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}send(e,i={}){if(!(-1<l.indexOf(this.configuration.ignorableErrors,e.name)||-1<l.indexOf(this.configuration.ignorableErrors,e.message))){var t=this.getNewRequest(),n=`https://sentry.io/api/${this.SENTRY_PROJECT_ID}/store/?sentry_version=7&sentry_key=`+this.SENTRY_PUBLIC_KEY;try{t.open("POST",n,!0),t.setRequestHeader("Content-type","text/plain;charset=UTF-8"),t.send(this.formatMessage(e,!0,i))}catch(e){}}}wrap(i){if("function"!=typeof i)throw Error("Invalid Function: "+i);return(...e)=>{try{if(void 0!==i&&"function"==typeof i.apply)return i.apply(this,e)}catch(e){this.send(e),g.alert(`Error: ${e}
`+e.stack)}}}formatMessage(e,i=!1,t){var e=this.parseError(e),n=this.parseContext(),a=this.parseEnviroment(),o=this.parseSession(),s=this.parseParams(),{additionalErrorDetails:r}=this,i;return i?(i=this.formatErrorForSentry(e),l.JSON.stringify({logger:n.notifier.name,platform:"javascript",release:n.version,environment:n.environment,request:{url:n.url},contexts:{browser:{userAgent:n.userAgent}},tags:{clientId:a.config.clientId},extra:l.assign({},{readyState:n.readyState,config:a.config,companyProfile:o,additionalErrorDetails:r},t),exception:{values:[i]}})):l.JSON.stringify({errors:[e],context:n,environment:a,session:o,params:s})}formatErrorForSentry(e){var i=[],t;for(t of e.backtrace)i.push({function:t.function,filename:t.file,lineno:t.line,colno:t.column});return{type:e.type,value:e.message,stacktrace:{frames:i}}}parseError(e){return{type:e.name,message:e.message,backtrace:o.parse(e)}}parseContext(){return{notifier:{name:"ErrorReporterModule",version:this.VERSION},environment:this.configuration.environment,version:window.Demandbase.version,url:window.location.href,userAgent:navigator.userAgent,rootDirectory:window.location.origin,readyState:document.readyState}}parseEnviroment(){return{config:d.dig(window.Demandbase,"Config")}}parseSession(){return{companyProfile:d.dig(window.Demandbase,"IP","CompanyProfile")}}parseParams(){return{}}}let m=new r,u=new class{callback(t){if(t||"object"==typeof t)for(let i=0;i<this.callbackStack.length;i++){let e=this.callbackStack[i];m.wrap(()=>{e&&"function"==typeof e&&e.call(window.Demandbase,t)})()}else g.log("Data is falsy, not invoking callbacks: "+t)}domScriptCallback(e){e&&"object"==typeof e?(window.Demandbase.IpApi.CompanyProfile=d.flatten(e),this.callback(e)):g.log("domScriptCallback(): Data is falsy, not invoking callbacks: "+e)}registerCallback(e){return e&&"function"==typeof e&&-1===l.indexOf(this.callbackStack,e)?(this.callbackStack.push(e),window.Demandbase.IpApi&&window.Demandbase.IpApi.CompanyProfile&&m.wrap(()=>{e.call(window.Demandbase,window.Demandbase.IpApi.CompanyProfile)})(),!0):(g.log("registerCallback(): callback is not a valid function or is already a part of the callbacks: "+e),!1)}constructor(){this.callbackStack=[]}};var w=new class{add(e){let i=!0;if(!this.isValid(e))return g.log("Event not added."),!1;var t=e.type||c.DFLT_EVENT_TYPE,{elements:n}=e,a=n.constructor,o;if(a!==HTMLCollection&&a!==NodeList)return this._attachListener(e.elements,t,e.listener);for(o in n)n.hasOwnProperty(o)&&!this._attachListener(n[o],t,e.listener)&&(i=!1,g.log("Event not added to"+n[o]));return i}_attachListener(e,i,t){return e?(e.jquery&&(e=e[0]),d.addEventListener(e,i,t),g.log(`Event Listener bind to: ${e} on event `+i),!0):(g.log("Event not registered - invalid element/s."),null)}isValid(i){let e=!1,t=["elements","listener"],n=i.elements||null,a=i.listener||null;for(let e=0;e<t.length;e++)if(void 0===i[t[e]]||!i[t[e]])return g.log("Invalid Event object. Missing: "+t[e]),!1;return"function"!=typeof a?(g.log(`Invalid Event: "listener" must be a function. Got (${a})`),!1):(n instanceof Node||n instanceof NodeList||n instanceof HTMLElement||n instanceof HTMLCollection||n instanceof Window||n instanceof Document||"function"==typeof n||void 0!==window.Demandbase.jQuery&&n instanceof window.Demandbase.jQuery?e=!0:g.log(`Invalid Event:  element: ${n} has type: "${n.constructor}" which is not proper instance type.`),e)}};let p=new class extends n{detectIFrame(){return window.top!==window.self}getDocumentReadyState(){return document.readyState}isCookieEnabled(){try{return window.navigator.cookieEnabled&&(document.cookie="COOKIE_TEST=TEST",-1!==l.indexOf(document.cookie,"COOKIE_TEST=TEST"))?(document.cookie="COOKIE_TEST=PASSED_TEST",!0):!1}catch(e){return!1}}getCurrentUrl(e){let i=document.location.href;return window.Demandbase.Config.isInIFrame&&(i=document.referrer),i=e?e:i}isCurrentPage(e,i){let{hash:t}=document.location,{search:n}=document.location,a=this.getCurrentUrl(i);if(i){let e=l.indexOf(i,"#");-1===e&&(e=i.length),t=i.substring(l.indexOf(i,"#"),i.length),n=i.substring(l.indexOf(i,"?"),e),a=i}function o(e){return 0===l.indexOf(e,"//")?e.substring(2,e.length):e.replace(/^.*?:\/\//g,"")}function s(e){return e.replace(/^(www\.)/g,"")}function r(e){return(-1!==l.indexOf(e,"#",e.length-1)&&(e=e.substring(0,e.length-1)),-1!==l.indexOf(e,"/",e.length-1)&&(e=e.substring(0,e.length-1),-1!==l.indexOf(e,"/",e.length-1)))?r(e):e}e=r(e=s(e=o(e))),a=r(a=s(a=o(a))),-1===l.indexOf(e,"#")&&-1!==l.indexOf(a,"#")&&(a=a.substring(0,a.length-t.length));var i=(a=r(a=-1===l.indexOf(e,"?")&&-1!==l.indexOf(a,"?")?a.substring(0,a.length-n.length):a))===e;return g.log("utilities.isCurrentPage(): Page check resulted in: "+i),i}isCurrentPageRegex(e,i){var t,i;return!(!e||e.length<=0)&&(i=("$"!==(e="^"!==e[0]?"^"+e:e)[e.length-1]&&(e+="$"),this.getCurrentUrl(i)),new RegExp(e).test(i))}isStorageEnabled(e){try{var i=window[e.toString()];return i.setItem("STORAGE_CHECK","STORAGE_CHECK"),i.getItem("STORAGE_CHECK"),i.removeItem("STORAGE_CHECK"),!0}catch(e){return!1}}jqid(e){return e?"#"+e.replace(/(:|\.|\[|\]|,|\s)/g,"\\$1"):null}includesAny(i,t){for(let e=0;e<t.length;e++)if(this.includes(i,t[e]))return!0;return!1}isValidEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&")}nodeListToArray(i){var t=[];for(let e=0;e<i.length;e++)t.push(i[e]);return t}includes(e,i){return!(!i||i.length>e.length||-1===l.indexOf(e,i))}generateUuid(){try{return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>+e/4).toString(16))}catch(e){return console.error("Failed to generate UUID:",e),"id-"+Date.now()+"-"+Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)}}getApiAuthToken(){return this.dig(window.Demandbase,"Config","key")||this.dig(window.Demandbase,"Config","analytics","key")||this.dig(window.Demandbase,"Config","ads","key")||this.dig(window.Demandbase,"Config","forms","key")||this.DEFAULT_NO_TOKEN_VALUE}setHttpsProtocol(e){return e.replace(/^([^:]+:\/\/)?/,c.PROTOCOL)}constructor(...e){super(...e),this.DEFAULT_NO_TOKEN_VALUE="ERR_NO_AUTH_KEY"}};class h{static{this.key=p.getApiAuthToken()}static{this.CompanyProfile={}}static get domainAPIUrl(){var e=d.dig(window.Demandbase,"Config","domainAPI","url")||d.dig(window.Demandbase,"Config","general","domainAPI","url")||c.URL_DOMAIN_API;return p.setHttpsProtocol(e)}static{this.useTestValue="true"===d.getQueryParam(c.QS_USE_TEST_DOMAIN)||window.Demandbase?.Config?.useTestDomain||!1}static{this.testValue=d.getQueryParam(c.QS_QUERY_DOMAIN)||window.Demandbase?.Config?.testDomain||"No Test Domain Set"}static _callback(e){e.domain||e.person?(e=e.domain||e.person,d.flatten(e),this.CompanyProfile=e):g.log("Demandbase.Domain: No company profile available for domain: "+this.getDomain())}static load(){if("function"==typeof window.Demandbase.Config.getDomain){let e;void 0!==this.key&&this.key!==p.DEFAULT_NO_TOKEN_VALUE||(this.key=p.getApiAuthToken());var i="",t={},i=this.useTestValue?this.testValue:this.getDomain(),t={key:this.key,callback:"Demandbase.Domain._callback",query:i,src:"tag"};g.log("Calling Domain API at: "+this.domainAPIUrl),window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP"));try{e.open("POST",this.domainAPIUrl),void 0!==e.withCredentials&&(e.withCredentials=!0),e.send(JSON.stringify(t))}catch(e){throw g.log("IP API Request Blocked"),e}d.insertScript(s.buildApiUrl(this.domainAPIUrl,t),"db_domain_api")}else g.log("Domain API query cancelled - check auth key or Config.getDomain")}static getDomain(){return this.useTestValue?this.testValue:"function"==typeof window.Demandbase.Config.getDomain?window.Demandbase.Config.getDomain.call(window.Demandbase.Config):(g.log("Warning: Config.getDomain fcn not defined."),"getDomain function is not defined")}}var f=class extends t{constructor(e){super(e),this.ADVERTISING_PIXEL_ID="ad",this.CONVERSION_PIXEL_ID="cn",this.RETARGETING_PIXEL_ID="rt",this.SMART_PIXEL_ID="db-sync",this.PIXEL_ID_IX="ix",this.PIXEL_ID_MCTV="mctv",this.PIXEL_ID_MAGNITE_DV="rp",this.PIXEL_ID_LR="lr",this.DEFAULT_CONFIGURATION={enabled:!0,key:void 0,reportingOnly:!1,enableBW:!1,enableLR:!0,enableIX:!0,enableMCTV:!0,enableRP:!0,enableSmartPixel:!0},this.configuration={},this.trackConversion=this.trackConversionListener,this.load=this.initialize,this.loadPixels=this.insertPixels,this._loadPixel=this.insertPixel,this._setCampaign=this.loadCampaign,this._setEvents=this.registerEvents,this._setup=()=>(super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase.Config.Advertising),super.mergeConfigs(e||window.Demandbase.Config.ads),this),this._setup()}initialize(){super.initialize(),this.insertPixels(),!0===this.configuration.reportingOnly&&this.configuration.key&&this.configuration.key!==window.Demandbase.Config.key&&window.Demandbase.IpApiReportingOnly.get(this.configuration.key,!1)}isConversionPage(){throw Error(d.generateDeprecationMessage("AdvertisingModule.isConversionPage","8.0.0"))}insertPixels(){this.configuration.enableSmartPixel&&this.insertSmartPixel(),this.configuration.enableBW&&g.log("BW pixel is deprecated and will not load."),this.configuration.enableLR&&(g.log("LR pixel enabled"),this.insertLRPixel(this.ADVERTISING_PIXEL_ID))}createAndAppendPixel(e,i){var t=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0],n=document.createElement("img");n.style.cssText="display: none;",n.setAttribute("alt",""),n.setAttribute("aria-hidden","true"),n.setAttribute("width","0"),n.setAttribute("height","0"),n.id=e,n.src=i,t.appendChild(n)}createAndAppendIFrame(e,i){var t=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0],n=document.createElement("iframe");return n.style.cssText="display: none; border: 0px;",n.setAttribute("alt",""),n.setAttribute("aria-hidden","true"),n.setAttribute("width","0"),n.setAttribute("height","0"),n.setAttribute("sandbox",""),n.id=e,n.src=i,t.appendChild(n),n}insertSmartPixel(){g.log("insertSmartPixel(): Smart pixel loading");var e=this.buildSmartPixelParameters(),e=c.URL_SMART_PIXEL+"?"+e;return this.createAndAppendIFrame(this.SMART_PIXEL_ID,e)}buildSmartPixelParameters(){var e=[];e.push(this.PIXEL_ID_LR),this.configuration.enableIX||e.push(this.PIXEL_ID_IX),this.configuration.enableMCTV||e.push(this.PIXEL_ID_MCTV),this.configuration.enableRP||e.push(this.PIXEL_ID_MAGNITE_DV);let i="";return i=0<e.length?"exc="+e.join(","):i}insertLRPixel(e){var e="db_lr_pixel_"+e,i=c.PROTOCOL+c.URL_LR_AD_PIXEL;this.createAndAppendPixel(e,i)}insertPixel(e){throw Error(d.generateDeprecationMessage("AdvertisingModule.insertPixel","8.0.0"))}loadCampaign(){throw Error(d.generateDeprecationMessage("AdvertisingModule.loadCampaign","8.0.0"))}registerEvents(){throw Error(d.generateDeprecationMessage("AdvertisingModule.registerEvents","8.0.0"))}trackConversionListener(){throw Error(d.generateDeprecationMessage("AdvertisingModule.trackConversionListener","8.0.0"))}virtualPageViewListener(){throw Error(d.generateDeprecationMessage("AdvertisingModule.virtualPageViewListener","8.0.0"))}};class b extends t{get API_ENDPOINT(){return p.setHttpsProtocol(d.dig(window.Demandbase,"Config","Event","server")||c.URL_EVENT_API)}get EVENTS_ENDPOINT(){return this.API_ENDPOINT+"/events/"}constructor(e){super(e),this.DEFAULT_CONFIGURATION={enabled:!1},this.initialized=!1,this.configuration={},this._setup=()=>(this.token=p.getApiAuthToken(),l.assign(this.configuration,d.dig(window.Demandbase,"Config","Event"),e),this),this._setup()}initialize(){try{super.initialize(),this.initialized=!0}catch(e){this.initialized=!1,m.send(e)}}createRequest(){let e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}async sendEvent(e,i){if(this.configuration.enabled){this.initialized||this.initialize();var t=this.createRequest(),i={amazon_request_id:d.dig(window.Demandbase,"Config","IpApiModule","cloudFrontRequestId")||"",domain:d.dig(window.Demandbase,"IpApi","CompanyProfile","web_site")||"",token:this.token,type:e,uuid:p.generateUuid(),extra:{xp_id:i}};try{t.open("POST",this.EVENTS_ENDPOINT),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("Tag-Version",d.dig(window.Demandbase,"version")),void 0!==t.withCredentials&&(t.withCredentials=!0),t.send(JSON.stringify(i)),g.log("Event API Post Request Succeeded")}catch(e){throw g.log("Event API Post Request Failed"),e}}else g.log("Event delivery is disabled in the tag config. The event will not be sent.")}}new b;class D extends t{constructor(e){super(e),this.DEFAULT_CONFIGURATION={enabled:!0,events:null,fieldMap:null,googleAnalyticsClassicScope:2,trackerName:null,trackerId:null,polling:null,eventName:"Demandbase_Event"},this.configuration=l.assign({},this.DEFAULT_CONFIGURATION),this.cachedEvents=[],this.pollCount=0,this.gType="",this._cEvent=this.sendEvent,this._setup=()=>(super.mergeConfigs(e||window.Demandbase.Config.Google_Analytics),super.mergeConfigs(e||window.Demandbase.Config.analytics),this),this._setup()}initialize(){super.initialize(),this._detectG(),this._setTrackerName(),this.configuration.polling&&this.configuration.polling.enabled&&this._waitForGATrackers(),this.configuration.fieldMap&&"{}"!==l.JSON.stringify(this.configuration.fieldMap)&&window.Demandbase.Callbacks.registerCallback(this.callback.bind(this)),this._setEvents()}sendEvent(e,i,t){this.configuration.polling&&this.configuration.polling.enabled&&!this.configuration.polling.hasBeenInitialized?(this.cachedEvents.push({category:e,action:i,label:t}),g.log(`Cache Custom Event:UA: ${e}/${i}/`+t)):("ga"===this.gType?this._trackEvent(e,i,t):window.ga&&"function"==typeof window.ga?window.ga(()=>{this._sendEvent(e,i,t)}):g.log(`sendEvent(): window.ga is not defined or not a function. Failed to send Custom UA Event:${e}/${i}/`+t),g.log(`sendEvent(): Sent Custom UA Event:${e}/${i}/`+t))}_waitForGATrackers(){this.configuration.polling.hasBeenInitialized=!1,(window.ga&&window.ga.getAll&&0<window.ga.getAll().length||window.dataLayer)&&!this.configuration.polling.hasBeenInitialized?(g.log("Loaded with polling count:"+this.pollCount),this._sendCachedEventsWhenPollingEnd()):this.pollCount>this.configuration.polling.maxCount||this.configuration.polling.hasBeenInitialized?(this._sendCachedEventsWhenPollingEnd(),g.log("From base-google-analytics: GA is giving up on polling with count: "+this.pollCount)):(g.log("From base-google-analytics: Polling one more time: Count: "+this.pollCount),this.pollCount++,setTimeout(this._waitForGATrackers.bind(this),this.configuration.polling.interval))}_sendCachedEventsWhenPollingEnd(){this.configuration.polling.hasBeenInitialized=!0,g.log(`_sendCachedEventsWhenPollingEnd(): sending ${this.cachedEvents.length} cached events to GA`),this.cachedEvents.forEach(({gaType:e,category:i,action:t,label:n,eventName:a,payload:o})=>{"ga4"===e&&a&&o?this.sendEventGA4(a,o):this.sendEvent(i,t,n)}),this.cachedEvents=[],this.pollCount=0}_setTrackerName(){if(!this.configuration.trackerName){var e="function"==typeof window.ga;if(void 0!==window._gat&&"function"==typeof window._gat._getTrackers){var i=_gat._getTrackers();if(void 0!==i.length&&0<i.length){if(this.configuration.trackerId)for(let e=0;e<i.length;e++)if(0<i[e]._getName().length){var t=i[e]._getName();if(i[e]._getAccount()===this.configuration.trackerId&&!this.configuration.trackerName){return this.configuration.trackerName=t,void 0}}var n=i[0]||null;if(n&&"function"==typeof n._getName){var n=n._getName()||null;this.configuration.trackerName||(this.configuration.trackerName=n)}}}e&&window.ga(()=>{var i="function"==typeof window.ga.getAll&&window.ga.getAll()||[];if(this.configuration.trackerId)for(let e=0;e<i.length;e++){var t=i[e],n=t.get("name");if(t.get("trackingId")===this.configuration.trackerId){return this.configuration.trackerName=n,void 0}}if(void 0!==i.length&&0<i.length){var e=i[0]||null;if(e&&"function"==typeof e.get){var e=e.get("name")||null;this.configuration.trackerName=e}}})}}isGA4(){var e=this.configuration.trackerId||"";return"ga4"===this.gType||"string"==typeof e&&l.startsWith(e,"G-",0)||!1}getCachedEvents(){return this.cachedEvents}sendEventGA4(e,i){this.configuration.polling&&this.configuration.polling.enabled&&!this.configuration.polling.hasBeenInitialized&&!window.dataLayer?(this.cachedEvents.push({gaType:"ga4",eventName:e,payload:i}),g.log(`sendEventGA4(): Cached Custom Event: eventName: ${e} with payload: `+JSON.stringify(i))):window.dataLayer?(this.configuration.trackerId&&(i.send_to=this.configuration.trackerId),this.dbgtag("event",e,i),g.log(`sendEventGA4(): Successfully pushed event: eventName: ${e} with payload: `+JSON.stringify(i))):g.log(`sendEventGA4(): Datalayer was not defined, not sending eventName: ${e} with payload: `+JSON.stringify(i))}dbgtag(){window.dataLayer.push(arguments)}callback(e){try{if(!e)throw Error("Error - no data passed to callback");var i=window.Demandbase.Connectors.Google_Analytics,t=(i._detectG(),i._setTrackerName(),{}),n;for(n in i.configuration.fieldMap)if(i.configuration.fieldMap.hasOwnProperty(n)){var a=+n,o=i.configuration.fieldMap[n],s=d.getAttributeValue(e,o);t[n]=s,i._var(a,o,s.toString())}if(i.isGA4()){var r=i.configuration.eventName||"Demandbase IP API Resolution";i.sendEventGA4(r,t)}else i.sendEvent("Demandbase","API Resolution","IP API")}catch(e){g.log(`GA Error: ${e}
`+e.stack),window.Demandbase.Connectors.Google_Analytics.isGA4()?window.Demandbase.Connectors.Google_Analytics.sendEventGA4("Demandbase IP API Callback Error",{}):window.Demandbase.Connectors.Google_Analytics.sendEvent("Demandbase","API Resolution","Callback Error")}}_detectG(){window._gaq?(this.gType="ga",_gaq.push(["_addDevId","NE7T9"])):this.gType=null,this._setGaObject();try{window.ga(()=>{window.Demandbase.Connectors.Google_Analytics.gType="ua"})}catch(e){window.Demandbase.Connectors.Google_Analytics.gType="ua"}this.isGA4()&&(this.gType="ga4"),g.log("Detected Google version: "+this.gType)}_sendEvent(e,i,t){if(window.ga&&"function"==typeof window.ga){var n=this.configuration.trackerName?this.configuration.trackerName+".send":"send",e={eventCategory:e,eventAction:i,eventLabel:t,nonInteraction:!0};g.log(`_sendEvent(): ${n}, "event", with payload: `+JSON.stringify(e)),window.ga(n,"event",e)}else g.log("_sendEvent(): ga is not defined or not a function: "+window.ga)}_setCustomDimension(e,i){if(window.ga&&"function"==typeof window.ga){var t=this.configuration.trackerName?this.configuration.trackerName+".set":"set";g.log(`_setCustomDimension(): command=${t} index=${e} value=`+i),window.ga(t,"dimension"+e,i)}else g.log("_setCustomDimension(): ga is not defined or not a function: "+window.ga)}_setCustomVariable(e,i,t){var n=this.configuration.trackerName?this.configuration.trackerName+"._setCustomVar":"_setCustomVar",a=this.configuration.googleAnalyticsClassicScope||2;g.log(`_setCustomVariable(): command=${n} index=${e} scope=${a} name=${i} value=`+t),window._gaq.push([n,e>>0,i,t,a])}_setEvents(){var e=this.configuration.events||[];if(e)for(var i in e)if(e.hasOwnProperty(i)){var i=e[i];if(i.data){var t=i.data.category||"",n=i.data.action||"",a=i.data.label||"";void 0===i.listener&&t&&n&&a?i.listener=function(){window.Demandbase.Connectors.Google_Analytics.sendEvent(t,n,a),g.log("Event listener ran")}:t&&n&&a||g.log("Need to define a custom listener function or set data with category/action/label")}w.add(i)}}_setGaObject(){void 0===window.ga&&(window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=+new Date)}_trackEvent(e,i,t){var n=this.configuration.trackerName?this.configuration.trackerName+"._trackEvent":"_trackEvent";g.log(`_trackEvent(): command=${n} category=${e} action=${i} label=`+t),window._gaq.push([n,e,i,t,0,1])}_var(e,i,t){"ga"===this.gType?this._setCustomVariable(e,i,t):window.ga&&"function"==typeof window.ga?window.ga(()=>{window.Demandbase.Connectors.Google_Analytics._setCustomDimension(e,t)}):g.log("_var(): Failure to set GA var. GA is not defined or not a function: "+window.ga),g.log(e+` ${i} : `+t)}}class E extends D{getTrackerInfo(){let i=[],t=[];return void 0!==window._gaq&&void 0!==window._gat&&"function"==typeof window._gat._getTrackers&&window._gat._getTrackers().forEach(function(e){0<e._getName().length&&i.push({type:"classic",trackerId:e._getAccount(),name:e._getName()})}),void 0!==window.ga&&void 0!==window.ga.getAll&&window.ga.getAll().forEach(function(e){t.push({type:"universal",trackerId:e.get("trackingId"),name:e.get("name")})}),t.concat(i)}}class _ extends t{constructor(e){super(e),this.DEFAULT_CONFIGURATION={enabled:!0,assetList:["api.demandbase.com/autocomplete/widget.js","api.demandbase.com/autocomplete/widget.min.js","autocomplete.demandbase.com/autocomplete/widget.js","autocomplete.demandbase.com/autocomplete/widget.min.js","scripts.demandbase.com/formWidget.js","scripts.demandbase.com/formWidgetDebug.js","scripts.demandbase.com/demandbase-sdk.js","scripts.demandbase.com/demandbase-sdk-debug.js","scripts.demandbase.com/forms.js","scripts.demandbase.com/forms.min.js"]},this.ERROR_MESSAGE_PREFIX="Legacy Asset Detected: ",this.configuration={},this.values={},this._setup=()=>(super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase.Config.AssetReporter),this),this._setup()}initialize(){super.initialize(),"complete"===p.getDocumentReadyState()?this.read():d.addEventListener(window,"load",m.wrap(this.read.bind(this)))}read(){var i=this.configuration.assetList.length;for(let e=0;e<i;e++){var t=this.configuration.assetList[e];document.querySelector(`script[src='${c.PROTOCOL}${t}']`)?(this.values[t]=!0,this.send(t)):this.values[t]=!1}}send(e){var e=Error(this.ERROR_MESSAGE_PREFIX+e);m.send(e)}}class y extends t{constructor(e){super(e),this.TEST_MODE_ENABLED="db_useTestIp",this.TEST_MODE_VALUE="db_ip",this.API_VERSION="v2"===d.dig(window.Demandbase,"Config","general","APIVersion")?"v2":"v3",this.API_ENDPOINT=`api.company-target.com/api/${this.API_VERSION}/ip.json`,this.REGEX_API_ENDPOINT_VERSION=/.com\/api\/(v[0-9]+)\/ip.json/g,this.TAG_LOGGER_ENDPOINT="tag-logger.demandbase.com/bg9s",this.DEFAULT_CONFIGURATION={apiKey:null,baseUrl:this.API_ENDPOINT,baseLoggerUrl:this.TAG_LOGGER_ENDPOINT,testModeEnabled:!1,testModeValue:null,enabled:!0,masIntegrations:{pardot:!1},enablePardotPolling:!0},this.configuration=l.assign({},this.DEFAULT_CONFIGURATION),this.initialized=!1,this.pollForPardotStart=0,this.pardotMaxPollWindow=5e3,this.key=this.configuration.apiKey,this.useTestValue=this.configuration.testModeEnabled,this.testValue=this.configuration.testModeValue,this.load=this.get,this._loadOnce=this.getOnce,this.CompanyProfile=void 0,this.isCalled=!1,this.experiences={};try{this._setup=()=>(super.mergeConfigs({apiKey:p.getApiAuthToken(),testModeEnabled:d.getQueryParam(this.TEST_MODE_ENABLED)||window.Demandbase.Config.useTestIp,testModeValue:d.getQueryParam(this.TEST_MODE_VALUE)||window.Demandbase.Config.testIp},d.getFirstNonEmptyObject(e,window.Demandbase.Config.IpApiModule,d.dig(window.Demandbase.Config,"general","IpApiModule"))),this),this._setup(),this.initialized=!0}catch(e){this.initialized=!1}}initialize(){try{super.initialize(),this.initialized=!0}catch(e){this.initialized=!1,m.send(e)}}async buildIPAPIParameters(e){var i={query:this.fetchIpAddress(),mas_integrations:void 0,src:"tag"};if(document.interestCohort){var t=await document.interestCohort();i.cohort_id=t.id,i.cohort_version=t.version}return window.Demandbase.Config.isVoltronEnabled?l.assign(i,{auth:e||this.configuration.apiKey}):l.assign(i,{key:e||this.configuration.apiKey})}getNewRequest(){let e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}async get(e,i=!0){this.initialized||this.initialize();let t=this.getNewRequest();if(!t||d.isOldBrowserOrUserAgentUnavailable())return await this.getByDomScript(e,i),g.log("IP API query via DOM tag");var n=await this.buildIPAPIParameters(e),a=d.getQueryParam(c.QS_PREVIEW_TOKEN);if(a&&(n.preview_token=a),!n.key&&!n.auth)return g.log("IP API query cancelled - check auth key.");this.configuration.masIntegrations&&this.configuration.masIntegrations.pardot?n.mas_integrations=d.b64EncodeUnicode(l.JSON.stringify({pardot:this.fetchOrPollForPardotCookie()||{}})):g.log("No Pardot integration in config, skipping cookie sync"),i&&(t.onreadystatechange=m.wrap(()=>{this.responseHandler(t)}));try{t.open("POST","https://"+s.buildApiUrl(this.configuration.baseUrl));var o=await this.getThirdPartyOptInLabel();o&&(n.cookie_deprecation_label=o),void 0!==t.withCredentials&&(t.withCredentials=!0),t.send(JSON.stringify(n))}catch(e){if(0!==t.status)throw e;if(!this.isIgnorableDevice())throw Error("IP API Request Blocked")}}getAPIVersion(){var e=this.configuration.baseUrl,e=this.REGEX_API_ENDPOINT_VERSION.exec(e);return e&&2===e.length?e[1]:"v3"}async getThirdPartyOptInLabel(){try{return void 0!==window.navigator&&void 0!==window.navigator.cookieDeprecationLabel&&"function"==typeof window.navigator.cookieDeprecationLabel.getValue?await window.navigator.cookieDeprecationLabel.getValue():""}catch(e){return g.log("Error getting third party opt in"+e+" stack: "+e.stack),""}}async callTagLogger({xAmzCfId:e}){var i=this.getNewRequest(),t=this.getAPIVersion();try{i.open("GET","https://"+this.configuration.baseLoggerUrl+s.buildQueryString({"x-amz-cf-id":e,"api-version":t},!1)),void 0!==i.withCredentials&&(i.withCredentials=!1),i.send()}catch(e){if(0!==i.status)throw e;if(!this.isIgnorableDevice())throw Error("Tag IPV6 request declined")}}isIgnorableDevice(){for(let e=0;e<c.NON_HUMAN_DEVICES.length;e++)if(c.NON_HUMAN_DEVICES[e].test(window.navigator.userAgent))return!0;return!1}async getByDomScript(e,i=!0){var e=l.assign({},await this.buildIPAPIParameters(e),{callback:i?"Demandbase.Utilities.Callbacks.domScriptCallback":""});if(!e&&!e.auth)return g.log("IP API query cancelled - check auth key.");d.insertScript(s.buildApiUrl(this.configuration.baseUrl,e),"db_ip_api")}getOnce(){this.isCalled?g.log("IP API call halted. Already called."):(this.isCalled=!0,this.get(window.Demandbase.Config.key,!0))}fetchIpAddress(){if(this.configuration.testModeEnabled)return this.configuration.testModeValue||""}responseHandler(i){if(4===i.readyState&&200===i.status){var{responseText:t}=i;try{var e=l.JSON.parse(t);if(this.parseResponseForExperiences(e),this.CompanyProfile=d.flatten(e),!this.CompanyProfile)throw g.log("IP API response is not a valid value for callbacks: "+JSON.stringify(this.CompanyProfile)),Error("IP API response was 200 but content invalid");window.Demandbase.Utilities.Callbacks.callback(this.CompanyProfile);var n=i.getResponseHeader("x-amz-cf-id");n&&(d.dig(window.Demandbase,"Config","IpApiModule")&&(window.Demandbase.Config.IpApiModule.cloudFrontRequestId=n),this.callTagLogger({xAmzCfId:n}))}catch(e){if(window.Demandbase.ErrorReporter.additionalErrorDetails={status:i.status,readyState:i.readyState,url:i.responseURL,body:t},"string"==typeof t&&t)throw e;throw Error("responseText should be text and not empty")}}}parseResponseForExperiences(e){return e&&e.hasOwnProperty("experiences")&&(g.log("IpAPI.parseResponseForExperiences(): Experiences present in IP API response."),this.experiences=e.experiences),this.experiences}fetchOrPollForPardotCookie(){if(this.configuration.masIntegrations&&this.configuration.masIntegrations.pardot){var e=d.getCookiesByRegex(c.PARDOT_VISITOR_COOKIE_REGEX,document);if("object"==typeof e&&0<l.keys(e).length)return g.log("Found Pardot cookie, including in API request"),e;!1!==(this.configuration.enablePardotPolling&&0===this.pollForPardotStart)&&(g.log("Pardot cookie not found, initiating polling"),this.pollForPardotCookie())}else g.log("No Pardot integration in config, skipping cookie sync")}pollForPardotCookie(){(0===this.pollForPardotStart&&(this.pollForPardotStart=Date.now(),g.log("Pardot cookie polling started at "+this.pollForPardotStart)),Date.now()-this.pollForPardotStart>this.pardotMaxPollWindow)?g.log(`Pardot cookie not found within ${this.pardotMaxPollWindow} ms`):this.fetchOrPollForPardotCookie()?(g.log("Pardot cookie found, making second API call"),this.get(window.Demandbase.Config.key,!1)):window.setTimeout(()=>{this.pollForPardotCookie()},100)}}class C extends t{constructor(e){super(e),this.FORMS_REMOTE_MODULE_NAME="forms_90863e4c19.min.js",this.FORMS_REMOTE_MODULE_URL="tag.demandbase.com/shared/"+this.FORMS_REMOTE_MODULE_NAME,this.DEFAULT_CONFIGURATION={enabled:void 0,emailID:null,emailFields:[]},this.configuration={},this.inserted=!1,this._setup=()=>(this.setConfiguration(e),this),this._setup(),this.FORMS_REMOTE_MODULE_URL="tag.demandbase.com/shared/"+this.FORMS_REMOTE_MODULE_NAME,C.prototype.FORMS_REMOTE_MODULE_URL=this.FORMS_REMOTE_MODULE_URL}initialize(){super.initialize(),u.registerCallback(this.whenReady.bind(this))}whenReady(){this.isMktoForms2Installed()?window.MktoForms2.whenReady(m.wrap(this.load.bind(this))):this.load()}load(){let e=!1;(e=("function"==typeof window.Demandbase.Config.isFormPage?(e=window.Demandbase.Config.isFormPage(),this.setConfiguration(),window.Demandbase.Config):this).isFormPage())&&!this.inserted&&this.insertForms()}isFormPage(){var i=this.configuration.emailFields;this.configuration.emailID&&i&&i.push(this.configuration.emailID);for(let e=0;e<(i||[]).length;e++)if(i&&d.getElementByIdOrName(i[e]))return!0;return!1}isMktoForms2Installed(){return void 0!==window.MktoForms2&&void 0!==window.MktoForms2.whenReady}insertForms(){this.inserted=!0,window.Demandbase.Connectors.initWebForm=this.initializeWebForm,d.insertScript(this.FORMS_REMOTE_MODULE_URL||C.prototype.FORMS_REMOTE_MODULE_URL,"db_form_module")}initializeWebForm(e){e=e||window.Demandbase.Config.forms||window.Demandbase.Config.Forms||{},window.Demandbase.Connectors.WebForm.connect(e)}setConfiguration(e){super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase.Config.Forms),void 0===this.configuration.enabled&&void 0!==window.Demandbase.Config.Forms&&(this.configuration.enabled=!0),super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase.Config.forms),void 0===this.configuration.enabled&&void 0!==window.Demandbase.Config.forms&&(this.configuration.enabled=!0)}}class v extends t{constructor(e){super(e),this.DEFAULT_CONFIGURATION={enabled:!0},this.configuration={},this._setup=()=>(super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase.Config.Google_TagManager),this),this._setup()}initialize(){super.initialize(),u.registerCallback(this.callback.bind(this))}callback(e){this.pushToDataLayer(e)}pushToDataLayer(i,t){let n=0,a=()=>{var e;return window.google_tag_manager&&window.dataLayer&&"function"==typeof dataLayer.push?(e=t?"_"+t:"",window.dataLayer.push(i),window.dataLayer.push({event:"Demandbase_Loaded"+e}),g.log("Pushed to GTM dataLayer"),!0):(n<4&&(g.log(`Retrying GTM dataLayer push... ${n} of 4`),setTimeout(a,500),n++),!1)};return a()}}class A extends t{constructor(e){super(),this.DEFAULT_CONFIGURATION={enabled:!0,fireOnLoad:!1,formInputSelectors:['input[type="text"]','input[type="email"]'],inputSearchTerms:["email","user","login"]},this.configuration={},this.baseUrl="https://segments.company-target.com",this.activeSetTimeout=0,this._setup=()=>(super.mergeConfigs(this.DEFAULT_CONFIGURATION,e||window.Demandbase.Config.EmailDomainReporter),this),this._setup()}initialize(){super.initialize(),this.configuration.fireOnLoad&&this.sendDataIfAlreadyPresent(),this.attachListenersIfDocumentReady()}sendDataIfAlreadyPresent(){var e=this.suspectedEmailInputs();e.length<1||e.forEach(e=>{var{value:e}=e;if(p.isValidEmail(e)){var e=e.split("@")[1].toLowerCase();this.send(e)}})}attachListenersIfDocumentReady(){"loading"===p.getDocumentReadyState()?document.addEventListener("DOMContentLoaded",this.attachListenersIfDocumentReady.bind(this)):this.suspectedEmailInputs().forEach(e=>{e.addEventListener("input",()=>{var{value:i}=e;if(p.isValidEmail(i)){let e=i.split("@")[1].toLowerCase();window.clearTimeout(this.activeSetTimeout),this.activeSetTimeout=window.setTimeout(()=>{this.send(e)},400)}})})}suspectedEmailInputs(){return p.nodeListToArray(document.querySelectorAll(this.configuration.formInputSelectors.join(","))).map(e=>e).filter(e=>{var i=e.name.toLowerCase(),e=e.id.toLowerCase(),t=this.configuration.inputSearchTerms;return!(!p.includesAny(i,t)&&!p.includesAny(e,t))})}getNewRequest(){let e;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}send(e){var i=this.getNewRequest(),t=p.getApiAuthToken(),t=d.b64EncodeUnicode(`vendor=mariposa&p1=${e}&token=`+t),t=this.baseUrl+"/l/"+t;try{i.open("GET",t),i.withCredentials=!0,i.setRequestHeader("Content-type","application/json"),i.send()}catch(e){throw e}}responseHandler(e){}}class I{static{this.REGEX_CUSTOM_MODULE_NAME=/(.*)__(.*)/}constructor(e,i,t){this.config=e,this.moduleNameToConstructorMap=i,this.nameSpace=t}build(){this._parseConfig()}_parseConfig(){l.keys(this.config).forEach(e=>{var i=this._testConfigForKey(e);if(i&&3===i.length){var i=i[1],t=this.moduleNameToConstructorMap[i];this.nameSpace[e]?m.send(Error(`Failed to dynamically create configuration for ${e} due to previously existing configuration with the same name.`)):t?(this.nameSpace[e]=new t(this.config[e]),this.nameSpace[e].isEnabled()&&this.nameSpace[e].initialize()):m.send(Error("No constructor available in moduleNameToConstructor map for module: "+i))}})}_testConfigForKey(e){return I.REGEX_CUSTOM_MODULE_NAME.exec(e)}}class P extends t{constructor(e){super(e),this.DEFAULT_CONFIGURATION={isEnabled:!1,experiences:{},retryMS:0,totalWaitTime:0},this.SC_QUERY_PARAMETER_FORCE_FIRE="db_sc_experience_by_id",this.preTagModuleEnabled=!1,this.configuration=l.assign({},this.DEFAULT_CONFIGURATION),this.wrappedExperiences={},this.initialized=!1,this._setup=()=>(this.preTagModuleEnabled=!!window.Demandbase.PreTag,this.constructorConfig=e,super.mergeConfigs(this.configuration,this.DEFAULT_CONFIGURATION,window.Demandbase.Config.SiteCustomization,e),this),this._setup()}isEnabled(){return!0===this.configuration.isEnabled||!0===this.configuration.enabled}initialize(){(super.initialize(),this.isEnabled())?(this.preTagModuleEnabled=!!window.Demandbase.PreTag,super.mergeConfigs(this.configuration,window.Demandbase.Config.SiteCustomization,this.constructorConfig),g.log("SiteCustomization.initialize(): Initializing..."),this.setup(),u.registerCallback(this.callback.bind(this))):g.log("Site Customization is currently disabled, will not fire.")}callback(){this.fireExperienceByQueryParameter()?g.log("SiteCustomization.callback(): Experience already forced to fire by query parameter!"):(g.log("SiteCustomization.callback(): Invoked! Setting up SC and firing."),this.setup(),this.fireSiteCustomization(),this.preTagModuleEnabled&&window.Demandbase.PreTag.restorePageVisibility())}setup(e){if(!e&&this.initialized)g.log("SiteCustomization.setup(): already initilaized! not running setup again.");else if(void 0!==this.configuration.experiences){var i=this.configuration.experiences||{},e=l.keys(i)||[],t;for(t in g.log(`SiteCustomization.setup(): Wrapping ${e.length} experiences for setup`),i){var n=new T(i[t]);n&&(this.wrappedExperiences[n.id]=n)}this.initialized=!0}}fireSiteCustomization(){return m.wrap(()=>{let i=window.Demandbase.IpApi.experiences;if(g.log("fireSiteCustomization(): Running for IP API experiences: "+JSON.stringify(i)),i){var e=Object.keys(i).map(e=>i[e]),t=this.sortExperiencesToFire(e);for(let e=0;e<t.length;e++)if(this.applyExperience(t[e].id))return!0}else g.log("fireSiteCustomization(): Error firing SC experience. IP API response does not contain valid experiences.");return!1})()}sortExperiencesToFire(e){return e&&Array.isArray(e)&&0!==e.length?(e.sort((e,i)=>{var t=this.wrappedExperiences[e.id]?this.wrappedExperiences[e.id].priority:null,n=this.wrappedExperiences[i.id]?this.wrappedExperiences[i.id].priority:null;return(t&&n||g.log(`sortExperiencesToFire(): Warning: priority is not defined ${t} or `+n),t!==n&&t&&n)?n-t:e.updated_at&&i.updated_at?new Date(i.updated_at).getTime()-new Date(e.updated_at).getTime():(g.log(`sortExperiencesToFire(): Warning: updated_at is not defined ${e.updated_at} or `+i.updated_at),0)}),e):(g.log("sortExperiencesToFire(): No expereinces returned by IP API: "+JSON.stringify(e)),[])}fireExperienceById(e){return this.setup(),g.log("fireExperienceById(): Firing by experience id: "+e),this.applyExperience(e,!0)}fireExperienceByQueryParameter(){var e=d.getQueryParam(this.SC_QUERY_PARAMETER_FORCE_FIRE);return e?(g.log(`fireExperienceByQueryParameter(): Firing experience id: ${e} now`),this.setup(),this.applyExperience(e,!0)):(g.log(`fireExperienceByQueryParameter(): Not firing experience id: "${e}" as it is not valid`),!1)}applyExperience(e,i=!1){var t;return(g.log(`applyExperience(): Requested to apply Experience ID: ${e} with forceRun of `+i),e&&this.wrappedExperiences.hasOwnProperty(e))?(t=this.wrappedExperiences[e])?i?t.forceRun():t.run():(g.log(`applyExperience(): Experience ID: ${e} modobj not truthy: `+JSON.stringify(t)),!1):(g.log(`applyExperience(): Experience ID: ${e} not found in `+JSON.stringify(this.wrappedExperiences,null,4)),!1)}getCompanyProfile(){return window.Demandbase.IpApi&&window.Demandbase.IpApi.CompanyProfile||{}}CP(){return this.getCompanyProfile()}generateChangeActionValue(e,i){let t=this.getCompanyProfile();return!Object.keys(t).length&&!i.length||i.every(e=>t[e])?e:null}applyModifications(i,t){let n=0,a=0,o=function(e){return e?a+=1:n+=1,n+a>=i.length&&(g.log("applyModifications(): All modifications have returned"),t)&&(0===n?t(!0):t(!1)),e};i.forEach(e=>{this.applyModificationRetry(e,o.bind(this),0)})}applyModificationRetry(i,t,n){var{value:i,aliases:a,selector:o,typeKey:s}=i,r=document.querySelector(o);if(r){let e=this.generateChangeActionValue(i,a);return"string"==typeof e?(s.includes("backgroundImage")&&(e="url("+e+")"),d.set(r,s,e),g.log("applyModificationRetry(): Successfully applied for selector: "+o+" after "+n+" attempts."),t(!0)):(g.log("applyModificationRetry(): No change action applied for selector: "+o+" after "+n+" attempts."),t(!1))}return n*this.configuration.retryMS>=this.configuration.totalWaitTime?(g.log("applyModificationRetry(): Applying modification for querySelector: "+o+" timeout after "+n+" attempts."),t(!1)):(g.log("applyModificationRetry(): Retrying for selector: "+o+" currently at "+n+" attempts."),setTimeout(this.applyModificationRetry.bind(this,{value:i,aliases:a,selector:o,typeKey:s},t,n+1),this.configuration.retryMS),!1)}}class T{constructor(e){this.exp=e,this.isEnabled=!1,this.priority=null,this.id="",this.name="",this.pages=e.pages||[],this.pages instanceof Array||(this.pages=[this.pages]),this.isEnabled=e.isEnabled||!1,this.name=e.name||"",this.id=e.id||"",this.priority=e.priority||5e3,this.modify=e.modify||function(){},this.locations=e.locations||null,this.boundPostModificationCallback=this.postModificationCallback.bind(this)}postModificationCallback(e,i){window.Demandbase.PreTag&&window.Demandbase.PreTag.restorePageVisibility(),e&&(window.Demandbase.EventApi.sendEvent(c.EVENT_TYPES.EXPERIENCE_FIRED,this.id),i)&&i.length&&i.forEach(e=>{var e=document.querySelector(e.selector);e&&e.addEventListener("click",()=>{window.Demandbase.EventApi.sendEvent(c.EVENT_TYPES.EXPERIENCE_CLICKED,this.id)},{once:!0})}),g.log(`Experience.postModificationCallback: The experience named '${this.name}' ${e?"was successfully":"was NOT"} applied.`)}forceRun(){try{return g.log("Experience.forceRun: running modify function for: "+this.name),this.modify.call(this,document,this.boundPostModificationCallback),!0}catch(e){throw Error(c.MODIFICATION_ERROR+": "+e.message)}}run(){return this.isEnabled?this.doesPageMatch()?this.doesLocationMatch()?(g.log(`Experience.run(): Experience named: ${this.name} url and location matched, and will run.`),this.forceRun()):(g.log(`Experience.run(): SiteCustomization modify ${this.name} not fired. No location match found.`),!1):(g.log(`Experience.run(): SiteCustomization modify ${this.name} not fired. no URL match with: `+JSON.stringify(this.pages)),!1):(g.log(`Experience.run(): Experience named: ${this.name} is currently disabled, will not fire.`),!1)}doesPageMatch(){g.log(`Experience.doesPageMatch(): Experience named: ${this.name} checking these URLs: `+JSON.stringify(this.pages));for(let e=0;e<this.pages.length;e++)if(p.isCurrentPage(this.pages[e]||""))return!0;return!1}doesLocationMatch(){var e=this.getCompanyProfile().registry_country_code;return g.log(`Experience.doesLocationMatch(): Checking experience '${this.name}' with country code '${e}' against locations object: `+JSON.stringify(this.locations)),!!(!this.locations||"global"===this.locations.status||("string"!=typeof e||2!==e.length)&&this.locations.showUnknown||0===this.locations.countryCodes.length||-1<l.indexOf(this.locations.countryCodes,e))}getCompanyProfile(){return window.Demandbase.IpApi&&window.Demandbase.IpApi.CompanyProfile||{}}}let O="11.0.9";window.Demandbase&&(window.Demandbase.version=O);class R{constructor(e){this._isInitialized=!1,this.Config=window.Demandbase?.Config,this.setConfig=d.set,this.PreTag=e}setupOldDBClassic(){return window.Demandbase.Segments={_setup:()=>{},_reset:()=>{},load:()=>{},init:()=>{},getActiveSegments:()=>[],getInactiveSegments:()=>[],add:()=>[],get:()=>[],isValid:()=>!1,_isInitialized:()=>{},CompanyProfile:{}},window.Demandbase.DBCondition=()=>{},this}initialize(e){if(g.log("Demandbase.initialize: Initializing Demandbase with force = "+e),window.Demandbase||(window.Demandbase=this),window.Demandbase.ErrorReporter||(window.Demandbase.ErrorReporter=m,window.Demandbase.ErrorReporter.initialize()),window.Demandbase.version=O,this.setupOldDBClassic(),window.Demandbase.Shims=l,window.Demandbase.Config=l.assign(window.Demandbase.Config,window.Demandbase.Config||{}),window.Demandbase.Config.allowedDomains&&window.Demandbase.Config.allowedDomains.length)for(let e=0;e<window.Demandbase.Config.allowedDomains.length&&!(document.location&&document.location.href&&0<=document.location.href.indexOf(window.Demandbase.Config.allowedDomains[e]));e++)if(window.Demandbase.Config.allowedDomains.length-1===e)return g.log(`Demandbase.initialize: Domain ${document.location.href} - not in allowed list`),this;if(!window.Demandbase._isInitialized||e){this._isInitialized=!0,window.Demandbase._isInitialized=this._isInitialized,window.Demandbase.utils=p,l.assign(window.Demandbase.utils,p,{loadScript:p.insertScript,flattenData:p.flatten,getAttrValue:p.getAttributeValue,log:g.log,getElementByIdOrName:p.getElementByIdOrName,callback:u.callback.bind(u),registerCallback:u.registerCallback.bind(u)}),window.Demandbase.Utilities=p,window.Demandbase.Utilities.Api||(window.Demandbase.Utilities.Api=s),l.assign(window.Demandbase.Utilities.Api,s),window.Demandbase.Utilities.Constants||(window.Demandbase.Utilities.Constants=c),window.Demandbase.utils.tokens||(window.Demandbase.utils.tokens=c),window.Demandbase.Utilities.Logging||(window.Demandbase.Utilities.Logging=g),window.Demandbase.Utilities.Events||(window.Demandbase.Utilities.Events=w),null==window.Demandbase.Config.isInIFrame&&(window.Demandbase.Config.isInIFrame=p.detectIFrame()),window.Demandbase.AssetReporter=new _,window.Demandbase.Advertising=new f,window.Demandbase.AdvertisingModule=f,window.Demandbase.Ads=window.Demandbase.Advertising,window.Demandbase.Advertising.isEnabled()&&(window.Demandbase.IpApiReportingOnly=new y),window.Demandbase.IpApi=new y,window.Demandbase.IpApiModule=y,window.Demandbase.IP=window.Demandbase.IpApi,window.Demandbase.Config.callback&&u.registerCallback(window.Demandbase.Config.callback),window.Demandbase.Utilities.Callbacks||(window.Demandbase.Utilities.Callbacks=u),window.Demandbase.Callbacks||(window.Demandbase.Callbacks=u),window.Demandbase.FormsLoader=new C,window.Demandbase.FormsLoader.isEnabled()&&(window.Demandbase.utils.loadFormModule=window.Demandbase.FormsLoader.load.bind(window.Demandbase.FormsLoader),window.Demandbase.utils.isFormPage=window.Demandbase.FormsLoader.isFormPage.bind(window.Demandbase.FormsLoader)),window.Demandbase.Connectors&&"object"==typeof window.Demandbase.Connectors||(window.Demandbase.Connectors={}),window.Demandbase.Connectors.Google_Analytics=new E,window.Demandbase.Google_AnalyticsModule||(window.Demandbase.Google_AnalyticsModule=E),window.Demandbase.Connectors.Google_TagManager=new v,window.Demandbase.EventApi=new b,window.Demandbase.SiteCustomization=new P,window.Demandbase.Domain=h,window.Demandbase.EmailDomainReporter=new A,window.Demandbase.EmailDomainReporterModule=A;var e={Advertising:window.Demandbase.AdvertisingModule,AssetReporter:window.Demandbase.AssetReporterModule,Content:window.Demandbase.ContentModule,ErrorReporter:window.Demandbase.ErrorReporterModule||m,EventApi:window.Demandbase.EventApiModule,Google_Analytics:window.Demandbase.Google_AnalyticsModule,SiteCustomization:window.Demandbase.SiteCustomization};new I(window.Demandbase.Config,e,window.Demandbase).build(),g.log("Demandbase has been initialized!")}return this}fire(){return this._isInitialized&&window.Demandbase._isInitialized?(g.log("Demandbase.fire(): Preparing to setup and fire Demandbase modules"),window.Demandbase.AssetReporter._setup(),window.Demandbase.AssetReporter.isEnabled()&&window.Demandbase.AssetReporter.initialize(),window.Demandbase.Advertising._setup(),window.Demandbase.Advertising.isEnabled()&&(window.Demandbase.IpApiReportingOnly&&window.Demandbase.IpApiReportingOnly.initialize(),window.Demandbase.Advertising.initialize()),window.Demandbase.FormsLoader._setup(),window.Demandbase.FormsLoader.isEnabled()&&(window.Demandbase.FormsLoader.initialize(),window.Demandbase.utils.loadFormModule=window.Demandbase.FormsLoader.load.bind(window.Demandbase.FormsLoader),window.Demandbase.utils.isFormPage=window.Demandbase.FormsLoader.isFormPage.bind(window.Demandbase.FormsLoader)),window.Demandbase.Connectors.Google_Analytics._setup(),window.Demandbase.Connectors.Google_Analytics.isEnabled()&&window.Demandbase.Connectors.Google_Analytics.initialize(),window.Demandbase.Connectors.Google_TagManager._setup(),window.Demandbase.Connectors.Google_TagManager.isEnabled()&&window.Demandbase.Connectors.Google_TagManager.initialize(),window.Demandbase.EventApi.initialize(),window.Demandbase.SiteCustomization.initialize(),window.Demandbase.EmailDomainReporter._setup(),window.Demandbase.EmailDomainReporter.isEnabled()&&window.Demandbase.EmailDomainReporter.initialize(),window.Demandbase.IpApi._setup(),window.Demandbase.IpApi.isEnabled()&&window.Demandbase.IpApi.initialize(),window.Demandbase.Config.callback&&window.Demandbase.Callbacks.registerCallback(window.Demandbase.Config.callback),window.Demandbase.IpApi.getOnce(),"function"==typeof window.Demandbase.Config.getDomain&&window.Demandbase.Config.getDomain()&&window.Demandbase.Domain.load(),"function"==typeof window.Demandbase.Config.onLoad&&window.Demandbase.Config.onLoad.call(window.Demandbase),g.log("DemandbaseModule has fired!")):g.log("Demandbase has not been initialized and will not fire."),this}}class N{constructor(){this.init()}init(){window.Demandbase||(window.Demandbase={}),this.ads=window.Demandbase.Config?.ads||{},this.analytics=window.Demandbase.Config?.analytics||{},this.forms=window.Demandbase.Config?.forms||{},this.domainAPI=window.Demandbase.Config?.domainAPI||{},this.allowedDomains=window.Demandbase.Config?.allowedDomains||[],this.emptyWatchDefault=window.Demandbase.Config?.emptyWatchDefault||null,this.general=window.Demandbase.Config?.general||{forms:{emailAPIPath:null,autocompletePath:null},IpApiModule:{baseUrl:null},domainAPI:{url:null},APIVersion:null},this.hooks=window.Demandbase.Config?.hooks||{},this.isInIFrame=window.Demandbase.Config?.isInIFrame||null,this.key=window.Demandbase.Config?.key||null,this.logging=window.Demandbase.Config?.logging||null,this.nonCompanyDefault=window.Demandbase.Config?.nonCompanyDefault||null,this.nonWatchDefault=window.Demandbase.Config?.nonWatchDefault||null,this.testDomain=window.Demandbase.Config?.testDomain||void 0,this.testIp=window.Demandbase.Config?.testIp||void 0,this.tokens=window.Demandbase.Config?.tokens||{},this.useTestDomain=window.Demandbase.Config?.useTestDomain||!1,this.useTestIp=window.Demandbase.Config?.useTestIp||!1,window.Demandbase.Config&&(window.Demandbase.Config.content=window.Demandbase.Config.content||[],window.Demandbase.Config.Content=window.Demandbase.Config.Content||[],window.Demandbase.Config.segments=window.Demandbase.Config.segments||[]),window.Demandbase.Content={},window.Demandbase.Segments={},this.callback=window.Demandbase.Config?.callback||void 0,this.getDomain=window.Demandbase.Config?.getDomain||void 0,this.isFormPage=window.Demandbase.Config?.isFormPage||void 0,this.onLoad=window.Demandbase.Config?.onLoad||void 0,this.Advertising=window.Demandbase.Config?.Advertising||{},this.AssetReporter=window.Demandbase.Config?.AssetReporter||{},this.ErrorReporter=window.Demandbase.Config?.ErrorReporter||{},this.Forms=window.Demandbase.Config?.Forms||{},this.Google_Analytics=window.Demandbase.Config?.Google_Analytics||{},this.Google_TagManager=window.Demandbase.Config?.Google_TagManager||{},this.IpApiModule=window.Demandbase.Config?.IpApiModule||{},this.EmailDomainReporter=window.Demandbase.Config?.EmailDomainReporter||{},this.Event=window.Demandbase.Config?.Event||{},this.isVoltronEnabled=!1!==window.Demandbase.Config?.isVoltronEnabled,this.SiteCustomization=window.Demandbase.Config?.SiteCustomization||{experiences:{}}}}try{if(window.Demandbase&&window.Demandbase._isInitialized)return;var S=(window.Demandbase||{}).PreTag;window.Demandbase=new R(S),window.Demandbase.Config=new N,window.Demandbase.initialize(!1);Demandbase.Config.Google_Analytics={fieldMap:null};Demandbase.Config.isFormPage=function(){return void 0!==window.Demandbase.formCheck&&!0===window.Demandbase.formCheck||"db"===window.Demandbase.utils.getQueryParam("forms-mode")};window.Demandbase.Config.forms={isAutocompleteWidgetEnabled:!0,companyID:"Company",emailID:"Email",fieldMap:{industry:"Industry",employee_range:"Employee_Range__c",country_name:"Country"},autocompleteLabel:"{company_name}<br><span>{street_address}, {city}, {state}</span>",priorityMap:{company:3,ip:2,domain:1},autocompleteCount:35,autocompleteFilters:{country:function(){if(document.querySelector("form input[name='id']"))return window.Demandbase.Config.forms.countryHelper(document.getElementById("Form"+document.querySelector("form input[name='id']").value+"_14").value)},state:function(){if(document.querySelector("form input[name='id']"))return window.Demandbase.Config.forms.stateHelper(document.getElementById("Form"+document.querySelector("form input[name='id']").value+"_15").value)}},countryHelper:function(e){var i=window.Demandbase.Config.countryMapping,t;for(t in i)if(i[t]===e)return t;return""},stateHelper:function(e){var i=window.Demandbase.Config.stateMapping,t;for(t in i)if(i[t]===e)return t;return""},adobe_custom_mapping:function(e){e=JSON.parse(JSON.stringify(e));try{window.faasSid(e.company_id);window.faasIndustryCode(e.industry);window.faasEmpRangeCode(e.employee_count);window.faasAddress1(e.street_address);window.faasCity(e.city);window.faasZipCode(e.zip);window.faasBizPhone(e.phone);window.faasAnnualSales(e.annual_sales);window.faasWebsite(e.web_site);window.faasSic(e.primary_sic)}catch(e){window.Demandbase.utils.log(e)}},hooks:{pre_init:function(){"function"==typeof window.faasIP&&window.faasIp(window.Demandbase.IP.CompanyProfile.ip)},response:function(e){var i=window.Demandbase.Connectors.WebForm._sourceChecker.sources,t="Form"+document.querySelector("form input[name='id']").value+"_10";Demandbase.CompanyAutocomplete.email=void 0;if(e.pick){$("#Form"+$("form input[name='id']").val()+"_16").val("");$("#Form"+$("form input[name='id']").val()+"_120").val("success");window.Demandbase.Autocomplete={};window.Demandbase.Autocomplete.CompanyProfile=e.pick;$("#Form"+$("form input[name='id']").val()+"_129").val(window.Demandbase.IP.CompanyProfile.company_name);return window.Demandbase.Config.forms.adobe_custom_mapping(e.pick)}if(e.input_match){$("#Form"+$("form input[name='id']").val()+"_125").val("");$("#Form"+$("form input[name='id']").val()+"_18").val("");$("#Form"+$("form input[name='id']").val()+"_17").val("");$("#Form"+$("form input[name='id']").val()+"_126").val("");$("#Form"+$("form input[name='id']").val()+"_115").val("");$("#Form"+$("form input[name='id']").val()+"_122").val("");$("#Form"+$("form input[name='id']").val()+"_16").val("");$("#Form"+$("form input[name='id']").val()+"_123").val("");$("#Form"+$("form input[name='id']").val()+"_127").val("");$("#Form"+$("form input[name='id']").val()+"_104").val("");$("#Form"+$("form input[name='id']").val()+"_33").val("");$("#Form"+$("form input[name='id']").val()+"_120").val("failure");$("#Form"+$("form input[name='id']").val()+"_129").val(window.Demandbase.IP.CompanyProfile.company_name);return window.Demandbase.Config.forms.adobe_custom_mapping(window.Demandbase.IP.CompanyProfile)}}}};window.Demandbase.Config.demandbase_loaded=function(e,i){};window.Demandbase.Config.callback=function(e){if(e)try{void 0!==window.Demandbase.Config.demandbase_loaded.call&&window.Demandbase.Config.demandbase_loaded.call(window.Demandbase,e);window.Demandbase.Config.data_ip=e}catch(e){window.Demandbase.utils.log(e)}};window.Demandbase.Config.data_ip={};window.Demandbase.Config.data_person={};window.Demandbase.Config.countryMapping={AD:"546",AE:"547",AF:"555",AG:"556",AI:"557",AL:"558",AM:"559",AN:"560",AO:"561",AQ:"562",AR:"563",AT:"590",AU:"600",AW:"609",AZ:"610",BA:"611",BB:"612",BD:"613",BE:"614",BF:"624",BG:"625",BH:"635",BI:"636",BJ:"637",BM:"638",BN:"639",BO:"640",BR:"641",BS:"669",BT:"670",BW:"671",BY:"672",BZ:"673",CA:"674",CC:"688",CD:"689",CF:"690",CG:"691",CH:"692",CI:"719",CK:"720",CL:"721",CM:"737",CN:"738",CO:"771",CR:"807",CV:"810",CX:"811",CY:"812",CZ:"813",DE:"822",DJ:"839",DK:"840",DM:"857",DO:"858",DZ:"859",EC:"860",EE:"862",EG:"863",EH:"867",ER:"868",ES:"869",ET:"920",FI:"921",FJ:"928",FK:"929",FM:"930",FO:"931",FR:"932",GA:"1034",GB:"1035",GD:"1230",GE:"1231",GF:"1232",GH:"1233",GI:"1234",GL:"1235",GM:"1236",GN:"1237",GP:"1238",GQ:"1239",GR:"1240",GS:"1294",GT:"1295",GW:"1296",GY:"1297",HK:"1298",HN:"1305",HR:"1306",HT:"1328",HU:"1329",ID:"1370",IE:"1398",IL:"1425",IN:"1432",IO:"1468",IQ:"1469",IS:"1471",IT:"1472",JM:"1577",JO:"1578",JP:"1579",KE:"1627",KG:"1629",KH:"1630",KI:"1631",KM:"1632",KN:"1633",KR:"1635",KW:"1653",KY:"1654",KZ:"1655",LA:"1669",LB:"1670",LC:"1671",LI:"1672",LK:"1673",LR:"1674",LS:"1675",LT:"1676",LU:"1677",LV:"1678",LY:"1679",MA:"1680",MC:"1681",MD:"1682",ME:"1725",MG:"1726",MH:"1727",MK:"1728",ML:"1729",MM:"1730",MN:"1731",MO:"1732",MQ:"1733",MR:"1734",MS:"1735",MT:"1736",MU:"1737",MV:"1738",MW:"1739",MX:"1740",MY:"1774",MZ:"1793",NA:"1794",NC:"1795",NE:"1796",NF:"1797",NG:"1798",NI:"1799",NL:"1800",NO:"1817",NP:"1837",NR:"1838",NU:"1842",NZ:"1843",OM:"1856",PA:"1857",PE:"1858",PF:"1883",PG:"1884",PH:"1885",PK:"1986",PL:"1994",PM:"2044",PN:"2045",PS:"2046",PT:"2047",PY:"2088",QA:"2089",RE:"2090",RO:"2091",RS:"2134",RU:"2135",RW:"2247",SA:"2248",SB:"2249",SC:"2250",SE:"2252",SG:"2274",SH:"2276",SI:"2277",SJ:"2338",SK:"2339",SL:"2344",SM:"2345",SN:"2346",SO:"2347",SR:"2348",ST:"2349",SV:"2350",SZ:"2352",TC:"2353",TD:"2354",TG:"2355",TH:"2356",TJ:"2437",TK:"2438",TL:"2439",TM:"2440",TN:"2441",TO:"2442",TR:"2443",TT:"2523",TV:"2524",TW:"2525",TZ:"2547",UA:"2548",UG:"2578",UM:"2579",US:"2580",UY:"2641",UZ:"2644",VA:"2645",VC:"2646",VE:"2647",VG:"2674",VN:"2679",VU:"2681",WF:"2682",WS:"2683",YE:"2684",YT:"2685",ZA:"2686",ZM:"2699",ZW:"2700"};window.Demandbase.Config.stateMapping={AA:"2581",AE:"2582",AK:"2583",AL:"2584",AP:"2585",AR:"2586",AS:"2587",AZ:"2588",CA:"2589",CO:"2590",CT:"2591",DC:"2592",DE:"2593",FL:"2594",GA:"2595",GU:"2596",HI:"2597",IA:"2598",ID:"2599",IL:"2600",IN:"2601",KS:"2602",KY:"2603",LA:"2604",MA:"2605",MD:"2606",ME:"2607",MI:"2608",MN:"2609",MO:"2610",MP:"2611",MS:"2612",MT:"2613",NC:"2614",ND:"2615",NE:"2616",NH:"2617",NJ:"2618",NM:"2619",NV:"2620",NY:"2621",OH:"2622",OK:"2623",OR:"2624",PA:"2625",PR:"2626",PW:"2627",RI:"2628",SC:"2629",SD:"2630",TN:"2631",TX:"2632",UT:"2633",VA:"2634",VI:"2635",VT:"2636",WA:"2637",WI:"2638",WV:"2639",WY:"2640",AB:"675",BC:"676",MB:"677",NB:"678",NL:"679",NS:"680",NT:"681",NU:"682",ON:"683",PE:"684",QC:"685",SK:"686",YT:"687"};window.Demandbase.checkForElements=function(e,i,t){try{if(e===t)return!1;if(void 0===window.Demandbase.CompanyAutocomplete||null===document.querySelector("form input[name='id']")||(void 0===window.Demandbase.IP.CompanyProfile||null!==window.faasIp&&"function"!=typeof window.faasIp)&&"db_company_check"===window.Demandbase.Config.forms.companyID){e++;setTimeout(window.Demandbase.checkForElements,i,e,i,t)}else{clearTimeout(e);window.Demandbase.FormsLoader.configuration.companyID="Form"+document.querySelector("form input[name='id']").value+"_10";window.Demandbase.FormsLoader.configuration.emailID="Form"+document.querySelector("form input[name='id']").value+"_1";if(!0===window.Demandbase.Config.isFormPage()&&void 0!==window.Demandbase.utils){window.Demandbase.CompanyAutocomplete.initialized=!1;window.Demandbase.Connectors.WebForm.connect(window.Demandbase.FormsLoader.configuration);var n="#demandbase-company-autocomplete-widget > ul {z-index: 300 !important;}",a=document.createElement("style");a.type="text/css";a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n));document.getElementsByTagName("head")[0].appendChild(a);window.Demandbase.utils.loadFormModule()}}}catch(e){window.Demandbase.utils.log(e);return!1}};window.Demandbase.Config.demandbaseFormLoad=function(){window.Demandbase.formCheck=!0;window.Demandbase.utils.loadFormModule();var e=0,i=50,t=75;window.Demandbase.checkForElements(0,50,75)};Demandbase.Config.clientId="7a74493ac463cfbf";Demandbase.Config.key="cxIJFIqQwRnCTfy1aELapADocQny6RFKBF5Owh0V";Demandbase.Config.Advertising={enableBW:!0};window.Demandbase.setConfig(Demandbase,"Config.general.APIVersion","v3");window.Demandbase.setConfig(Demandbase,"Config.general.IpApiModule.baseUrl","api.company-target.com/api/v3/ip.json");window.Demandbase.setConfig(Demandbase,"Config.general.domainAPI.url","api.company-target.com/api/v3/domain.json");window.Demandbase.setConfig(Demandbase,"Config.general.forms.emailAPIPath","/api/v5/email.json");window.Demandbase.setConfig(Demandbase,"Config.general.forms.autocompletePath","/forms/autocomplete");window.Demandbase.setConfig(Demandbase,"Config.Event.enabled",!0);window.Demandbase.setConfig(Demandbase,"Config.Event.server","https://et.company-target.com")}catch(e){window.location.search&&-1<window.location.search.indexOf("db_logging=true")&&console.error("Demandbase: Configuration error",e),window.Demandbase.ErrorReporter=new r,window.Demandbase.ErrorReporter.initialize(),window.Demandbase.ErrorReporter.send(e,{type:"TagConfigError"})}window.Demandbase.ErrorReporter=window.Demandbase.ErrorReporter||new r,window.Demandbase.ErrorReporter.initialize(),window.Demandbase.ErrorReporter.wrap(()=>window.Demandbase.fire.bind(window.Demandbase)())()})();